const en=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ve=globalThis,ar="10.5.0";function $a(){return La(Ve),Ve}function La(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ar,t[ar]=t[ar]||{}}function Ii(e,t,n=Ve){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[ar]=r[ar]||{};return s[e]||(s[e]=t())}const ag="Sentry Logger ",lu={};function cg(e){if(!("console"in Ve))return e();const t=Ve.console,n={},r=Object.keys(lu);r.forEach(s=>{const i=lu[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function ug(){Da().enabled=!0}function lg(){Da().enabled=!1}function lf(){return Da().enabled}function dg(...e){Oa("log",...e)}function fg(...e){Oa("warn",...e)}function pg(...e){Oa("error",...e)}function Oa(e,...t){en&&lf()&&cg(()=>{Ve.console[e](`${ag}[${e}]:`,...t)})}function Da(){return en?Ii("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ft={enable:ug,disable:lg,isEnabled:lf,log:dg,warn:fg,error:pg},hg=Object.prototype.toString;function mg(e,t){return hg.call(e)===`[object ${t}]`}function gg(e){return mg(e,"Object")}function _g(e){return!!(e!=null&&e.then&&typeof e.then=="function")}const Sg=Ve;function yg(){try{return Sg.document.location.href}catch{return""}}function bg(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Eg(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{en&&ft.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function vg(){const e=Ve;return e.crypto||e.msCrypto}function cr(e=vg()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}const df=1e3;function ff(){return Date.now()/df}function Tg(){const{performance:e}=Ve;if(!(e!=null&&e.now)||!e.timeOrigin)return ff;const t=e.timeOrigin;return()=>(t+e.now())/df}let du;function Ig(){return(du??(du=Tg()))()}function wg(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ig(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:cr()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function pf(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=pf(r[s],t[s],n-1));return r}function fu(){return cr()}const Bo="_sentrySpan";function pu(e,t){t?Eg(e,Bo,t):delete e[Bo]}function hu(e){return e[Bo]}const kg=100;let _r=class Uo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:fu(),sampleRand:Math.random()}}clone(){const t=new Uo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,pu(t,hu(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&wg(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Uo?n.getScopeData():gg(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,pu(this,void 0),this._attachments=[],this.setPropagationContext({traceId:fu(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const r=typeof n=="number"?n:kg;if(r<=0)return this;const s={timestamp:ff(),...t,message:t.message?bg(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:hu(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=pf(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||cr();if(!this._client)return en&&ft.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=(r==null?void 0:r.event_id)||cr();if(!this._client)return en&&ft.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||cr();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(en&&ft.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Cg(){return Ii("defaultCurrentScope",()=>new _r)}function Rg(){return Ii("defaultIsolationScope",()=>new _r)}let xg=class{constructor(t,n){let r;t?r=t:r=new _r;let s;n?s=n:s=new _r,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return _g(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function On(){const e=$a(),t=La(e);return t.stack=t.stack||new xg(Cg(),Rg())}function Ag(e){return On().withScope(e)}function Mg(e,t){const n=On();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function mu(e){return On().withScope(()=>e(On().getIsolationScope()))}function Ng(){return{withIsolationScope:mu,withScope:Ag,withSetScope:Mg,withSetIsolationScope:(e,t)=>mu(t),getCurrentScope:()=>On().getScope(),getIsolationScope:()=>On().getIsolationScope()}}function hf(e){const t=La(e);return t.acs?t.acs:Ng()}function wi(){const e=$a();return hf(e).getCurrentScope()}function $g(){const e=$a();return hf(e).getIsolationScope()}function Lg(){return Ii("globalScope",()=>new _r)}function Mr(){return wi().getClient()}function gu(e){const t=Mr();if(!t){en&&ft.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Og(e,t={},n=wi()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=(n==null?void 0:n.getClient())||Mr();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function Dg(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Pg(){return!Dg()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Fg(){return typeof window<"u"&&(!Pg()||Bg())}function Bg(){const e=Ve.process;return(e==null?void 0:e.type)==="renderer"}const qe=Ve,re=qe.document,or=qe.navigator,mf="Report a Bug",Ug="Cancel",Hg="Send Bug Report",Wg="Confirm",jg="Report a Bug",zg="your.email@example.org",qg="Email",Gg="What's the bug? What did you expect?",Vg="Description",Yg="Your Name",Xg="Name",Kg="Thank you for your report!",Jg="(required)",Zg="Add a screenshot",Qg="Remove screenshot",e_="widget",t_="api",n_=5e3,r_=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=Mr();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&wi().setTags(e.tags);const r=Og({source:t_,url:yg(),...e},t);return new Promise((s,i)=>{const o=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(o),a(),u!=null&&u.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):(u==null?void 0:u.statusCode)===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},ws=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function s_(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(or.userAgent)||/Macintosh/i.test(or.userAgent)&&or.maxTouchPoints&&or.maxTouchPoints>1||!isSecureContext)}function rs(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var n,r;(n=t.onFormOpen)==null||n.call(t),(r=e.onFormOpen)==null||r.call(e)},onFormClose:()=>{var n,r;(n=t.onFormClose)==null||n.call(t),(r=e.onFormClose)==null||r.call(e)},onSubmitSuccess:(n,r)=>{var s,i;(s=t.onSubmitSuccess)==null||s.call(t,n,r),(i=e.onSubmitSuccess)==null||i.call(e,n,r)},onSubmitError:n=>{var r,s;(r=t.onSubmitError)==null||r.call(t,n),(s=e.onSubmitError)==null||s.call(e,n)},onFormSubmitted:()=>{var n,r;(n=t.onFormSubmitted)==null||n.call(t),(r=e.onFormSubmitted)==null||r.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function i_(e){const t=re.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Ne(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const En=20,o_="http://www.w3.org/2000/svg";function a_(){const e=a=>qe.document.createElementNS(o_,a),t=Ne(e("svg"),{width:`${En}`,height:`${En}`,viewBox:`0 0 ${En} ${En}`,fill:"var(--actor-color, var(--foreground))"}),n=Ne(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ne(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=Ne(e("clipPath"),{id:"clip0_57_80"}),o=Ne(e("rect"),{width:`${En}`,height:`${En}`,fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),t}function c_({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=re.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||mf,s.appendChild(a_()),e){const o=re.createElement("span");o.appendChild(re.createTextNode(e)),s.appendChild(o)}const i=i_(r);return{el:s,appendToDom(){n.appendChild(i),n.appendChild(s)},removeFromDom(){s.remove(),i.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const gf="rgba(88, 74, 192, 1)",u_={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:gf,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},_u={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:gf,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Su(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function l_({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=re.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Su(e==="dark"?{..._u,...t}:{...u_,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Su({..._u,...t})}
  }
}`:""}
}
`,r&&s.setAttribute("nonce",r),s}const _f=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:s="sentry-feedback",autoInject:i=!0,showBranding:o=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:_={},themeDark:y={},addScreenshotButtonLabel:x=Zg,cancelButtonLabel:w=Ug,confirmButtonLabel:C=Wg,emailLabel:b=qg,emailPlaceholder:I=zg,formTitle:A=jg,isRequiredLabel:E=Jg,messageLabel:T=Vg,messagePlaceholder:B=Gg,nameLabel:v=Xg,namePlaceholder:M=Yg,removeScreenshotButtonLabel:j=Qg,submitButtonLabel:$=Hg,successMessageText:R=Kg,triggerLabel:O=mf,triggerAriaLabel:N="",onFormOpen:W,onFormClose:Y,onSubmitSuccess:ce,onSubmitError:Le,onFormSubmitted:_e}={})=>{const me={id:s,autoInject:i,showBranding:o,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:y,themeLight:_,triggerLabel:O,triggerAriaLabel:N,cancelButtonLabel:w,submitButtonLabel:$,confirmButtonLabel:C,formTitle:A,emailLabel:b,emailPlaceholder:I,messageLabel:T,messagePlaceholder:B,nameLabel:v,namePlaceholder:M,successMessageText:R,isRequiredLabel:E,addScreenshotButtonLabel:x,removeScreenshotButtonLabel:j,onFormClose:Y,onFormOpen:W,onSubmitError:Le,onSubmitSuccess:ce,onFormSubmitted:_e};let Ae=null,at=[];const yn=ee=>{if(!Ae){const Se=re.createElement("div");Se.id=String(ee.id),re.body.appendChild(Se),Ae=Se.attachShadow({mode:"open"}),Ae.appendChild(l_(ee))}return Ae},bn=async ee=>{const Se=ee.enableScreenshot&&s_();let Oe,he;try{Oe=(t?t():await e("feedbackModalIntegration",m))(),gu(Oe)}catch{throw ws&&ft.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const ve=Se?n?n():await e("feedbackScreenshotIntegration",m):void 0;ve&&(he=ve(),gu(he))}catch{ws&&ft.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const te=Oe.createDialog({options:{...ee,onFormClose:()=>{var ve;te==null||te.close(),(ve=ee.onFormClose)==null||ve.call(ee)},onFormSubmitted:()=>{var ve;te==null||te.close(),(ve=ee.onFormSubmitted)==null||ve.call(ee)}},screenshotIntegration:he,sendFeedback:r_,shadow:yn(ee)});return te},sr=(ee,Se={})=>{const Oe=rs(me,Se),he=typeof ee=="string"?re.querySelector(ee):typeof ee.addEventListener=="function"?ee:null;if(!he)throw ws&&ft.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let te=null;const ve=async()=>{te||(te=await bn({...Oe,onFormSubmitted:()=>{var ct;te==null||te.removeFromDom(),(ct=Oe.onFormSubmitted)==null||ct.call(Oe)}})),te.appendToDom(),te.open()};he.addEventListener("click",ve);const Vt=()=>{at=at.filter(ct=>ct!==Vt),te==null||te.removeFromDom(),te=null,he.removeEventListener("click",ve)};return at.push(Vt),Vt},wt=(ee={})=>{const Se=rs(me,ee),Oe=yn(Se),he=c_({triggerLabel:Se.triggerLabel,triggerAriaLabel:Se.triggerAriaLabel,shadow:Oe,styleNonce:h});return sr(he.el,{...Se,onFormOpen(){he.hide()},onFormClose(){he.show()},onFormSubmitted(){he.show()}}),he};return{name:"Feedback",setupOnce(){!Fg()||!me.autoInject||(re.readyState==="loading"?re.addEventListener("DOMContentLoaded",()=>wt().appendToDom()):wt().appendToDom())},attachTo:sr,createWidget(ee={}){const Se=wt(rs(me,ee));return Se.appendToDom(),Se},async createForm(ee={}){return bn(rs(me,ee))},remove(){var ee;Ae&&((ee=Ae.parentElement)==null||ee.remove(),Ae=null),at.forEach(Se=>Se()),at=[]}}};function $M(){const e=Mr();return e==null?void 0:e.getIntegrationByName("Feedback")}var ki,ie,Sf,Xt,yu,yf,Ho,Sr={},Pa=[],d_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fa=Array.isArray;function At(e,t){for(var n in t)e[n]=t[n];return e}function bf(e){var t=e.parentNode;t&&t.removeChild(e)}function G(e,t,n){var r,s,i,o={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?ki.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return ks(e,o,r,s,null)}function ks(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Sf,__i:-1,__u:0};return s==null&&ie.vnode!=null&&ie.vnode(i),i}function Nr(e){return e.children}function Cs(e,t){this.props=e,this.context=t}function Dn(e,t){if(t==null)return e.__?Dn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Dn(e):null}function f_(e,t,n){var r,s=e.__v,i=s.__e,o=e.__P;if(o)return(r=At({},s)).__v=s.__v+1,ie.vnode&&ie.vnode(r),Ba(o,r,s,e.__n,o.ownerSVGElement!==void 0,32&s.__u?[i]:null,t,i??Dn(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Ef(r),r}function Ef(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ef(e)}}function bu(e){(!e.__d&&(e.__d=!0)&&Xt.push(e)&&!qs.__r++||yu!==ie.debounceRendering)&&((yu=ie.debounceRendering)||yf)(qs)}function qs(){var e,t,n,r=[],s=[];for(Xt.sort(Ho);e=Xt.shift();)e.__d&&(n=Xt.length,t=f_(e,r,s)||t,n===0||Xt.length>n?(Wo(r,t,s),s.length=r.length=0,t=void 0,Xt.sort(Ho)):t&&ie.__c&&ie.__c(t,Pa));t&&Wo(r,t,s),qs.__r=0}function vf(e,t,n,r,s,i,o,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||Pa,_=t.length;for(n.__d=c,p_(n,t,g),c=n.__d,l=0;l<_;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Sr:g[p.__i]||Sr,p.__i=l,Ba(e,p,f,s,i,o,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Ua(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=Tf(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function p_(e,t,n){var r,s,i,o,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?ks(null,s,null,null,s):Fa(s)?ks(Nr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?ks(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=h_(s,n,o=r+l,d),s.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==o&&(a===o+1?l++:a>o?d>c-o?l+=a-o:l--:l=a<o&&a==o-1?a-o:0,a!==r+l&&(s.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=Dn(i)),jo(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Dn(i)),jo(i,i))}function Tf(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Tf(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function h_(e,t,n,r){var s=e.key,i=e.type,o=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&i===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&!(131072&c.__u)&&s==c.key&&i===c.type)return o;o--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&s==c.key&&i===c.type)return a;a++}}return-1}function Eu(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||d_.test(t)?n:n+"px"}function ss(e,t,n,r,s){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Eu(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Eu(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Tu:vu,i)):e.removeEventListener(t,i?Tu:vu,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function vu(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ie.event?ie.event(e):e)}}function Tu(e){if(this.l)return this.l[e.type+!0](ie.event?ie.event(e):e)}function Ba(e,t,n,r,s,i,o,a,c,u){var d,l,f,p,h,m,g,_,y,x,w,C,b,I,A,E=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=ie.__b)&&d(t);e:if(typeof E=="function")try{if(_=t.props,y=(d=E.contextType)&&r[d.__c],x=d?y?y.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in E&&E.prototype.render?t.__c=l=new E(_,x):(t.__c=l=new Cs(_,x),l.constructor=E,l.render=g_),y&&y.sub(l),l.props=_,l.state||(l.state={}),l.context=x,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),E.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=At({},l.__s)),At(l.__s,E.getDerivedStateFromProps(_,l.__s))),p=l.props,h=l.state,l.__v=t,f)E.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(E.getDerivedStateFromProps==null&&_!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(_,x),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(_,l.__s,x)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=_,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(T){T&&(T.__=t)}),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(_,l.__s,x),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=x,l.props=_,l.__P=e,l.__e=!1,C=ie.__r,b=0,"prototype"in E&&E.prototype.render){for(l.state=l.__s,l.__d=!1,C&&C(t),d=l.render(l.props,l.state,l.context),I=0;I<l._sb.length;I++)l.__h.push(l._sb[I]);l._sb=[]}else do l.__d=!1,C&&C(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++b<25);l.state=l.__s,l.getChildContext!=null&&(r=At(At({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),vf(e,Fa(A=d!=null&&d.type===Nr&&d.key==null?d.props.children:d)?A:[A],t,n,r,s,i,o,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&o.push(l),g&&(l.__E=l.__=null)}catch(T){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ie.__e(T,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=m_(n.__e,t,n,r,s,i,o,c,u);(d=ie.diffed)&&d(t)}function Wo(e,t,n){for(var r=0;r<n.length;r++)Ua(n[r],n[++r],n[++r]);ie.__c&&ie.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){ie.__e(i,s.__v)}})}function m_(e,t,n,r,s,i,o,a,c){var u,d,l,f,p,h,m,g=n.props,_=t.props,y=t.type;if(y==="svg"&&(s=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!y&&(y?p.localName===y:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(y===null)return document.createTextNode(_);e=s?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,_.is&&_),i=null,a=!1}if(y===null)g===_||a&&e.data===_||(e.data=_);else{if(i=i&&ki.call(e.childNodes),g=n.props||Sr,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in _||ss(e,u,null,p,s));for(u in _)p=_[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||ss(e,u,p,g[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),vf(e,Fa(f)?f:[f],t,n,r,s&&y!=="foreignObject",i,o,i?i[0]:n.__k&&Dn(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&bf(i[u]);a||(u="value",h!==void 0&&(h!==e[u]||y==="progress"&&!h||y==="option"&&h!==g[u])&&ss(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&ss(e,u,m,g[u],!1))}return e}function Ua(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ie.__e(r,n)}}function jo(e,t,n){var r,s;if(ie.unmount&&ie.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ua(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){ie.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&jo(r[s],t,n||typeof e.type!="function");n||e.__e==null||bf(e.__e),e.__=e.__e=e.__d=void 0}function g_(e,t,n){return this.constructor(e,n)}function __(e,t,n){var r,s,i,o;ie.__&&ie.__(e,t),s=(r=!1)?null:t.__k,i=[],o=[],Ba(t,e=t.__k=G(Nr,null,[e]),s||Sr,Sr,t.ownerSVGElement!==void 0,s?null:t.firstChild?ki.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,o),e.__d=void 0,Wo(i,e,o)}ki=Pa.slice,ie={__e:function(e,t,n,r){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),o=s.__d),o)return s.__E=s}catch(a){e=a}throw e}},Sf=0,Cs.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=At({},this.state),typeof e=="function"&&(e=e(At({},n),this.props)),e&&At(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),bu(this))},Cs.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bu(this))},Cs.prototype.render=Nr,Xt=[],yf=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ho=function(e,t){return e.__v.__b-t.__v.__b},qs.__r=0;var gt,se,ro,Iu,Pn=0,If=[],Rs=[],ue=ie,wu=ue.__b,ku=ue.__r,Cu=ue.diffed,Ru=ue.__c,xu=ue.unmount,Au=ue.__;function pn(e,t){ue.__h&&ue.__h(se,e,Pn||t),Pn=0;var n=se.__H||(se.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Rs}),n.__[e]}function Jt(e){return Pn=1,wf(Cf,e)}function wf(e,t,n){var r=pn(gt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Cf(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=se,!se.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};se.u=!0;var i=se.shouldComponentUpdate,o=se.componentWillUpdate;se.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,s(a,c,u),i=d}o&&o.call(this,a,c,u)},se.shouldComponentUpdate=s}return r.__N||r.__}function S_(e,t){var n=pn(gt++,3);!ue.__s&&Ha(n.__H,t)&&(n.__=e,n.i=t,se.__H.__h.push(n))}function kf(e,t){var n=pn(gt++,4);!ue.__s&&Ha(n.__H,t)&&(n.__=e,n.i=t,se.__h.push(n))}function y_(e){return Pn=5,$r(function(){return{current:e}},[])}function b_(e,t,n){Pn=6,kf(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function $r(e,t){var n=pn(gt++,7);return Ha(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Nn(e,t){return Pn=8,$r(function(){return e},t)}function E_(e){var t=se.context[e.__c],n=pn(gt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(se)),t.props.value):e.__}function v_(e,t){ue.useDebugValue&&ue.useDebugValue(t?t(e):e)}function T_(e){var t=pn(gt++,10),n=Jt();return t.__=e,se.componentDidCatch||(se.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function I_(){var e=pn(gt++,11);if(!e.__){for(var t=se.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function w_(){for(var e;e=If.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(xs),e.__H.__h.forEach(zo),e.__H.__h=[]}catch(t){e.__H.__h=[],ue.__e(t,e.__v)}}ue.__b=function(e){se=null,wu&&wu(e)},ue.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Au&&Au(e,t)},ue.__r=function(e){ku&&ku(e),gt=0;var t=(se=e.__c).__H;t&&(ro===se?(t.__h=[],se.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Rs,n.__N=n.i=void 0})):(t.__h.forEach(xs),t.__h.forEach(zo),t.__h=[],gt=0)),ro=se},ue.diffed=function(e){Cu&&Cu(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(If.push(t)!==1&&Iu===ue.requestAnimationFrame||((Iu=ue.requestAnimationFrame)||k_)(w_)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Rs&&(n.__=n.__V),n.i=void 0,n.__V=Rs})),ro=se=null},ue.__c=function(e,t){t.some(function(n){try{n.__h.forEach(xs),n.__h=n.__h.filter(function(r){return!r.__||zo(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],ue.__e(r,n.__v)}}),Ru&&Ru(e,t)},ue.unmount=function(e){xu&&xu(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{xs(r)}catch(s){t=s}}),n.__H=void 0,t&&ue.__e(t,n.__v))};var Mu=typeof requestAnimationFrame=="function";function k_(e){var t,n=function(){clearTimeout(r),Mu&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Mu&&(t=requestAnimationFrame(n))}function xs(e){var t=se,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),se=t}function zo(e){var t=se;e.__c=e.__(),se=t}function Ha(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Cf(e,t){return typeof t=="function"?t(e):t}const C_=Object.defineProperty({__proto__:null,useCallback:Nn,useContext:E_,useDebugValue:v_,useEffect:S_,useErrorBoundary:T_,useId:I_,useImperativeHandle:b_,useLayoutEffect:kf,useMemo:$r,useReducer:wf,useRef:y_,useState:Jt},Symbol.toStringTag,{value:"Module"}),R_="http://www.w3.org/2000/svg";function x_(){const e=r=>re.createElementNS(R_,r),t=Ne(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Ne(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function A_({options:e}){const t=$r(()=>({__html:x_().outerHTML}),[]);return G("h2",{class:"dialog__header"},G("span",{class:"dialog__title"},e.formTitle),e.showBranding?G("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function M_(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function so(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function N_({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:i,onSubmitError:o,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:_,messageLabel:y,messagePlaceholder:x,nameLabel:w,namePlaceholder:C,submitButtonLabel:b,isRequiredLabel:I}=e,[A,E]=Jt(!1),[T,B]=Jt(null),[v,M]=Jt(!1),j=u==null?void 0:u.input,[$,R]=Jt(null),O=Nn(Y=>{R(Y),M(!1)},[]),N=Nn(Y=>{const ce=M_(Y,{emailLabel:h,isEmailRequired:g,isNameRequired:_,messageLabel:y,nameLabel:w});return ce.length>0?B(`Please enter in the following required fields: ${ce.join(", ")}`):B(null),ce.length===0},[h,g,_,y,w]),W=Nn(async Y=>{E(!0);try{if(Y.preventDefault(),!(Y.target instanceof HTMLFormElement))return;const ce=new FormData(Y.target),Le=await(u&&v?u.value():void 0),_e={name:so(ce,"name"),email:so(ce,"email"),message:so(ce,"message"),attachments:Le?[Le]:void 0};if(!N(_e))return;try{const me=await s({name:_e.name,email:_e.email,message:_e.message,source:e_,tags:d},{attachments:_e.attachments});i(_e,me)}catch(me){ws&&ft.error(me),B(me),o(me)}}finally{E(!1)}},[u&&v,i,o]);return G("form",{class:"form",onSubmit:W},j&&v?G(j,{onError:O}):null,G("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:A},G("div",{class:"form__top"},T?G("div",{class:"form__error-container"},T):null,c?G("label",{for:"name",class:"form__label"},G(io,{label:w,isRequiredLabel:I,isRequired:_}),G("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:C,required:_,type:"text"})):G("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?G("label",{for:"email",class:"form__label"},G(io,{label:h,isRequiredLabel:I,isRequired:g}),G("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):G("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),G("label",{for:"message",class:"form__label"},G(io,{label:y,isRequiredLabel:I,isRequired:!0}),G("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:x,required:!0,rows:5})),j?G("label",{for:"screenshot",class:"form__label"},G("button",{class:"btn btn--default",disabled:A,type:"button",onClick:()=>{R(null),M(Y=>!Y)}},v?f:l),$?G("div",{class:"form__error-container"},$.message):null):null),G("div",{class:"btn-group"},G("button",{class:"btn btn--primary",disabled:A,type:"submit"},b),G("button",{class:"btn btn--default",disabled:A,type:"button",onClick:r},p))))}function io({label:e,isRequired:t,isRequiredLabel:n}){return G("span",{class:"form__label__text"},e,t&&G("span",{class:"form__label__text--required"},n))}const is=16,Nu=17,$_="http://www.w3.org/2000/svg";function L_(){const e=c=>qe.document.createElementNS($_,c),t=Ne(e("svg"),{width:`${is}`,height:`${Nu}`,viewBox:`0 0 ${is} ${Nu}`,fill:"inherit"}),n=Ne(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ne(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=Ne(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=Ne(e("clipPath"),{id:"clip0_57_156"}),a=Ne(e("rect"),{width:`${is}`,height:`${is}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),t}function O_({open:e,onFormSubmitted:t,...n}){const r=n.options,s=$r(()=>({__html:L_().outerHTML}),[]),[i,o]=Jt(null),a=Nn(()=>{i&&(clearTimeout(i),o(null)),t()},[i]),c=Nn((u,d)=>{n.onSubmitSuccess(u,d),o(setTimeout(()=>{t(),o(null)},n_))},[t]);return G(Nr,null,i?G("div",{class:"success__position",onClick:a},G("div",{class:"success__content"},r.successMessageText,G("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):G("dialog",{class:"dialog",onClick:r.onFormClose,open:e},G("div",{class:"dialog__position"},G("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},G(A_,{options:r}),G(N_,{...n,onSubmitSuccess:c})))))}const D_=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,P_=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,F_=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,B_=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,U_=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function H_(e){const t=re.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${D_}
${P_}
${F_}
${B_}
${U_}
`,e&&t.setAttribute("nonce",e),t}function W_(){const e=wi().getUser(),t=$g().getUser(),n=Lg().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const j_=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,i=e.useSentryUser,o=W_(),a=re.createElement("div"),c=H_(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),re.body.style.overflow=u},open(){var p,h;f(!0),(p=e.onFormOpen)==null||p.call(e),(h=Mr())==null||h.emit("openFeedbackWidget"),u=re.body.style.overflow,re.body.style.overflow="hidden"},close(){f(!1),re.body.style.overflow=u}},l=t==null?void 0:t.createInput({h:G,hooks:C_,dialog:d,options:e}),f=p=>{__(G(O_,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&(o==null?void 0:o[i.name])||"",defaultEmail:i&&(o==null?void 0:o[i.email])||"",onFormClose:()=>{var h;f(!1),(h=e.onFormClose)==null||h.call(e)},onSubmit:n,onSubmitSuccess:(h,m)=>{var g;f(!1),(g=e.onSubmitSuccess)==null||g.call(e,h,m)},onSubmitError:h=>{var m;(m=e.onSubmitError)==null||m.call(e,h)},onFormSubmitted:()=>{var h;(h=e.onFormSubmitted)==null||h.call(e)},open:p}),a)};return d}});function z_({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function q_(e){const t=re.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function G_({h:e}){return function({action:n,setAction:r}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},"Highlight"),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},"Hide")))}}function V_({hooks:e}){function t(){const[n,r]=e.useState(qe.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(qe.devicePixelRatio)},i=matchMedia(`(resolution: ${qe.devicePixelRatio}dppx)`);return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:i,onError:o}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await or.mediaDevices.getDisplayMedia({video:{width:qe.innerWidth*a,height:qe.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=re.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(o)},[])}}function Y_(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Ct(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function oo(e,t){Ct(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function ao(e,t,n){Ct(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(i=>{Y_(i,s,t)})})}function X_({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const i=V_({hooks:t}),o=G_({h:e}),a=z_({h:e}),c={__html:q_(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),_=t.useRef(null),y=t.useRef(null),x=t.useRef(null),[w,C]=t.useState(1),b=t.useMemo(()=>{const v=re.getElementById(s.id);if(!v)return"white";const M=getComputedStyle(v);return M.getPropertyValue("--button-primary-background")||M.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const v=()=>{const M=g.current;M&&(Ct(l.canvas,{alpha:!1},j=>{const $=Math.min(M.clientWidth/j.width,M.clientHeight/j.height);C($)}),(M.clientHeight===0||M.clientWidth===0)&&setTimeout(v,0))};return v(),qe.addEventListener("resize",v),()=>{qe.removeEventListener("resize",v)}},[l]);const I=t.useCallback((v,M)=>{Ct(v,{alpha:!0},(j,$)=>{$.scale(M,M),j.width=l.canvas.width,j.height=l.canvas.height})},[l]);t.useEffect(()=>{I(_.current,l.dpi),oo(_.current,l.canvas)},[l]),t.useEffect(()=>{I(y.current,l.dpi),Ct(y.current,{alpha:!0},(v,M)=>{M.clearRect(0,0,v.width,v.height)}),ao(y.current,b,h)},[h,b]),t.useEffect(()=>{I(n,l.dpi),oo(n,l.canvas),Ct(re.createElement("canvas"),{alpha:!0},(v,M)=>{M.scale(l.dpi,l.dpi),v.width=l.canvas.width,v.height=l.canvas.height,ao(v,b,h),oo(n,v)})},[h,l,b]);const A=v=>{if(!f||!x.current)return;const M=x.current.getBoundingClientRect(),j={type:f,x:v.offsetX/w,y:v.offsetY/w},$=(N,W)=>{const Y=(W.clientX-M.x)/w,ce=(W.clientY-M.y)/w;return{type:N.type,x:Math.min(N.x,Y),y:Math.min(N.y,ce),w:Math.abs(Y-N.x),h:Math.abs(ce-N.y)}},R=N=>{Ct(y.current,{alpha:!0},(W,Y)=>{Y.clearRect(0,0,W.width,W.height)}),ao(y.current,b,[...h,$(j,N)])},O=N=>{const W=$(j,N);W.w*w>=1&&W.h*w>=1&&m(Y=>[...Y,W]),re.removeEventListener("mousemove",R),re.removeEventListener("mouseup",O)};re.addEventListener("mousemove",R),re.addEventListener("mouseup",O)},E=t.useCallback(v=>M=>{M.preventDefault(),M.stopPropagation(),m(j=>{const $=[...j];return $.splice(v,1),$})},[]),T={width:`${l.canvas.width*w}px`,height:`${l.canvas.height*w}px`},B=v=>{v.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:_,id:"background",style:T}),e("canvas",{ref:y,id:"foreground",style:T}),e("div",{ref:x,onMouseDown:A,style:T},h.map((v,M)=>e("div",{key:M,class:"editor__rect",style:{top:`${v.y*w}px`,left:`${v.x*w}px`,width:`${v.w*w}px`,height:`${v.h*w}px`}},e("button",{"aria-label":"Remove",onClick:E(M),onMouseDown:B,onMouseUp:B,type:"button"},e(a,null))))))),e(o,{action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{Ct(re.createElement("canvas"),{alpha:!1},(_,y)=>{y.scale(g,g),_.width=m.videoWidth,_.height=m.videoHeight,y.drawImage(m,0,0,_.width,_.height),h({canvas:_,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const K_=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=re.createElement("canvas");return{input:X_({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const i=await new Promise(o=>{s.toBlob(o,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),k=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,z=globalThis,Mt="10.5.0";function It(){return Lr(z),z}function Lr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Mt,t[Mt]=t[Mt]||{}}function Or(e,t,n=z){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Mt]=r[Mt]||{};return s[e]||(s[e]=t())}const Wa=["debug","info","warn","error","log","assert","trace"],J_="Sentry Logger ",Gs={};function hn(e){if(!("console"in z))return e();const t=z.console,n={},r=Object.keys(Gs);r.forEach(s=>{const i=Gs[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Z_(){za().enabled=!0}function Q_(){za().enabled=!1}function Rf(){return za().enabled}function eS(...e){ja("log",...e)}function tS(...e){ja("warn",...e)}function nS(...e){ja("error",...e)}function ja(e,...t){k&&Rf()&&hn(()=>{z.console[e](`${J_}[${e}]:`,...t)})}function za(){return k?Or("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const S={enable:Z_,disable:Q_,isEnabled:Rf,log:eS,warn:tS,error:nS},xf=50,tt="?",$u=/\(error: (.*)\)/,Lu=/captureMessage|captureException/;function Af(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const u=$u.test(c)?c.replace($u,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){i.push(l);break}}if(i.length>=xf+s)break}}return sS(i.slice(s))}}function rS(e){return Array.isArray(e)?Af(...e):e}function sS(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(os(t).function||"")&&t.pop(),t.reverse(),Lu.test(os(t).function||"")&&(t.pop(),Lu.test(os(t).function||"")&&t.pop()),t.slice(0,xf).map(n=>({...n,filename:n.filename||os(t).filename,function:n.function||tt}))}function os(e){return e[e.length-1]||{}}const co="<anonymous>";function Ft(e){try{return!e||typeof e!="function"?co:e.name||co}catch{return co}}function qo(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const As={},Ou={};function Dr(e,t){As[e]=As[e]||[],As[e].push(t)}function Pr(e,t){if(!Ou[e]){Ou[e]=!0;try{t()}catch(n){k&&S.error(`Error while instrumenting ${e}`,n)}}}function tn(e,t){const n=e&&As[e];if(n)for(const r of n)try{r(t)}catch(s){k&&S.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ft(r)}
Error:`,s)}}let uo=null;function Mf(e){const t="error";Dr(t,e),Pr(t,iS)}function iS(){uo=z.onerror,z.onerror=function(e,t,n,r,s){return tn("error",{column:r,error:s,line:n,msg:e,url:t}),uo?uo.apply(this,arguments):!1},z.onerror.__SENTRY_INSTRUMENTED__=!0}let lo=null;function Nf(e){const t="unhandledrejection";Dr(t,e),Pr(t,oS)}function oS(){lo=z.onunhandledrejection,z.onunhandledrejection=function(e){return tn("unhandledrejection",e),lo?lo.apply(this,arguments):!0},z.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const $f=Object.prototype.toString;function Nt(e){switch($f.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return St(e,Error)}}function Qn(e,t){return $f.call(e)===`[object ${t}]`}function Lf(e){return Qn(e,"ErrorEvent")}function Du(e){return Qn(e,"DOMError")}function aS(e){return Qn(e,"DOMException")}function on(e){return Qn(e,"String")}function Ci(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Ri(e){return e===null||Ci(e)||typeof e!="object"&&typeof e!="function"}function _t(e){return Qn(e,"Object")}function xi(e){return typeof Event<"u"&&St(e,Event)}function cS(e){return typeof Element<"u"&&St(e,Element)}function uS(e){return Qn(e,"RegExp")}function Fr(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function lS(e){return _t(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function St(e,t){try{return e instanceof t}catch{return!1}}function Of(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Df(e){return typeof Request<"u"&&St(e,Request)}const qa=z,dS=80;function Pf(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||dS;for(;n&&i++<r&&(u=fS(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function fS(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(qa.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&on(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Br(){try{return qa.document.location.href}catch{return""}}function pS(e){if(!qa.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Fn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function fo(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Vs(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Of(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Ms(e,t,n=!1){return on(e)?uS(t)?t.test(e):on(t)?n?e===t:e.includes(t):!1:!1}function pt(e,t=[],n=!1){return t.some(r=>Ms(e,r,n))}function Ze(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Ff(s,r);try{e[t]=s}catch{k&&S.log(`Failed to replace method "${t}" in object`,e)}}function Be(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{k&&S.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Ff(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Be(e,"__sentry_original__",t)}catch{}}function Ga(e){return e.__sentry_original__}function Bf(e){if(Nt(e))return{message:e.message,name:e.name,stack:e.stack,...Fu(e)};if(xi(e)){const t={type:e.type,target:Pu(e.target),currentTarget:Pu(e.currentTarget),...Fu(e)};return typeof CustomEvent<"u"&&St(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Pu(e){try{return cS(e)?Pf(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Fu(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function hS(e,t=40){const n=Object.keys(Bf(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Fn(r,t);for(let s=n.length;s>0;s--){const i=n.slice(0,s).join(", ");if(!(i.length>t))return s===n.length?i:Fn(i,t)}return""}function mS(){const e=z;return e.crypto||e.msCrypto}function $e(e=mS()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function Uf(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Kt(e){const{message:t,event_id:n}=e;if(t)return t;const r=Uf(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Go(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function yt(e,t){const n=Uf(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s==null?void 0:s.data,...t.data};n.mechanism.data=i}}function gS(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(o=>fo(o,0));const i=Math.min(r-1,s);t.context_line=fo(e[i],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(o=>fo(o,0))}function Bu(e){if(_S(e))return!0;try{Be(e,"__sentry_captured__",!0)}catch{}return!1}function _S(e){try{return e.__sentry_captured__}catch{}}const Hf=1e3;function mn(){return Date.now()/Hf}function SS(){const{performance:e}=z;if(!(e!=null&&e.now)||!e.timeOrigin)return mn;const t=e.timeOrigin;return()=>(t+e.now())/Hf}let Uu;function be(){return(Uu??(Uu=SS()))()}let po;function yS(){var d;const{performance:e}=z;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=(d=e.timing)==null?void 0:d.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function Ai(){return po||(po=yS()),po[0]}function bS(e){const t=be(),n={sid:$e(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>vS(n)};return e&&Bn(n,e),n}function Bn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||be(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:$e()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ES(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Bn(e,n)}function vS(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Ur(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Ur(r[s],t[s],n-1));return r}function bt(){return $e()}function Hr(){return $e().substring(16)}const Vo="_sentrySpan";function an(e,t){t?Be(e,Vo,t):delete e[Vo]}function yr(e){return e[Vo]}const TS=100;let cn=class Yo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:bt(),sampleRand:Math.random()}}clone(){const t=new Yo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,an(t,yr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Bn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Yo?n.getScopeData():_t(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,an(this,void 0),this._attachments=[],this.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const r=typeof n=="number"?n:TS;if(r<=0)return this;const s={timestamp:mn(),...t,message:t.message?Fn(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:yr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Ur(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||$e();if(!this._client)return k&&S.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=(r==null?void 0:r.event_id)||$e();if(!this._client)return k&&S.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||$e();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(k&&S.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function IS(){return Or("defaultCurrentScope",()=>new cn)}function wS(){return Or("defaultIsolationScope",()=>new cn)}let kS=class{constructor(t,n){let r;t?r=t:r=new cn;let s;n?s=n:s=new cn,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Fr(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Un(){const e=It(),t=Lr(e);return t.stack=t.stack||new kS(IS(),wS())}function CS(e){return Un().withScope(e)}function RS(e,t){const n=Un();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Hu(e){return Un().withScope(()=>e(Un().getIsolationScope()))}function xS(){return{withIsolationScope:Hu,withScope:CS,withSetScope:RS,withSetIsolationScope:(e,t)=>Hu(t),getCurrentScope:()=>Un().getScope(),getIsolationScope:()=>Un().getIsolationScope()}}function zt(e){const t=Lr(e);return t.acs?t.acs:xS()}function Q(){const e=It();return zt(e).getCurrentScope()}function Te(){const e=It();return zt(e).getIsolationScope()}function Wf(){return Or("globalScope",()=>new cn)}function Ye(...e){const t=It(),n=zt(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function OM(...e){const t=It(),n=zt(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function F(){return Q().getClient()}function jf(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,i={trace_id:n,span_id:s||Hr()};return r&&(i.parent_span_id=r),i}const Qe="sentry.source",Va="sentry.sample_rate",zf="sentry.previous_trace_sample_rate",Bt="sentry.op",nt="sentry.origin",Ys="sentry.idle_span_finish_reason",qf="sentry.measurement_unit",Gf="sentry.measurement_value",Xo="sentry.custom_span_name",Ya="sentry.profile_id",Xa="sentry.exclusive_time",AS="http.request.method",MS="url.full",NS="sentry.link.type",$S=0,Ka=1,fe=2;function LS(e){if(e<400&&e>=100)return{code:Ka};if(e>=400&&e<500)switch(e){case 401:return{code:fe,message:"unauthenticated"};case 403:return{code:fe,message:"permission_denied"};case 404:return{code:fe,message:"not_found"};case 409:return{code:fe,message:"already_exists"};case 413:return{code:fe,message:"failed_precondition"};case 429:return{code:fe,message:"resource_exhausted"};case 499:return{code:fe,message:"cancelled"};default:return{code:fe,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:fe,message:"unimplemented"};case 503:return{code:fe,message:"unavailable"};case 504:return{code:fe,message:"deadline_exceeded"};default:return{code:fe,message:"internal_error"}}return{code:fe,message:"unknown_error"}}function Xs(e,t){e.setAttribute("http.response.status_code",t);const n=LS(t);n.message!=="unknown_error"&&e.setStatus(n)}const Vf="_sentryScope",Yf="_sentryIsolationScope";function OS(e,t,n){e&&(Be(e,Yf,n),Be(e,Vf,t))}function Ks(e){return{scope:e[Vf],isolationScope:e[Yf]}}const Ja="sentry-",DS=/^sentry-/,PS=8192;function Za(e){const t=FS(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(DS)){const o=s.slice(Ja.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Xf(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${Ja}${r}`]=s),n),{});return BS(t)}function FS(e){if(!(!e||!on(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Wu(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):Wu(e)}function Wu(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function BS(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${t},${i}`;return o.length>PS?(k&&S.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const US=/^o(\d+)\./,HS=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function WS(e){return e==="http"||e==="https"}function gn(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Kf(e){const t=HS.exec(e);if(!t){hn(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Jf({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function Jf(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function jS(e){if(!k)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(S.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?WS(r)?t&&isNaN(parseInt(t,10))?(S.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(S.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(S.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function zS(e){const t=e.match(US);return t==null?void 0:t[1]}function Zf(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=zS(n)),r}function Qf(e){const t=typeof e=="string"?Kf(e):Jf(e);if(!(!t||!jS(t)))return t}function br(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const ep=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function qS(e){if(!e)return;const t=e.match(ep);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function tp(e,t){const n=qS(e),r=Za(t);if(!(n!=null&&n.traceId))return{traceId:bt(),sampleRand:Math.random()};const s=GS(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function np(e=bt(),t=Hr(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function GS(e,t){const n=br(t==null?void 0:t.sample_rand);if(n!==void 0)return n;const r=br(t==null?void 0:t.sample_rate);return r&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function VS(e,t){const n=Zf(e);return t&&n&&t!==n?(S.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(S.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const rp=0,Qa=1;let ju=!1;function YS(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=J(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function sp(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:J(e).parent_span_id,i=Ks(e).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||Hr():t;return{parent_span_id:s,span_id:o,trace_id:n}}function XS(e){const{traceId:t,spanId:n}=e.spanContext(),r=_n(e);return np(t,n,r)}function ip(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Qa,attributes:i,...s}))}function nn(e){return typeof e=="number"?zu(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?zu(e.getTime()):be()}function zu(e){return e>9999999999?e/1e3:e}function J(e){var r;if(JS(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(KS(e)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:n,data:s,description:o,parent_span_id:d,start_timestamp:nn(i),timestamp:nn(a)||void 0,status:op(c),op:s[Bt],origin:s[nt],links:ip(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function KS(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function JS(e){return typeof e.getSpanJSON=="function"}function _n(e){const{traceFlags:t}=e.spanContext();return t===Qa}function op(e){if(!(!e||e.code===$S))return e.code===Ka?"ok":e.message||"unknown_error"}const rn="_sentryChildSpans",Ko="_sentryRootSpan";function ap(e,t){const n=e[Ko]||e;Be(t,Ko,n),e[rn]?e[rn].add(t):Be(e,rn,new Set([t]))}function ZS(e,t){e[rn]&&e[rn].delete(t)}function Ns(e){const t=new Set;function n(r){if(!t.has(r)&&_n(r)){t.add(r);const s=r[rn]?Array.from(r[rn]):[];for(const i of s)n(i)}}return n(e),Array.from(t)}function Re(e){return e[Ko]||e}function st(){const e=It(),t=zt(e);return t.getActiveSpan?t.getActiveSpan():yr(Q())}function Jo(){ju||(hn(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),ju=!0)}function DM(e,t){e.updateName(t),e.setAttributes({[Qe]:"custom",[Xo]:t})}let qu=!1;function QS(){if(qu)return;function e(){const t=st(),n=t&&Re(t);if(n){const r="internal_error";k&&S.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:fe,message:r})}}e.tag="sentry_tracingErrorCallback",qu=!0,Mf(e),Nf(e)}function Ut(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=F())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Mi="production",cp="_frozenDsc";function $s(e,t){Be(e,cp,t)}function up(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||Mi,release:n.release,public_key:r,trace_id:e,org_id:Zf(t)};return t.emit("createDsc",s),s}function ec(e,t){const n=t.getPropagationContext();return n.dsc||up(n.traceId,e)}function rt(e){var h;const t=F();if(!t)return{};const n=Re(e),r=J(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[Va]??s[zf];function a(m){return(typeof o=="number"||typeof o=="string")&&(m.sample_rate=`${o}`),m}const c=n[cp];if(c)return a(c);const u=i==null?void 0:i.get("sentry.dsc"),d=u&&Za(u);if(d)return a(d);const l=up(e.spanContext().traceId,t),f=s[Qe],p=r.description;return f!=="url"&&p&&(l.transaction=p),Ut()&&(l.sampled=String(_n(n)),l.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((h=Ks(n).scope)==null?void 0:h.getPropagationContext().sampleRand.toString())),a(l),t.emit("createDsc",l,n),l}function PM(e){const t=rt(e);return Xf(t)}let Et=class{constructor(t={}){this._traceId=t.traceId||bt(),this._spanId=t.spanId||Hr()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:rp}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function je(e,t=100,n=1/0){try{return Zo("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function lp(e,t=3,n=100*1024){const r=je(e,t);return ry(r)>n?lp(e,t-1,n):r}function Zo(e,t,n=1/0,r=1/0,s=sy()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=ey(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Zo("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=Bf(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=Zo(p,h,c-1,r,s),l++}return o(t),d}function ey(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Of(t))return"[VueViewModel]";if(lS(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Ft(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=ty(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ty(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function ny(e){return~-encodeURI(e).split(/%..|./).length}function ry(e){return ny(JSON.stringify(e))}function sy(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function qt(e,t=[]){return[e,t]}function iy(e,t){const[n,r]=e;return[n,[...r,t]]}function un(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Gu(e,t){return un(e,(n,r)=>t.includes(r))}function Js(e){const t=Lr(z);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function oy(e){const t=Lr(z);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Zs(e){const[t,n]=e;let r=JSON.stringify(t);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[Js(r),i]:r.push(typeof i=="string"?Js(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(je(a))}s(c)}}return typeof r=="string"?r:ay(r)}function ay(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function cy(e){let t=typeof e=="string"?Js(e):e;function n(o){const a=t.subarray(0,o);return t=t.subarray(o+1),a}function r(){let o=t.indexOf(10);return o<0&&(o=t.length),JSON.parse(oy(n(o)))}const s=r(),i=[];for(;t.length;){const o=r(),a=typeof o.length=="number"?o.length:void 0;i.push([o,a?n(a):r()])}return[s,i]}function uy(e){return[{type:"span"},e]}function ly(e){const t=typeof e.data=="string"?Js(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const dy={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Vu(e){return dy[e]}function dp(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function fy(e,t,n,r){var i;const s=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:gn(r)},...s&&{trace:s}}}function Qo(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(hy(n)){if(Ms(e.description,n))return!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Ms(e.description,n.name):!0,s=n.op?e.op&&Ms(e.op,n.op):!0;if(r&&s)return!0}return!1}function py(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function hy(e){return typeof e=="string"||e instanceof RegExp}function my(e,t){var r,s,i,o;if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...((r=e.sdk)==null?void 0:r.integrations)||[],...t.integrations||[]],packages:[...((s=e.sdk)==null?void 0:s.packages)||[],...t.packages||[]],settings:(i=e.sdk)!=null&&i.settings||t.settings?{...(o=e.sdk)==null?void 0:o.settings,...t.settings}:void 0},e}function gy(e,t,n,r){const s=dp(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:gn(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return qt(i,[o])}function _y(e,t,n,r){const s=dp(n),i=e.type&&e.type!=="replay_event"?e.type:"event";my(e,n==null?void 0:n.sdk);const o=fy(e,s,r,t);return delete e.sdkProcessingMetadata,qt(o,[[{type:i},e]])}function Sy(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=rt(e[0]),s=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:gn(s)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},u=c!=null&&c.length?e.filter(p=>!Qo(J(p),c)):e,d=e.length-u.length;d&&(t==null||t.recordDroppedEvent("before_send","span",d));const l=a?p=>{const h=J(p),m=a(h);return m||(Jo(),h)}:J,f=[];for(const p of u){const h=l(p);h&&f.push(uy(h))}return qt(o,f)}function yy(e){if(!k)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=J(e),{spanId:s}=e.spanContext(),i=_n(e),o=Re(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=J(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}S.log(`${c}
  ${u.join(`
  `)}`)}function by(e){if(!k)return;const{description:t="< unknown name >",op:n="< unknown op >"}=J(e),{spanId:r}=e.spanContext(),i=Re(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;S.log(o)}function BM(e,t,n,r=st()){const s=r&&Re(r);s&&(k&&S.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Gf]:t,[qf]:n}))}function Yu(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[qf],i=r[Gf];typeof s=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:s})}),t}const Xu=1e3;let Ni=class{constructor(t={}){this._traceId=t.traceId||bt(),this._spanId=t.spanId||Hr(),this._startTime=t.startTimestamp||be(),this._links=t.links,this._attributes={},this.setAttributes({[nt]:"manual",[Bt]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Qa:rp}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=nn(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Qe,"custom"),this}end(t){this._endTime||(this._endTime=nn(t),by(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Bt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:op(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[nt],profile_id:this._attributes[Ya],exclusive_time:this._attributes[Xa],measurements:Yu(this._events),is_segment:this._isStandaloneSpan&&Re(this)===this||void 0,segment_id:this._isStandaloneSpan?Re(this).spanContext().spanId:void 0,links:ip(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){k&&S.log("[Tracing] Adding an event to span:",t);const s=Ku(n)?n:r||be(),i=Ku(n)?{}:n||{},o={name:t,time:nn(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=F();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Re(this)))return;if(this._isStandaloneSpan){this._sampled?vy(Sy([this],t)):(k&&S.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Ks(this).scope||Q()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Ju(J(this)))return;this._name||(k&&S.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Ks(this),r=(d=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const i=Ns(this).filter(l=>l!==this&&!Ey(l)).map(l=>J(l)).filter(Ju),o=this._attributes[Qe];delete this._attributes[Xo],i.forEach(l=>{delete l.data[Xo]});const a={contexts:{trace:YS(this)},spans:i.length>Xu?i.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,Xu):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:rt(this)},request:r,...o&&{transaction_info:{source:o}}},c=Yu(this._events);return c&&Object.keys(c).length&&(k&&S.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Ku(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ju(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Ey(e){return e instanceof Ni&&e.isStandaloneSpan()}function vy(e){const t=F();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function fp(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return Ty(r,t,n)}function Ty(e,t,n){return Fr(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function Iy(e,t,n){if(!Ut(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const i=br(s);if(i===void 0)return k&&S.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return k&&S.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||k&&S.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const Qs="__SENTRY_SUPPRESS_TRACING__";function pp(e,t){const n=Wr();if(n.startSpan)return n.startSpan(e,t);const r=rc(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o==null?void 0:o.clone();return Ye(a,()=>hp(i)(()=>{const u=Q(),d=sc(u,i),f=e.onlyIfParent&&!d?new Et:nc({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return an(u,f),fp(()=>t(f),()=>{const{status:p}=J(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:fe,message:"internal_error"})},()=>{f.end()})}))}function HM(e,t){const n=Wr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=rc(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o==null?void 0:o.clone();return Ye(a,()=>hp(i)(()=>{const u=Q(),d=sc(u,i),f=e.onlyIfParent&&!d?new Et:nc({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return an(u,f),fp(()=>t(f,()=>f.end()),()=>{const{status:p}=J(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:fe,message:"internal_error"})})}))}function $i(e){const t=Wr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=rc(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?o=>Ye(e.scope,o):s!==void 0?o=>tc(s,o):o=>o())(()=>{const o=Q(),a=sc(o,s);return e.onlyIfParent&&!a?new Et:nc({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}const WM=(e,t)=>{const n=It(),r=zt(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:i}=e,o=F(),a=Za(i);return o&&!VS(o,a==null?void 0:a.org_id)?ky(t):Ye(c=>{const u=tp(s,i);return c.setPropagationContext(u),t()})};function tc(e,t){const n=Wr();return n.withActiveSpan?n.withActiveSpan(e,t):Ye(r=>(an(r,e||void 0),t(r)))}function wy(e){const t=Wr();return t.suppressTracing?t.suppressTracing(e):Ye(n=>{n.setSDKProcessingMetadata({[Qs]:!0});const r=e();return n.setSDKProcessingMetadata({[Qs]:void 0}),r})}function ky(e){return Ye(t=>(t.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),k&&S.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),tc(null,e)))}function nc({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Ut()){const o=new Et;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...rt(o)};$s(o,a)}return o}const s=Te();let i;if(e&&!n)i=Cy(e,r,t),ap(e,i);else if(e){const o=rt(e),{traceId:a,spanId:c}=e.spanContext(),u=_n(e);i=Zu({traceId:a,parentSpanId:c,...t},r,u),$s(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=Zu({traceId:o,parentSpanId:c,...t},r,u),a&&$s(i,a)}return yy(i),OS(i,r,s),i}function rc(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=nn(e.startTime),delete r.startTime,r}return n}function Wr(){const e=It();return zt(e)}function Zu(e,t,n){var h;const r=F(),s=(r==null?void 0:r.getOptions())||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r==null||r.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Qs]?[!1]:Iy(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:br((h=u.dsc)==null?void 0:h.sample_rate)},u.sampleRand),p=new Ni({...e,attributes:{[Qe]:"custom",[Va]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(k&&S.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function Cy(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Qs]?!1:_n(e),o=i?new Ni({...n,parentSpanId:r,traceId:s,sampled:i}):new Et({traceId:s});ap(e,o);const a=F();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function sc(e,t){if(t)return t;if(t===null)return;const n=yr(e);if(!n)return;const r=F();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Re(n):n}function hp(e){return e!==void 0?t=>tc(e,t):t=>t()}const Ls={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Ry="heartbeatFailed",xy="idleTimeout",Ay="finalTimeout",My="externalFinish";function mp(e,t={}){const n=new Map;let r=!1,s,i=My,o=!t.disableAutoFinish;const a=[],{idleTimeout:c=Ls.idleTimeout,finalTimeout:u=Ls.finalTimeout,childSpanTimeout:d=Ls.childSpanTimeout,beforeSpanEnd:l}=t,f=F();if(!f||!Ut()){const b=new Et,I={sample_rate:"0",sampled:"false",...rt(b)};return $s(b,I),b}const p=Q(),h=st(),m=Ny(e);m.end=new Proxy(m.end,{apply(b,I,A){if(l&&l(m),I instanceof Et)return;const[E,...T]=A,B=E||be(),v=nn(B),M=Ns(m).filter(N=>N!==m);if(!M.length)return C(v),Reflect.apply(b,I,[v,...T]);const j=M.map(N=>J(N).timestamp).filter(N=>!!N),$=j.length?Math.max(...j):void 0,R=J(m).start_timestamp,O=Math.min(R?R+u/1e3:1/0,Math.max(R||-1/0,Math.min(v,$||1/0)));return C(O),Reflect.apply(b,I,[O,...T])}});function g(){s&&(clearTimeout(s),s=void 0)}function _(b){g(),s=setTimeout(()=>{!r&&n.size===0&&o&&(i=xy,m.end(b))},c)}function y(b){s=setTimeout(()=>{!r&&o&&(i=Ry,m.end(b))},d)}function x(b){g(),n.set(b,!0);const I=be();y(I+d/1e3)}function w(b){if(n.has(b)&&n.delete(b),n.size===0){const I=be();_(I+c/1e3)}}function C(b){r=!0,n.clear(),a.forEach(v=>v()),an(p,h);const I=J(m),{start_timestamp:A}=I;if(!A)return;I.data[Ys]||m.setAttribute(Ys,i),S.log(`[Tracing] Idle span "${I.op}" finished`);const T=Ns(m).filter(v=>v!==m);let B=0;T.forEach(v=>{v.isRecording()&&(v.setStatus({code:fe,message:"cancelled"}),v.end(b),k&&S.log("[Tracing] Cancelling span since span ended early",JSON.stringify(v,void 0,2)));const M=J(v),{timestamp:j=0,start_timestamp:$=0}=M,R=$<=b,O=(u+c)/1e3,N=j-$<=O;if(k){const W=JSON.stringify(v,void 0,2);R?N||S.log("[Tracing] Discarding span since it finished after idle span final timeout",W):S.log("[Tracing] Discarding span since it happened after idle span was finished",W)}(!N||!R)&&(ZS(m,v),B++)}),B>0&&m.setAttribute("sentry.idle_span_discarded_spans",B)}return a.push(f.on("spanStart",b=>{if(r||b===m||J(b).timestamp||b instanceof Ni&&b.isStandaloneSpan())return;Ns(m).includes(b)&&x(b.spanContext().spanId)})),a.push(f.on("spanEnd",b=>{r||w(b.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",b=>{b===m&&(o=!0,_(),n.size&&y())})),t.disableAutoFinish||_(),setTimeout(()=>{r||(m.setStatus({code:fe,message:"deadline_exceeded"}),i=Ay,m.end())},u),m}function Ny(e){const t=$i(e);return an(Q(),t),k&&S.log("[Tracing] Started span is an idle span"),t}const ho=0,Qu=1,el=2;function ln(e){return new jr(t=>{t(e)})}function ei(e){return new jr((t,n)=>{n(e)})}let jr=class ea{constructor(t){this._state=ho,this._handlers=[],this._runExecutor(t)}then(t,n){return new ea((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ea((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ho)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Qu&&n[1](this._value),this._state===el&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===ho){if(Fr(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(Qu,i)},s=i=>{n(el,i)};try{t(r,s)}catch(i){s(i)}}};function ta(e,t,n,r=0){return new jr((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);k&&o.id&&a===null&&S.log(`Event processor "${o.id}" dropped event`),Fr(a)?a.then(c=>ta(e,c,n,r+1).then(s)).then(null,i):ta(e,a,n,r+1).then(s).then(null,i)}})}function $y(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;Ly(e,t),r&&Py(e,r),Fy(e,n),Oy(e,s),Dy(e,i)}function ti(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:h}=t;as(e,"extra",n),as(e,"tags",r),as(e,"user",s),as(e,"contexts",i),e.sdkProcessingMetadata=Ur(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function as(e,t,n){e[t]=Ur(e[t],n,1)}function Ly(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function Oy(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Dy(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Py(e,t){e.contexts={trace:sp(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:rt(t),...e.sdkProcessingMetadata};const n=Re(t),r=J(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Fy(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let cs,tl,us;function gp(e){const t=z._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return us&&n.length===tl||(tl=n.length,us=n.reduce((r,s)=>{cs||(cs={});const i=cs[s];if(i)r[i[0]]=i[1];else{const o=e(s);for(let a=o.length-1;a>=0;a--){const c=o[a],u=c==null?void 0:c.filename,d=t[s];if(u&&d){r[u]=d,cs[s]=[u,d];break}}}return r},{})),us}function By(e,t){const n=gp(e);if(!n)return[];const r=[];for(const s of t)s&&n[s]&&r.push({type:"sourcemap",code_file:s,debug_id:n[s]});return r}function Uy(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||$e(),timestamp:t.timestamp||mn()},u=n.integrations||e.integrations.map(g=>g.name);Hy(c,e),zy(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&Wy(c,e.stackParser);const d=Gy(r,n.captureContext);n.mechanism&&yt(c,n.mechanism);const l=s?s.getEventProcessors():[],f=Wf().getScopeData();if(i){const g=i.getScopeData();ti(f,g)}if(d){const g=d.getScopeData();ti(f,g)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),$y(c,f);const h=[...l,...f.eventProcessors];return ta(h,c,n).then(g=>(g&&jy(g),typeof o=="number"&&o>0?qy(g,o,a):g))}function Hy(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||Mi,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;o!=null&&o.url&&(o.url=Fn(o.url,i))}function Wy(e,t){var r,s;const n=gp(t);(s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function jy(e){var r,s;const t={};if((s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?t[c.abs_path]=c.debug_id:c.filename&&(t[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([i,o])=>{n.push({type:"sourcemap",code_file:i,debug_id:o})})}function zy(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function qy(e,t,n){var s,i;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:je(o.data,t,n)}}))},...e.user&&{user:je(e.user,t,n)},...e.contexts&&{contexts:je(e.contexts,t,n)},...e.extra&&{extra:je(e.extra,t,n)}};return(s=e.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=je(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:je(o.data,t,n)}}))),(i=e.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=je(e.contexts.flags,3,n)),r}function Gy(e,t){if(!t)return e;const n=e?e.clone():new cn;return n.update(t),n}function Vy(e){if(e)return Yy(e)?{captureContext:e}:Ky(e)?{captureContext:e}:e}function Yy(e){return e instanceof cn||typeof e=="function"}const Xy=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Ky(e){return Object.keys(e).some(t=>Xy.includes(t))}function Er(e,t){return Q().captureException(e,Vy(t))}function na(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return Q().captureMessage(e,n,r)}function Li(e,t){return Q().captureEvent(e,t)}function jM(e,t){Te().setContext(e,t)}function zM(e){Te().setExtras(e)}function qM(e,t){Te().setExtra(e,t)}function GM(e){Te().setTags(e)}function VM(e,t){Te().setTag(e,t)}function YM(e){Te().setUser(e)}function Jy(){return Te().lastEventId()}async function XM(e){const t=F();return t?t.flush(e):(k&&S.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function KM(e){const t=F();return t?t.close(e):(k&&S.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function JM(){return!!F()}function Zy(){const e=F();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function ZM(e){Te().addEventProcessor(e)}function nl(e){const t=Te(),n=Q(),{userAgent:r}=z.navigator||{},s=bS({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return(i==null?void 0:i.status)==="ok"&&Bn(i,{status:"exited"}),_p(),t.setSession(s),s}function _p(){const e=Te(),n=Q().getSession()||e.getSession();n&&ES(n),Sp(),e.setSession()}function Sp(){const e=Te(),t=F(),n=e.getSession();n&&t&&t.captureSession(n)}function rl(e=!1){if(e){_p();return}Sp()}const Qy="7";function yp(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function eb(e){return`${yp(e)}${e.projectId}/envelope/`}function tb(e,t){const n={sentry_version:Qy};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function bp(e,t,n){return t||`${eb(e)}?${tb(e,n)}`}function nb(e,t){const n=Qf(e);if(!n)return"";const r=`${yp(n)}embed/error-page/`;let s=`dsn=${gn(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${s}`}const sl=[];function rb(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function sb(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return rb(r)}function ib(e,t){const n={};return t.forEach(r=>{r&&Ep(e,r,n)}),n}function il(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function Ep(e,t,n){if(n[t.name]){k&&S.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,sl.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),sl.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}k&&S.log(`Integration installed: ${t.name}`)}function QM(e){const t=F();if(!t){k&&S.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function ob(e,t,n){const r=[{type:"client_report"},{timestamp:mn(),discarded_events:e}];return qt(t?{dsn:t}:{},[r])}function vp(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function ab(e){var c;const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=((c=e.contexts)==null?void 0:c.trace)??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o==null?void 0:o[Ya],exclusive_time:o==null?void 0:o[Xa],measurements:e.measurements,is_segment:!0}}function cb(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Ya]:e.profile_id},...e.exclusive_time&&{[Xa]:e.exclusive_time}}}},measurements:e.measurements}}const ol="Not capturing exception because it's already been captured.",al="Discarded session because of missing or non-string release",Tp=Symbol.for("SentryInternalError"),Ip=Symbol.for("SentryDoNotSendEventError");function Os(e){return{message:e,[Tp]:!0}}function mo(e){return{message:e,[Ip]:!0}}function cl(e){return!!e&&typeof e=="object"&&Tp in e}function ul(e){return!!e&&typeof e=="object"&&Ip in e}class ub{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Qf(t.dsn):k&&S.warn("No DSN provided, client will not send events."),this._dsn){const n=bp(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){const s=$e();if(Bu(t))return k&&S.log(ol),s;const i={event_id:s,...n};return this._process(this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(t,n,r,s){const i={event_id:$e(),...r},o=Ci(t)?t:String(t),a=Ri(t)?this.eventFromMessage(o,n,i):this.eventFromException(t,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(t,n,r){const s=$e();if(n!=null&&n.originalException&&Bu(n.originalException))return k&&S.log(ol),s;const i={event_id:s,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,c)),i.event_id}captureSession(t){this.sendSession(t),Bn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):ln(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Ep(this,t,this._integrations),n||il(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=_y(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=iy(r,ly(i));const s=this.sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const{release:n,environment:r=Mi}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!n){k&&S.warn(al);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){k&&S.warn(al);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=gy(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;k&&S.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(k&&S.error("Error while sending envelope:",n),n)):(k&&S.error("Transport disabled"),ln({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=ib(this,t),il(this,t)}_updateSessionFromEvent(t,n){var c;let r=n.level==="fatal",s=!1;const i=(c=n.exception)==null?void 0:c.values;if(i){s=!0;for(const u of i){const d=u.mechanism;if((d==null?void 0:d.handled)===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(Bn(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new jr(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),Uy(i,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:jf(r),...a.contexts};const c=ec(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=Q(),s=Te()){return k&&ra(t)&&S.log(`Captured error event \`${vp(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(i=>i.event_id,i=>{k&&(ul(i)?S.log(i.message):cl(i)?S.warn(i.message):S.warn(i))})}_processEvent(t,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=wp(t),c=ra(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof o>"u"?void 0:br(o);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),ei(mo(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),mo("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=db(this,i,p,n);return lb(m,d)}).then(p=>{var g;if(p===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw mo(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const _=((g=p.sdkProcessingMetadata)==null?void 0:g.spanCountBeforeProcessing)||0,y=p.spans?p.spans.length:0,x=_-y;x>0&&this.recordDroppedEvent("before_send","span",x)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const _="custom";p.transaction_info={...m,source:_}}return this.sendEvent(p,n),p}).then(null,p=>{throw ul(p)||cl(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Os(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){k&&S.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){k&&S.log("No outcomes to send");return}if(!this._dsn){k&&S.log("No dsn provided, will not send outcomes");return}k&&S.log("Sending outcomes:",t);const n=ob(t,this._options.tunnel&&gn(this._dsn));this.sendEnvelope(n)}}function lb(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Fr(e))return e.then(r=>{if(!_t(r)&&r!==null)throw Os(n);return r},r=>{throw Os(`${t} rejected with ${r}`)});if(!_t(e)&&e!==null)throw Os(n);return e}function db(e,t,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=t;let c=n;if(ra(c)&&s)return s(c,r);if(wp(c)){if(o||a){const u=ab(c);if(a!=null&&a.length&&Qo(u,a))return null;if(o){const d=o(u);d?c=Ur(n,cb(d)):Jo()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a!=null&&a.length&&Qo(p,a)){py(l,p);continue}if(o){const h=o(p);h?d.push(h):(Jo(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(i){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function ra(e){return e.type===void 0}function wp(e){return e.type==="transaction"}function fb(e,t){return t?Ye(t,()=>{const n=st(),r=n?sp(n):jf(t);return[n?rt(n):ec(e,t),r]}):[void 0,void 0]}const pb={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function hb(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function mb(e,t,n,r){const s={};return t!=null&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=gn(r)),qt(s,[hb(e)])}const gb=100;function _b(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function kt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function Sb(e,t){const n=ic(),r=kp(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=gb&&Ds(e,r))}function sa(e,t=F(),n=Q(),r=Sb){var A;if(!t){k&&S.warn("No client available to capture log.");return}const{release:s,environment:i,enableLogs:o=!1,beforeSendLog:a}=t.getOptions();if(!o){k&&S.warn("logging option not enabled, log will not be captured.");return}const[,c]=fb(t,n),u={...e.attributes},{user:{id:d,email:l,username:f}}=yb(n);kt(u,"user.id",d,!1),kt(u,"user.email",l,!1),kt(u,"user.name",f,!1),kt(u,"sentry.release",s),kt(u,"sentry.environment",i);const{name:p,version:h}=((A=t.getSdkMetadata())==null?void 0:A.sdk)??{};kt(u,"sentry.sdk.name",p),kt(u,"sentry.sdk.version",h);const m=e.message;if(Ci(m)){const{__sentry_template_string__:E,__sentry_template_values__:T=[]}=m;u["sentry.message.template"]=E,T.forEach((B,v)=>{u[`sentry.message.parameter.${v}`]=B})}const g=yr(n);kt(u,"sentry.trace.parent_span_id",g==null?void 0:g.spanContext().spanId);const _={...e,attributes:u};t.emit("beforeCaptureLog",_);const y=a?hn(()=>a(_)):_;if(!y){t.recordDroppedEvent("before_send","log_item",1),k&&S.warn("beforeSendLog returned null, log will not be captured.");return}const{level:x,message:w,attributes:C={},severityNumber:b}=y,I={timestamp:be(),level:x,body:w,trace_id:c==null?void 0:c.trace_id,severity_number:b??pb[x],attributes:Object.keys(C).reduce((E,T)=>(E[T]=_b(C[T]),E),{})};r(t,I),t.emit("afterCaptureLog",y)}function Ds(e,t){const n=t??kp(e)??[];if(n.length===0)return;const r=e.getOptions(),s=mb(n,r._metadata,r.tunnel,e.getDsn());ic().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function kp(e){return ic().get(e)}function yb(e){const t=Wf().getScopeData();return ti(t,Te().getScopeData()),ti(t,e.getScopeData()),t}function ic(){return Or("clientToLogBufferMap",()=>new WeakMap)}function bb(e,t){t.debug===!0&&(k?S.enable():hn(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Q().update(t.initialScope);const r=new e(t);return Eb(r),r.init(),r}function Eb(e){Q().setClient(e)}const Cp=Symbol.for("SentryBufferFullError");function vb(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!n())return ei(Cp);const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new jr((a,c)=>{let u=t.length;if(!u)return a(!0);const d=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(l=>{ln(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:s,drain:i}}const Tb=60*1e3;function Rp(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Tb:r-t}function Ib(e,t){return e[t]||e.all||0}function wb(e,t,n=Date.now()){return Ib(e,t)>n}function kb(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+Rp(o,r):t===429&&(s.all=r+60*1e3);return s}const Cb=64;function Rb(e,t,n=vb(e.bufferSize||Cb)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(un(o,(l,f)=>{const p=Vu(f);wb(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return ln({});const c=qt(o[0],a),u=l=>{un(c,(f,p)=>{e.recordDroppedEvent(l,Vu(p))})},d=()=>t({body:Zs(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&k&&S.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=kb(r,l),l),l=>{throw u("network_error"),k&&S.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Cp)return k&&S.error("Skipped sending event because buffer is full."),u("queue_overflow"),ln({});throw l})}return{send:i,flush:s}}const go=100,_o=5e3,xb=36e5;function Ab(e){function t(...n){k&&S.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let i=_o,o;function a(l,f,p){return Gu(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof o!="number"&&o.unref&&o.unref()}function u(){o||(c(i),i=Math.min(i*2,xb))}async function d(l,f=!1){var p,h;if(!f&&Gu(l,["replay_event","replay_recording"]))return await s.push(l),c(go),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const m=await r.send(l);let g=go;if(m){if((p=m.headers)!=null&&p["retry-after"])g=Rp(m.headers["retry-after"]);else if((h=m.headers)!=null&&h["x-sentry-rate-limits"])g=6e4;else if((m.statusCode||0)>=400)return m}return c(g),i=_o,m}catch(m){if(await a(l,m,i))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",m),{};throw m}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=_o,c(go)),r.flush(l))}}}function xp(e,t){let n;return un(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Mb(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const i=xp(s,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(s)}}}}function Nb(e,t){return qt(t?{...e[0],dsn:t}:e[0],e[1])}function eN(e,t){return n=>{const r=e(n),s=new Map;function i(c,u){const d=u?`${c}:${u}`:c;let l=s.get(d);if(!l){const f=Kf(c);if(!f)return;const p=bp(f,n.tunnel);l=u?Mb(e,u)({...n,url:p}):e({...n,url:p}),s.set(d,l)}return[c,l]}async function o(c){function u(p){const h=p!=null&&p.length?p:["event"];return xp(c,h)}const d=t({envelope:c,getEvent:u}).map(p=>typeof p=="string"?i(p,void 0):i(p.dsn,p.release)).filter(p=>!!p),l=d.length?d:[["",r]];return(await Promise.all(l.map(([p,h])=>h.send(Nb(c,p)))))[0]}async function a(c){const u=[...s.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:o,flush:a}}}function $b(e,t){const n=t==null?void 0:t.getDsn(),r=t==null?void 0:t.getOptions().tunnel;return Ob(e,n)||Lb(e,r)}function Lb(e,t){return t?ll(e)===ll(t):!1}function Ob(e,t){return t?e.includes(t.host):!1}function ll(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Db(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const Pb=Db;function Fb(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Bb(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Mt})),version:Mt}),e._metadata=s}function Ap(e={}){const t=e.client||F();if(!Zy()||!t)return{};const n=It(),r=zt(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||Q(),i=e.span||st(),o=i?XS(i):Ub(s),a=i?rt(i):ec(t,s),c=Xf(a);return ep.test(o)?{"sentry-trace":o,baggage:c}:(S.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function Ub(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return np(t,r,n)}const Hb=100;function Ht(e,t){const n=F(),r=Te();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Hb}=n.getOptions();if(i<=0)return;const a={timestamp:mn(),...e},c=s?hn(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}let dl;const Wb="FunctionToString",fl=new WeakMap,jb=()=>({name:Wb,setupOnce(){dl=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ga(this),n=fl.has(F())&&t!==void 0?t:this;return dl.apply(n,e)}}catch{}},setup(e){fl.set(e,!0)}}),zb=jb,qb=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Gb="EventFilters",Vb=(e={})=>{let t;return{name:Gb,setup(n){const r=n.getOptions();t=pl(e,r)},processEvent(n,r,s){if(!t){const i=s.getOptions();t=pl(e,i)}return Xb(n,t)?null:n}}},Yb=(e={})=>({...Vb(e),name:"InboundFilters"});function pl(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:qb],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Xb(e,t){if(e.type){if(e.type==="transaction"&&Jb(e,t.ignoreTransactions))return k&&S.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Kt(e)}`),!0}else{if(Kb(e,t.ignoreErrors))return k&&S.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Kt(e)}`),!0;if(tE(e))return k&&S.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Kt(e)}`),!0;if(Zb(e,t.denyUrls))return k&&S.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Kt(e)}.
Url: ${ni(e)}`),!0;if(!Qb(e,t.allowUrls))return k&&S.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Kt(e)}.
Url: ${ni(e)}`),!0}return!1}function Kb(e,t){return t!=null&&t.length?vp(e).some(n=>pt(n,t)):!1}function Jb(e,t){if(!(t!=null&&t.length))return!1;const n=e.transaction;return n?pt(n,t):!1}function Zb(e,t){if(!(t!=null&&t.length))return!1;const n=ni(e);return n?pt(n,t):!1}function Qb(e,t){if(!(t!=null&&t.length))return!0;const n=ni(e);return n?pt(n,t):!0}function eE(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ni(e){var t,n;try{const r=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(i=>{var o,a,c;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((c=(a=i.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),s=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return s?eE(s):null}catch{return k&&S.error(`Cannot extract url for event ${Kt(e)}`),null}}function tE(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)!=null&&n.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function nE(e,t,n,r,s,i){var a;if(!((a=s.exception)!=null&&a.values)||!i||!St(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=ia(e,t,r,i.originalException,n,s.exception.values,o,0))}function ia(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(St(r[s],Error)){hl(o,a);const u=e(t,r[s]),d=c.length;ml(u,s,d,a),c=ia(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(St(u,Error)){hl(o,a);const l=e(t,u),f=c.length;ml(l,`errors[${d}]`,f,a),c=ia(e,t,n,u,s,[l,...c],l,f)}}),c}function hl(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function ml(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Mp=new Map,gl=new Set;function rE(e){if(z._sentryModuleMetadata)for(const t of Object.keys(z._sentryModuleMetadata)){const n=z._sentryModuleMetadata[t];if(gl.has(t))continue;gl.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){Mp.set(s.filename,n);break}}}function sE(e,t){return rE(e),Mp.get(t)}function Np(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;const s=sE(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function $p(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const tN=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{un(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&($p(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;Np(n,t)})}});function oc(e){const t="console";Dr(t,e),Pr(t,iE)}function iE(){"console"in z&&Wa.forEach(function(e){e in z.console&&Ze(z.console,e,function(t){return Gs[e]=t,function(...n){tn("console",{args:n,level:e});const s=Gs[e];s==null||s.apply(z.console,n)}})})}function Lp(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const oE="CaptureConsole",aE=(e={})=>{const t=e.levels||Wa,n=e.handled??!0;return{name:oE,setup(r){"console"in z&&oc(({args:s,level:i})=>{F()!==r||!t.includes(i)||cE(s,i,n)})}}},nN=aE;function cE(e,t,n){const r={level:Lp(t),extra:{arguments:e}};Ye(s=>{if(s.addEventProcessor(a=>(a.logger="console",yt(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${Vs(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),na(a,r)}return}const i=e.find(a=>a instanceof Error);if(i){Er(i,r);return}const o=Vs(e," ");na(o,r)})}const uE="Dedupe",lE=()=>{let e;return{name:uE,processEvent(t){if(t.type)return t;try{if(fE(t,e))return k&&S.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},dE=lE;function fE(e,t){return t?!!(pE(e,t)||hE(e,t)):!1}function pE(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Dp(e,t)||!Op(e,t))}function hE(e,t){const n=_l(t),r=_l(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Dp(e,t)||!Op(e,t))}function Op(e,t){let n=qo(e),r=qo(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Dp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function _l(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}const mE="ExtraErrorData",gE=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:mE,processEvent(r,s,i){const{maxValueLength:o=250}=i.getOptions();return _E(r,s,t,n,o)}}},rN=gE;function _E(e,t={},n,r,s){if(!t.originalException||!Nt(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,o=Pp(t.originalException,r,s);if(o){const a={...e.contexts},c=je(o,n);return _t(c)&&(Be(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function Pp(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;const o=e[i];s[i]=Nt(o)||typeof o=="string"?Fn(`${o}`,n):o}if(t&&e.cause!==void 0)if(Nt(e.cause)){const i=e.cause.name||e.cause.constructor.name;s.cause={[i]:Pp(e.cause,!1,n)}}else s.cause=e.cause;if(typeof e.toJSON=="function"){const i=e.toJSON();for(const o of Object.keys(i)){const a=i[o];s[o]=Nt(a)?a.toString():a}}return s}catch(r){k&&S.error("Unable to extract extra data from the Error object:",r)}return null}function SE(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const yE=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function bE(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=yE.exec(t);return n?n.slice(1):[]}function Sl(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=SE(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function yl(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function EE(e,t){e=Sl(e).slice(1),t=Sl(t).slice(1);const n=yl(e.split("/")),r=yl(t.split("/")),s=Math.min(n.length,r.length);let i=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){i=a;break}let o=[];for(let a=i;a<n.length;a++)o.push("..");return o=o.concat(r.slice(i)),o.join("/")}function vE(e,t){return bE(e)[2]||""}const TE="RewriteFrames",sN=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in z&&!!z.window,s=e.iteratee||IE({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:o(c.stacktrace)}}))}}}catch{return a}}function o(a){var c;return{...a,frames:(c=a==null?void 0:a.frames)==null?void 0:c.map(u=>s(u))}}return{name:TE,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function IE({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){const o=r.filename;o.indexOf(t)===0&&(r.filename=o.replace(t,n))}}else if(s||i){const o=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?EE(t,o):vE(o);r.filename=`${n}${a}`}return r}}const wE=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],kE=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],CE={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Fp=["select","insert","upsert","update","delete"];function Oi(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Di(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function RE(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return(n=t.Prefer)!=null&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function xE(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n!=null&&n.startsWith("fts")?s="textSearch":n!=null&&n.startsWith("plfts")?s="textSearch[plain]":n!=null&&n.startsWith("phfts")?s="textSearch[phrase]":n!=null&&n.startsWith("wfts")?s="textSearch[websearch]":s=n&&CE[n]||"filter",`${s}(${e}, ${r.join(".")})`}function bl(e,t=!1){return new Proxy(e,{apply(n,r,s){return pp({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[nt]:"auto.db.supabase",[Bt]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,s).then(o=>(o&&typeof o=="object"&&"error"in o&&o.error?(i.setStatus({code:fe}),Er(o.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:Ka}),i.end(),o)).catch(o=>{throw i.setStatus({code:fe}),i.end(),Er(o,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),o}).then(...s))}})}function AE(e){const t=e.auth;if(!(!t||Di(e.auth))){for(const n of wE){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=bl(r))}for(const n of kE){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=bl(r,!0))}Oi(e.auth)}}function ME(e){Di(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),i=s.constructor;return $E(i),s}}),Oi(e.prototype.from))}function NE(e){Di(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){var p;const s=Fp,i=n,o=RE(i.method,i.headers);if(!s.includes(o)||!((p=i==null?void 0:i.url)!=null&&p.pathname)||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);const a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[h,m]of i.url.searchParams.entries())u.push(xE(h,m));const d=Object.create(null);if(_t(i.body))for(const[h,m]of Object.entries(i.body))d[h]=m;const l=`${o==="select"?"":`${o}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[nt]:"auto.db.supabase",[Bt]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),pp({name:l,attributes:f},h=>Reflect.apply(t,n,[]).then(m=>{if(h&&(m&&typeof m=="object"&&"status"in m&&Xs(h,m.status||500),h.end()),m.error){const y=new Error(m.error.message);m.error.code&&(y.code=m.error.code),m.error.details&&(y.details=m.error.details);const x={};u.length&&(x.query=u),Object.keys(d).length&&(x.body=d),Er(y,w=>(w.addEventProcessor(C=>(yt(C,{handled:!1,type:"auto.db.supabase.postgres"}),C)),w.setContext("supabase",x),w))}const g={type:"supabase",category:`db.${o}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(g.data=_),Ht(g),m},m=>{throw h&&(Xs(h,500),h.end()),m}).then(...r))}}),Oi(e.prototype.then))}function $E(e){for(const t of Fp)Di(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const i=Reflect.apply(n,r,s),o=i.constructor;return k&&S.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),NE(o),i}}),Oi(e.prototype[t]))}const LE=e=>{if(!e){k&&S.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;ME(t),AE(e)},OE="Supabase",DE=e=>({setupOnce(){LE(e)},name:OE}),iN=e=>DE(e.supabaseClient),PE=10,FE="ZodErrors";function BE(e){return Nt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function UE(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function HE(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function WE(e){const t=new Set;for(const r of e.issues){const s=HE(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Fn(n.join(", "),100)}`}function jE(e,t=!1,n,r){var s;if(!((s=n.exception)!=null&&s.values)||!r.originalException||!BE(r.originalException)||r.originalException.issues.length===0)return n;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(UE);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:WE(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(i){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:"unknown"}}}}}const zE=(e={})=>{const t=e.limit??PE;return{name:FE,processEvent(n,r){return jE(t,e.saveZodIssuesAsAttachment,n,r)}}},oN=zE,aN=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{un(n,(r,s)=>{if(s==="event"){const i=Array.isArray(r)?r[1]:void 0;i&&($p(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;Np(r,n)})},processEvent(t){const n=qE(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(o=>e.filterKeys.includes(o)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function qE(e){const t=qo(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(El)).map(r=>r.slice(El.length)):[])}const El="_sentryBundlerPluginAppKey:",GE=100,VE=10,ls="flag.evaluation.";function zr(e){const n=Q().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function Hn(e,t,n=GE){const r=Q().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;YE(s,e,t,n)}function YE(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){k&&S.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(i=>i.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function Wn(e,t,n=VE){if(typeof t!="boolean")return;const r=st();if(!r)return;const s=J(r).data;if(`${ls}${e}`in s){r.setAttribute(`${ls}${e}`,t);return}Object.keys(s).filter(o=>o.startsWith(ls)).length<n&&r.setAttribute(`${ls}${e}`,t)}const cN=()=>({name:"FeatureFlags",processEvent(e,t,n){return zr(e)},addFeatureFlag(e,t){Hn(e,t),Wn(e,t)}}),XE="thismessage:/";function Bp(e){return"isRelative"in e}function Up(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?XE:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function KE(e){if(Bp(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function $n(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Hp(e){return e.split(/[?#]/,1)[0]}function JE(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,a=Ut()&&t(o);if(e.endTimestamp&&a){const l=e.fetchData.__span;if(!l)return;const f=r[l];f&&(QE(f,e),delete r[l]);return}const c=!!st(),u=a&&c?$i(tv(o,i,s)):new Et;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const l=e.args[0],f=e.args[1]||{},p=ZE(l,f,Ut()&&c?u:void 0);p&&(e.args[1]=f,f.headers=p)}const d=F();if(d){const l={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};d.emit("beforeOutgoingRequestSpan",u,l)}return u}function ZE(e,t,n){const r=Ap({span:n}),s=r["sentry-trace"],i=r.baggage;if(!s)return;const o=t.headers||(Df(e)?e.headers:void 0);if(o)if(ev(o)){const a=new Headers(o);if(a.get("sentry-trace")||a.set("sentry-trace",s),i){const c=a.get("baggage");c?ds(c)||a.set("baggage",`${c},${i}`):a.set("baggage",i)}return a}else if(Array.isArray(o)){const a=[...o];o.find(u=>u[0]==="sentry-trace")||a.push(["sentry-trace",s]);const c=o.find(u=>u[0]==="baggage"&&ds(u[1]));return i&&!c&&a.push(["baggage",i]),a}else{const a="sentry-trace"in o?o["sentry-trace"]:void 0,c="baggage"in o?o.baggage:void 0,u=c?Array.isArray(c)?[...c]:[c]:[],d=c&&(Array.isArray(c)?c.find(l=>ds(l)):ds(c));return i&&!d&&u.push(i),{...o,"sentry-trace":a??s,baggage:u.length>0?u.join(","):void 0}}else return{...r}}function QE(e,t){var n,r;if(t.response){Xs(e,t.response.status);const s=(r=(n=t.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(s){const i=parseInt(s);i>0&&e.setAttribute("http.response_content_length",i)}}else t.error&&e.setStatus({code:fe,message:"internal_error"});e.end()}function ds(e){return e.split(",").some(t=>t.trim().startsWith(Ja))}function ev(e){return typeof Headers<"u"&&St(e,Headers)}function tv(e,t,n){const r=Up(e);return{name:r?`${t} ${KE(r)}`:t,attributes:nv(e,r,t,n)}}function nv(e,t,n,r){const s={url:e,type:"fetch","http.method":n,[nt]:r,[Bt]:"http.client"};return t&&(Bp(t)||(s["http.url"]=t.href,s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function uN(e,t={},n=Q()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=(n==null?void 0:n.getClient())||F();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}const rv="ConsoleLogs",vl={[nt]:"auto.console.logging"},sv=(e={})=>{const t=e.levels||Wa;return{name:rv,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){k&&S.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}oc(({args:o,level:a})=>{if(F()!==n||!t.includes(a))return;if(a==="assert"){if(!o[0]){const u=o.slice(1),d=u.length>0?`Assertion failed: ${Tl(u,s,i)}`:"Assertion failed";sa({level:"error",message:d,attributes:vl})}return}const c=a==="log";sa({level:c?"info":a,message:Tl(o,s,i),severityNumber:c?10:void 0,attributes:vl})})}}},lN=sv;function Tl(e,t,n){return"util"in z&&typeof z.util.format=="function"?z.util.format(...e):iv(e,t,n)}function iv(e,t,n){return e.map(r=>Ri(r)?String(r):JSON.stringify(je(r,t,n))).join(" ")}function Wp(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const ri=z;function ov(){if(!("fetch"in ri))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Il(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function jp(){var n;if(typeof EdgeRuntime=="string")return!0;if(!ov())return!1;if(Il(ri.fetch))return!0;let e=!1;const t=ri.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(e=Il(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){k&&S.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function av(){return"ReportingObserver"in ri}function ac(e,t){const n="fetch";Dr(n,e),Pr(n,()=>zp(void 0,t))}function cv(e){const t="fetch-body-resolved";Dr(t,e),Pr(t,()=>zp(lv))}function zp(e,t=!1){t&&!jp()||Ze(z,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=dv(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:be()*1e3,virtualError:s,headers:fv(r)};return e||tn("fetch",{...a}),n.apply(z,r).then(async c=>(e?e(c):tn("fetch",{...a,endTimestamp:be()*1e3,response:c}),c),c=>{if(tn("fetch",{...a,endTimestamp:be()*1e3,error:c}),Nt(c)&&c.stack===void 0&&(c.stack=s.stack,Be(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function uv(e,t){if(e!=null&&e.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function lv(e){let t;try{t=e.clone()}catch{return}uv(t,()=>{tn("fetch-body-resolved",{endTimestamp:be()*1e3,response:e})})}function oa(e,t){return!!e&&typeof e=="object"&&!!e[t]}function wl(e){return typeof e=="string"?e:e?oa(e,"url")?e.url:e.toString?e.toString():"":""}function dv(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:wl(n),method:oa(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:wl(t),method:oa(t,"method")?String(t.method).toUpperCase():"GET"}}function fv(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Df(t))return new Headers(t.headers)}catch{}}function pv(){return"npm"}const L=z;let aa=0;function qp(){return aa>0}function hv(){aa++,setTimeout(()=>{aa--})}function jn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(Ga(e))return e}catch{return e}const r=function(...s){try{const i=s.map(o=>jn(o,t));return e.apply(this,i)}catch(i){throw hv(),Ye(o=>{o.addEventProcessor(a=>(t.mechanism&&(Go(a,void 0),yt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),Er(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Ff(r,e),Be(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function cc(){const e=Br(),{referrer:t}=L.document||{},{userAgent:n}=L.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const mv={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},kl=L;async function gv(e,t){const n=mv[e],r=kl.Sentry=kl.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const i=_v(n),o=L.document.createElement("script");o.src=i,o.crossOrigin="anonymous",o.referrerPolicy="strict-origin",t&&o.setAttribute("nonce",t);const a=new Promise((l,f)=>{o.addEventListener("load",()=>l()),o.addEventListener("error",f)}),c=L.document.currentScript,u=L.document.body||L.document.head||(c==null?void 0:c.parentElement);if(u)u.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function _v(e){var r;const t=F(),n=((r=t==null?void 0:t.getOptions())==null?void 0:r.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${Mt}/${e}.min.js`,n).toString()}const dN=_f({lazyLoadIntegration:gv}),fN=_f({getModalIntegration:()=>j_,getScreenshotIntegration:()=>K_});function er(e,t,n,r){sa({level:e,message:t,attributes:n,severityNumber:r})}function Sv(e,t){er("trace",e,t)}function yv(e,t){er("debug",e,t)}function bv(e,t){er("info",e,t)}function Ev(e,t){er("warn",e,t)}function vv(e,t){er("error",e,t)}function Tv(e,t){er("fatal",e,t)}const pN=Object.freeze(Object.defineProperty({__proto__:null,debug:yv,error:vv,fatal:Tv,fmt:Pb,info:bv,trace:Sv,warn:Ev},Symbol.toStringTag,{value:"Module"}));function uc(e,t){const n=lc(e,t),r={type:Rv(t),value:xv(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Iv(e,t,n,r){const s=F(),i=s==null?void 0:s.getOptions().normalizeDepth,o=Lv(t),a={__serialized__:lp(t,i)};if(o)return{exception:{values:[uc(e,o)]},extra:a};const c={exception:{values:[{type:xi(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Nv(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=lc(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function So(e,t){return{exception:{values:[uc(e,t)]}}}function lc(e,t){const n=t.stacktrace||t.stack||"",r=kv(t),s=Cv(t);try{return e(n,r,s)}catch{}return[]}const wv=/Minified React error #\d+;/i;function kv(e){return e&&wv.test(e.message)?1:0}function Cv(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Gp(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Rv(e){const t=e==null?void 0:e.name;return!t&&Gp(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function xv(e){const t=e==null?void 0:e.message;return Gp(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Av(e,t,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,i=dc(e,t,s,r);return yt(i),i.level="error",n!=null&&n.event_id&&(i.event_id=n.event_id),ln(i)}function Mv(e,t,n="info",r,s){const i=(r==null?void 0:r.syntheticException)||void 0,o=ca(e,t,i,s);return o.level=n,r!=null&&r.event_id&&(o.event_id=r.event_id),ln(o)}function dc(e,t,n,r,s){let i;if(Lf(t)&&t.error)return So(e,t.error);if(Du(t)||aS(t)){const o=t;if("stack"in t)i=So(e,t);else{const a=o.name||(Du(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=ca(e,c,n,r),Go(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Nt(t)?So(e,t):_t(t)||xi(t)?(i=Iv(e,t,n,s),yt(i,{synthetic:!0}),i):(i=ca(e,t,n,r),Go(i,`${t}`),yt(i,{synthetic:!0}),i)}function ca(e,t,n,r){const s={};if(r&&n){const i=lc(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]}),yt(s,{synthetic:!0})}if(Ci(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function Nv(e,{isUnhandledRejection:t}){const n=hS(e),r=t?"promise rejection":"exception";return Lf(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:xi(e)?`Event \`${$v(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function $v(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Lv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}const Ov=5e3;class Dv extends ub{constructor(t){var a;const n=Pv(t),r=L.SENTRY_SDK_SOURCE||pv();Bb(n,"browser",["browser"],r),(a=n._metadata)!=null&&a.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:i,enableLogs:o}=this._options;L.document&&(i||o)&&L.document.addEventListener("visibilitychange",()=>{L.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&Ds(this))}),o&&(this.on("flush",()=>{Ds(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Ds(this)},Ov)})),s&&this.on("beforeSendSession",Fb)}eventFromException(t,n){return Av(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Mv(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function Pv(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=L.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ue=globalThis,ur="10.5.0";function tr(){return fc(Ue),Ue}function fc(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ur,t[ur]=t[ur]||{}}function pc(e,t,n=Ue){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[ur]=r[ur]||{};return s[e]||(s[e]=t())}const Fv="Sentry Logger ",Cl={};function Vp(e){if(!("console"in Ue))return e();const t=Ue.console,n={},r=Object.keys(Cl);r.forEach(s=>{const i=Cl[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Bv(){mc().enabled=!0}function Uv(){mc().enabled=!1}function Yp(){return mc().enabled}function Hv(...e){hc("log",...e)}function Wv(...e){hc("warn",...e)}function jv(...e){hc("error",...e)}function hc(e,...t){ge&&Yp()&&Vp(()=>{Ue.console[e](`${Fv}[${e}]:`,...t)})}function mc(){return ge?pc("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const le={enable:Bv,disable:Uv,isEnabled:Yp,log:Hv,warn:Wv,error:jv},yo="<anonymous>";function Xp(e){try{return!e||typeof e!="function"?yo:e.name||yo}catch{return yo}}const Ps={},Rl={};function gc(e,t){Ps[e]=Ps[e]||[],Ps[e].push(t)}function _c(e,t){if(!Rl[e]){Rl[e]=!0;try{t()}catch(n){ge&&le.error(`Error while instrumenting ${e}`,n)}}}function vr(e,t){const n=e&&Ps[e];if(n)for(const r of n)try{r(t)}catch(s){ge&&le.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Xp(r)}
Error:`,s)}}const zv=Object.prototype.toString;function Sc(e,t){return zv.call(e)===`[object ${t}]`}function $t(e){return Sc(e,"String")}function qv(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function xl(e){return e===null||qv(e)||typeof e!="object"&&typeof e!="function"}function Gv(e){return Sc(e,"Object")}function Vv(e){return Sc(e,"RegExp")}function Kp(e){return!!(e!=null&&e.then&&typeof e.then=="function")}const Jp=Ue,Yv=80;function Wt(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||Yv;for(;n&&i++<r&&(u=Xv(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Xv(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(Jp.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&$t(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Kv(e){if(!Jp.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Jv(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Fs(e,t,n=!1){return $t(e)?Vv(t)?t.test(e):$t(t)?n?e===t:e.includes(t):!1:!1}function Zv(e,t=[],n=!1){return t.some(r=>Fs(e,r,n))}function si(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Qv(s,r);try{e[t]=s}catch{ge&&le.log(`Failed to replace method "${t}" in object`,e)}}function vt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{ge&&le.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Qv(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,vt(e,"__sentry_original__",t)}catch{}}function e0(){const e=Ue;return e.crypto||e.msCrypto}function sn(e=e0()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}const Zp=1e3;function Qp(){return Date.now()/Zp}function t0(){const{performance:e}=Ue;if(!(e!=null&&e.now)||!e.timeOrigin)return Qp;const t=e.timeOrigin;return()=>(t+e.now())/Zp}let Al;function Lt(){return(Al??(Al=t0()))()}let bo;function n0(){var d;const{performance:e}=Ue;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=(d=e.timing)==null?void 0:d.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function it(){return bo||(bo=n0()),bo[0]}function r0(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Lt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:sn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function eh(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=eh(r[s],t[s],n-1));return r}function ii(){return sn()}function th(){return sn().substring(16)}const ua="_sentrySpan";function oi(e,t){t?vt(e,ua,t):delete e[ua]}function ai(e){return e[ua]}const s0=100;let ci=class la{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ii(),sampleRand:Math.random()}}clone(){const t=new la;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,oi(t,ai(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&r0(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof la?n.getScopeData():Gv(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,oi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ii(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const r=typeof n=="number"?n:s0;if(r<=0)return this;const s={timestamp:Qp(),...t,message:t.message?Jv(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ai(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=eh(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||sn();if(!this._client)return ge&&le.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=(r==null?void 0:r.event_id)||sn();if(!this._client)return ge&&le.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||sn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(ge&&le.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function i0(){return pc("defaultCurrentScope",()=>new ci)}function o0(){return pc("defaultIsolationScope",()=>new ci)}let a0=class{constructor(t,n){let r;t?r=t:r=new ci;let s;n?s=n:s=new ci,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Kp(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function zn(){const e=tr(),t=fc(e);return t.stack=t.stack||new a0(i0(),o0())}function c0(e){return zn().withScope(e)}function u0(e,t){const n=zn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Ml(e){return zn().withScope(()=>e(zn().getIsolationScope()))}function l0(){return{withIsolationScope:Ml,withScope:c0,withSetScope:u0,withSetIsolationScope:(e,t)=>Ml(t),getCurrentScope:()=>zn().getScope(),getIsolationScope:()=>zn().getIsolationScope()}}function qr(e){const t=fc(e);return t.acs?t.acs:l0()}function ot(){const e=tr();return qr(e).getCurrentScope()}function d0(){const e=tr();return qr(e).getIsolationScope()}function yc(...e){const t=tr(),n=qr(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function Gt(){return ot().getClient()}const Tr="sentry.source",nh="sentry.sample_rate",f0="sentry.previous_trace_sample_rate",dn="sentry.op",ke="sentry.origin",Gr="sentry.measurement_unit",Vr="sentry.measurement_value",Nl="sentry.custom_span_name",p0="sentry.profile_id",Pi="sentry.exclusive_time",h0=0,m0=1,g0=2,rh="_sentryScope",sh="_sentryIsolationScope";function _0(e,t,n){e&&(vt(e,sh,n),vt(e,rh,t))}function da(e){return{scope:e[rh],isolationScope:e[sh]}}const S0="sentry-",y0=/^sentry-/;function b0(e){const t=E0(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(y0)){const o=s.slice(S0.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function E0(e){if(!(!e||!$t(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=$l(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):$l(e)}function $l(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const v0=/^o(\d+)\./;function T0(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function I0(e){const t=e.match(v0);return t==null?void 0:t[1]}function w0(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=I0(n)),r}function ih(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const oh=0,bc=1;let Ll=!1;function k0(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=Ee(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function ah(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===bc,attributes:i,...s}))}function Ln(e){return typeof e=="number"?Ol(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ol(e.getTime()):Lt()}function Ol(e){return e>9999999999?e/1e3:e}function Ee(e){var r;if(R0(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(C0(e)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:n,data:s,description:o,parent_span_id:d,start_timestamp:Ln(i),timestamp:Ln(a)||void 0,status:ch(c),op:s[dn],origin:s[ke],links:ah(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function C0(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function R0(e){return typeof e.getSpanJSON=="function"}function Yr(e){const{traceFlags:t}=e.spanContext();return t===bc}function ch(e){if(!(!e||e.code===h0))return e.code===m0?"ok":e.message||"unknown_error"}const lr="_sentryChildSpans",fa="_sentryRootSpan";function uh(e,t){const n=e[fa]||e;vt(t,fa,n),e[lr]?e[lr].add(t):vt(e,lr,new Set([t]))}function x0(e){const t=new Set;function n(r){if(!t.has(r)&&Yr(r)){t.add(r);const s=r[lr]?Array.from(r[lr]):[];for(const i of s)n(i)}}return n(e),Array.from(t)}function Ge(e){return e[fa]||e}function Sn(){const e=tr(),t=qr(e);return t.getActiveSpan?t.getActiveSpan():ai(ot())}function A0(){Ll||(Vp(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Ll=!0)}function Ec(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Gt())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const M0="production",lh="_frozenDsc";function Eo(e,t){vt(e,lh,t)}function N0(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||M0,release:n.release,public_key:r,trace_id:e,org_id:w0(t)};return t.emit("createDsc",s),s}function ui(e){var h;const t=Gt();if(!t)return{};const n=Ge(e),r=Ee(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[nh]??s[f0];function a(m){return(typeof o=="number"||typeof o=="string")&&(m.sample_rate=`${o}`),m}const c=n[lh];if(c)return a(c);const u=i==null?void 0:i.get("sentry.dsc"),d=u&&b0(u);if(d)return a(d);const l=N0(e.spanContext().traceId,t),f=s[Tr],p=r.description;return f!=="url"&&p&&(l.transaction=p),Ec()&&(l.sampled=String(Yr(n)),l.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((h=da(n).scope)==null?void 0:h.getPropagationContext().sampleRand.toString())),a(l),t.emit("createDsc",l,n),l}class Fi{constructor(t={}){this._traceId=t.traceId||ii(),this._spanId=t.spanId||th()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:oh}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function $0(e,t=[]){return[e,t]}function L0(e){return[{type:"span"},e]}function O0(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(D0(n)){if(Fs(e.description,n))return!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Fs(e.description,n.name):!0,s=n.op?e.op&&Fs(e.op,n.op):!0;if(r&&s)return!0}return!1}function D0(e){return typeof e=="string"||e instanceof RegExp}function P0(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=ui(e[0]),s=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:T0(s)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},u=c!=null&&c.length?e.filter(p=>!O0(Ee(p),c)):e,d=e.length-u.length;d&&(t==null||t.recordDroppedEvent("before_send","span",d));const l=a?p=>{const h=Ee(p),m=a(h);return m||(A0(),h)}:Ee,f=[];for(const p of u){const h=l(p);h&&f.push(L0(h))}return $0(o,f)}function F0(e){if(!ge)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Ee(e),{spanId:s}=e.spanContext(),i=Yr(e),o=Ge(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=Ee(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}le.log(`${c}
  ${u.join(`
  `)}`)}function B0(e){if(!ge)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Ee(e),{spanId:r}=e.spanContext(),i=Ge(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;le.log(o)}function U0(e,t,n,r=Sn()){const s=r&&Ge(r);s&&(ge&&le.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Vr]:t,[Gr]:n}))}function Dl(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Gr],i=r[Vr];typeof s=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:s})}),t}const Pl=1e3;class vc{constructor(t={}){this._traceId=t.traceId||ii(),this._spanId=t.spanId||th(),this._startTime=t.startTimestamp||Lt(),this._links=t.links,this._attributes={},this.setAttributes({[ke]:"manual",[dn]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?bc:oh}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Ln(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Tr,"custom"),this}end(t){this._endTime||(this._endTime=Ln(t),B0(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[dn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ch(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ke],profile_id:this._attributes[p0],exclusive_time:this._attributes[Pi],measurements:Dl(this._events),is_segment:this._isStandaloneSpan&&Ge(this)===this||void 0,segment_id:this._isStandaloneSpan?Ge(this).spanContext().spanId:void 0,links:ah(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){ge&&le.log("[Tracing] Adding an event to span:",t);const s=Fl(n)?n:r||Lt(),i=Fl(n)?{}:n||{},o={name:t,time:Ln(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=Gt();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ge(this)))return;if(this._isStandaloneSpan){this._sampled?W0(P0([this],t)):(ge&&le.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(da(this).scope||ot()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Bl(Ee(this)))return;this._name||(ge&&le.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=da(this),r=(d=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const i=x0(this).filter(l=>l!==this&&!H0(l)).map(l=>Ee(l)).filter(Bl),o=this._attributes[Tr];delete this._attributes[Nl],i.forEach(l=>{delete l.data[Nl]});const a={contexts:{trace:k0(this)},spans:i.length>Pl?i.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,Pl):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ui(this)},request:r,...o&&{transaction_info:{source:o}}},c=Dl(this._events);return c&&Object.keys(c).length&&(ge&&le.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Fl(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Bl(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function H0(e){return e instanceof vc&&e.isStandaloneSpan()}function W0(e){const t=Gt();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function j0(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return z0(r,t,n)}function z0(e,t,n){return Kp(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function q0(e,t,n){if(!Ec(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const i=ih(s);if(i===void 0)return ge&&le.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return ge&&le.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||ge&&le.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const dh="__SENTRY_SUPPRESS_TRACING__";function G0(e,t){const n=Ic();if(n.startSpan)return n.startSpan(e,t);const r=hh(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o==null?void 0:o.clone();return yc(a,()=>Y0(i)(()=>{const u=ot(),d=mh(u,i),f=e.onlyIfParent&&!d?new Fi:ph({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return oi(u,f),j0(()=>t(f),()=>{const{status:p}=Ee(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:g0,message:"internal_error"})},()=>{f.end()})}))}function fh(e){const t=Ic();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=hh(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?o=>yc(e.scope,o):s!==void 0?o=>Tc(s,o):o=>o())(()=>{const o=ot(),a=mh(o,s);return e.onlyIfParent&&!a?new Fi:ph({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function Tc(e,t){const n=Ic();return n.withActiveSpan?n.withActiveSpan(e,t):yc(r=>(oi(r,e||void 0),t(r)))}function ph({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Ec()){const o=new Fi;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...ui(o)};Eo(o,a)}return o}const s=d0();let i;if(e&&!n)i=V0(e,r,t),uh(e,i);else if(e){const o=ui(e),{traceId:a,spanId:c}=e.spanContext(),u=Yr(e);i=Ul({traceId:a,parentSpanId:c,...t},r,u),Eo(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=Ul({traceId:o,parentSpanId:c,...t},r,u),a&&Eo(i,a)}return F0(i),_0(i,r,s),i}function hh(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Ln(e.startTime),delete r.startTime,r}return n}function Ic(){const e=tr();return qr(e)}function Ul(e,t,n){var h;const r=Gt(),s=(r==null?void 0:r.getOptions())||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r==null||r.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[dh]?[!1]:q0(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:ih((h=u.dsc)==null?void 0:h.sample_rate)},u.sampleRand),p=new vc({...e,attributes:{[Tr]:"custom",[nh]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(ge&&le.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function V0(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[dh]?!1:Yr(e),o=i?new vc({...n,parentSpanId:r,traceId:s,sampled:i}):new Fi({traceId:s});uh(e,o);const a=Gt();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function mh(e,t){if(t)return t;if(t===null)return;const n=ai(e);if(!n)return;const r=Gt();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ge(n):n}function Y0(e){return e!==void 0?t=>Tc(e,t):t=>t()}function X0(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const Hl=Ue;function K0(){return"history"in Hl&&!!Hl.history}function J0(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const qn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,U=Ue,Z0=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Xr=(e,t,n,r)=>{let s,i;return o=>{t.value>=0&&(o||r)&&(i=t.value-(s??0),(i||s===void 0)&&(s=t.value,t.delta=i,t.rating=Z0(t.value,n),e(t)))}},Q0=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Kr=(e=!0)=>{var n,r;const t=(r=(n=U.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},nr=()=>{const e=Kr();return(e==null?void 0:e.activationStart)??0},Jr=(e,t=-1)=>{var i,o;const n=Kr();let r="navigate";return n&&((i=U.document)!=null&&i.prerendering||nr()>0?r="prerender":(o=U.document)!=null&&o.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:Q0(),navigationType:r}},vo=new WeakMap;function wc(e,t){return vo.get(e)||vo.set(e,new t),vo.get(e)}class li{constructor(){li.prototype.__init.call(this),li.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var s;if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,t)}}const rr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},kc=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let dr=-1;const eT=()=>{var e,t;return((e=U.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=U.document)!=null&&t.prerendering)?0:1/0},di=e=>{U.document.visibilityState==="hidden"&&dr>-1&&(dr=e.type==="visibilitychange"?e.timeStamp:0,nT())},tT=()=>{addEventListener("visibilitychange",di,!0),addEventListener("prerenderingchange",di,!0)},nT=()=>{removeEventListener("visibilitychange",di,!0),removeEventListener("prerenderingchange",di,!0)},Cc=()=>{var e;if(U.document&&dr<0){const t=nr();dr=(U.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0])==null?void 0:e.startTime)??eT(),tT()}return{get firstHiddenTime(){return dr}}},Bi=e=>{var t;(t=U.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},rT=[1800,3e3],sT=(e,t={})=>{Bi(()=>{const n=Cc(),r=Jr("FCP");let s;const o=rr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-nr(),0),r.entries.push(c),s(!0)))});o&&(s=Xr(e,r,rT,t.reportAllChanges))})},iT=[.1,.25],oT=(e,t={})=>{sT(kc(()=>{var a,c;const n=Jr("CLS",0);let r;const s=wc(t,li),i=u=>{for(const d of u)s._processEntry(d);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},o=rr("layout-shift",i);o&&(r=Xr(e,n,iT,t.reportAllChanges),(a=U.document)==null||a.addEventListener("visibilitychange",()=>{var u;((u=U.document)==null?void 0:u.visibilityState)==="hidden"&&(i(o.takeRecords()),r(!0))}),(c=U==null?void 0:U.setTimeout)==null||c.call(U,r))}))};let gh=0,To=1/0,fs=0;const aT=e=>{e.forEach(t=>{t.interactionId&&(To=Math.min(To,t.interactionId),fs=Math.max(fs,t.interactionId),gh=fs?(fs-To)/7+1:0)})};let pa;const _h=()=>pa?gh:performance.interactionCount||0,cT=()=>{"interactionCount"in performance||pa||(pa=rr("event",aT,{type:"event",buffered:!0,durationThreshold:0}))},Io=10;let Sh=0;const uT=()=>_h()-Sh;class fi{constructor(){fi.prototype.__init.call(this),fi.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Sh=_h(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(uT()/50));return this._longestInteractionList[t]}_processEntry(t){var s,i;if((s=this._onBeforeProcessingEntry)==null||s.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Io||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,a)=>a._latency-o._latency),this._longestInteractionList.length>Io){const o=this._longestInteractionList.splice(Io);for(const a of o)this._longestInteractionMap.delete(a.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,r)}}}const Rc=e=>{const t=n=>{var r;(n.type==="pagehide"||((r=U.document)==null?void 0:r.visibilityState)==="hidden")&&e(n)};U.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},yh=e=>{var n;const t=U.requestIdleCallback||U.setTimeout;((n=U.document)==null?void 0:n.visibilityState)==="hidden"?e():(e=kc(e),t(e),Rc(e))},lT=[200,500],dT=40,fT=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Bi(()=>{cT();const n=Jr("INP");let r;const s=wc(t,fi),i=a=>{yh(()=>{for(const u of a)s._processEntry(u);const c=s._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},o=rr("event",i,{durationThreshold:t.durationThreshold??dT});r=Xr(e,n,lT,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Rc(()=>{i(o.takeRecords()),r(!0)}))})};class pT{_processEntry(t){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,t)}}const hT=[2500,4e3],mT=(e,t={})=>{Bi(()=>{const n=Cc(),r=Jr("LCP");let s;const i=wc(t,pT),o=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-nr(),0),r.entries=[u],s())},a=rr("largest-contentful-paint",o);if(a){s=Xr(e,r,hT,t.reportAllChanges);const c=kc(()=>{o(a.takeRecords()),a.disconnect(),s(!0)});for(const u of["keydown","click","visibilitychange"])U.document&&addEventListener(u,()=>yh(c),{capture:!0,once:!0})}})},gT=[800,1800],ha=e=>{var t,n;(t=U.document)!=null&&t.prerendering?Bi(()=>ha(e)):((n=U.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>ha(e),!0):setTimeout(e)},_T=(e,t={})=>{const n=Jr("TTFB"),r=Xr(e,n,gT,t.reportAllChanges);ha(()=>{const s=Kr();s&&(n.value=Math.max(s.responseStart-nr(),0),n.entries=[s],r(!0))})},fr={},pi={};let bh,Eh,vh,Th;function xc(e,t=!1){return Ui("cls",e,yT,bh,t)}function Ac(e,t=!1){return Ui("lcp",e,bT,Eh,t)}function ST(e){return Ui("ttfb",e,ET,vh)}function Ih(e){return Ui("inp",e,vT,Th)}function fn(e,t){return wh(e,t),pi[e]||(TT(e),pi[e]=!0),kh(e,t)}function Zr(e,t){const n=fr[e];if(n!=null&&n.length)for(const r of n)try{r(t)}catch(s){qn&&le.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Xp(r)}
Error:`,s)}}function yT(){return oT(e=>{Zr("cls",{metric:e}),bh=e},{reportAllChanges:!0})}function bT(){return mT(e=>{Zr("lcp",{metric:e}),Eh=e},{reportAllChanges:!0})}function ET(){return _T(e=>{Zr("ttfb",{metric:e}),vh=e})}function vT(){return fT(e=>{Zr("inp",{metric:e}),Th=e})}function Ui(e,t,n,r,s=!1){wh(e,t);let i;return pi[e]||(i=n(),pi[e]=!0),r&&t({metric:r}),kh(e,t,s?i:void 0)}function TT(e){const t={};e==="event"&&(t.durationThreshold=0),rr(e,n=>{Zr(e,{entries:n})},t)}function wh(e,t){fr[e]=fr[e]||[],fr[e].push(t)}function kh(e,t,n){return()=>{n&&n();const r=fr[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function IT(e){return"duration"in e}function wo(e){return typeof e=="number"&&isFinite(e)}function jt(e,t,n,{...r}){const s=Ee(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Tc(e,()=>{const i=fh({startTime:t,...r});return i&&i.end(n),i})}function Mc(e){var g;const t=Gt();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:i}=e,{release:o,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),d=u==null?void 0:u.getReplayId(),l=ot(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:o,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":(g=U.navigator)==null?void 0:g.userAgent,"client.address":c?"{{auto}}":void 0,...s};return fh({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function Hi(){return U.addEventListener&&U.performance}function pe(e){return e/1e3}function Ch(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function Rh(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function xh(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}Rc(()=>{s("pagehide")});const i=e.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(s("navigation"),Wl(i,o))}),o=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,Wl(o)})}function Wl(...e){e.forEach(t=>t&&setTimeout(t,0))}function wT(e){let t=0,n;if(!Rh("layout-shift"))return;const r=xc(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(t=s.value,n=i)},!0);xh(e,(s,i)=>{kT(t,n,i,s),r()})}function kT(e,t,n,r){var u;qn&&le.log(`Sending CLS span (${e})`);const s=pe((it()||0)+((t==null?void 0:t.startTime)||0)),i=ot().getScopeData().transactionName,o=t?Wt((u=t.sources[0])==null?void 0:u.node):"Layout shift",a={[ke]:"auto.http.browser.cls",[dn]:"ui.webvital.cls",[Pi]:(t==null?void 0:t.duration)||0,"sentry.pageload.span_id":n,"sentry.report_event":r};t!=null&&t.sources&&t.sources.forEach((d,l)=>{a[`cls.source.${l+1}`]=Wt(d.node)});const c=Mc({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Gr]:"",[Vr]:e}),c.end(s))}function CT(e){let t=0,n;if(!Rh("largest-contentful-paint"))return;const r=Ac(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(t=s.value,n=i)},!0);xh(e,(s,i)=>{RT(t,n,i,s),r()})}function RT(e,t,n,r){qn&&le.log(`Sending LCP span (${e})`);const s=pe((it()||0)+((t==null?void 0:t.startTime)||0)),i=ot().getScopeData().transactionName,o=t?Wt(t.element):"Largest contentful paint",a={[ke]:"auto.http.browser.lcp",[dn]:"ui.webvital.lcp",[Pi]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Wt(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=Mc({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Gr]:"millisecond",[Vr]:e}),c.end(s))}const xT=2147483647;let jl=0,ze={},Ce,kn;function AT({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=Hi();if(r&&it()){r.mark&&U.performance.mark("sentry-tracing-init");const s=t?CT(n):OT(),i=DT(),o=e?wT(n):LT();return()=>{s==null||s(),i(),o==null||o()}}return()=>{}}function MT(){fn("longtask",({entries:e})=>{const t=Sn();if(!t)return;const{op:n,start_timestamp:r}=Ee(t);for(const s of e){const i=pe(it()+s.startTime),o=pe(s.duration);n==="navigation"&&r&&i<r||jt(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ke]:"auto.ui.browser.metrics"}})}})}function NT(){new PerformanceObserver(t=>{const n=Sn();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=pe(it()+r.startTime),{start_timestamp:i,op:o}=Ee(n);if(o==="navigation"&&i&&s<i)continue;const a=pe(r.duration),c={[ke]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),jt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function $T(){fn("event",({entries:e})=>{const t=Sn();if(t){for(const n of e)if(n.name==="click"){const r=pe(it()+n.startTime),s=pe(n.duration),i={name:Wt(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[ke]:"auto.ui.browser.metrics"}},o=Kv(n.target);o&&(i.attributes["ui.component_name"]=o),jt(t,r,r+s,i)}}})}function LT(){return xc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ze.cls={value:e.value,unit:""},kn=t)},!0)}function OT(){return Ac(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ze.lcp={value:e.value,unit:"millisecond"},Ce=t)},!0)}function DT(){return ST(({metric:e})=>{e.entries[e.entries.length-1]&&(ze.ttfb={value:e.value,unit:"millisecond"})})}function PT(e,t){const n=Hi(),r=it();if(!(n!=null&&n.getEntries)||!r)return;const s=pe(r),i=n.getEntries(),{op:o,start_timestamp:a}=Ee(e);i.slice(jl).forEach(c=>{const u=pe(c.startTime),d=pe(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{UT(e,c,s);break}case"mark":case"paint":case"measure":{FT(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Cc(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(ze.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(ze.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{jT(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),jl=Math.max(i.length-1,0),zT(e),o==="pageload"&&(GT(ze),t.recordClsOnPageloadSpan||delete ze.cls,t.recordLcpOnPageloadSpan||delete ze.lcp,Object.entries(ze).forEach(([c,u])=>{U0(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",nr()),qT(e,t)),Ce=void 0,kn=void 0,ze={}}function FT(e,t,n,r,s,i){if(["mark","measure"].includes(t.entryType)&&Zv(t.name,i))return;const o=Kr(!1),a=pe(o?o.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[ke]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),BT(l,t),c<=d&&jt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function BT(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&xl(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(xl(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function UT(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ps(e,t,r,n)}),ps(e,t,"secureConnection",n,"TLS/SSL"),ps(e,t,"fetch",n,"cache"),ps(e,t,"domainLookup",n,"DNS"),WT(e,t,n)}function ps(e,t,n,r,s=n){const i=HT(n),o=t[i],a=t[`${n}Start`];!a||!o||jt(e,r+pe(a),r+pe(o),{op:`browser.${s}`,name:t.name,attributes:{[ke]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function HT(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function WT(e,t,n){const r=n+pe(t.requestStart),s=n+pe(t.responseEnd),i=n+pe(t.responseStart);t.responseEnd&&(jt(e,r,s,{op:"browser.request",name:t.name,attributes:{[ke]:"auto.ui.browser.metrics"}}),jt(e,i,s,{op:"browser.response",name:t.name,attributes:{[ke]:"auto.ui.browser.metrics"}}))}function jT(e,t,n,r,s,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(o!=null&&o.includes(a))return;const c=X0(n),u={[ke]:"auto.resource.browser.metrics"};ko(u,t,"transferSize","http.response_transfer_size"),ko(u,t,"encodedBodySize","http.response_content_length"),ko(u,t,"decodedBodySize","http.decoded_response_content_length");const d=t.deliveryType;d!=null&&(u["http.response_delivery_type"]=d);const l=t.renderBlockingStatus;if(l&&(u["resource.render_blocking_status"]=l),c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=n.includes(U.location.origin),t.nextHopProtocol!=null){const{name:h,version:m}=Ch(t.nextHopProtocol);u["network.protocol.name"]=h,u["network.protocol.version"]=m}const f=i+r,p=f+s;jt(e,f,p,{name:n.replace(U.location.origin,""),op:a,attributes:u})}function zT(e){const t=U.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),wo(n.rtt)&&(ze["connection.rtt"]={value:n.rtt,unit:"millisecond"})),wo(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),wo(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function qT(e,t){Ce&&t.recordLcpOnPageloadSpan&&(Ce.element&&e.setAttribute("lcp.element",Wt(Ce.element)),Ce.id&&e.setAttribute("lcp.id",Ce.id),Ce.url&&e.setAttribute("lcp.url",Ce.url.trim().slice(0,200)),Ce.loadTime!=null&&e.setAttribute("lcp.loadTime",Ce.loadTime),Ce.renderTime!=null&&e.setAttribute("lcp.renderTime",Ce.renderTime),e.setAttribute("lcp.size",Ce.size)),kn!=null&&kn.sources&&t.recordClsOnPageloadSpan&&kn.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Wt(n.node)))}function ko(e,t,n,r){const s=t[n];s!=null&&s<xT&&(e[r]=s)}function GT(e){const t=Kr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function VT(){return Hi()&&it()?fn("element",YT):()=>{}}const YT=({entries:e})=>{const t=Sn(),n=t?Ge(t):void 0,r=n?Ee(n).description:ot().getScopeData().transactionName;e.forEach(s=>{var p,h;const i=s;if(!i.identifier)return;const o=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[pe(c),"load-time"]:a?[pe(a),"render-time"]:[Lt(),"entry-emission"],l=o==="image-paint"?pe(Math.max(0,(a??0)-(c??0))):0,f={[ke]:"auto.ui.browser.elementtiming",[dn]:"ui.elementtiming",[Tr]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":((h=(p=i.element)==null?void 0:p.tagName)==null?void 0:h.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};G0({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},m=>{m.end(u+l)})})},XT=1e3;let zl,ma,ga;function Ah(e){const t="dom";gc(t,e),_c(t,KT)}function KT(){if(!U.document)return;const e=vr.bind(null,"dom"),t=ql(e,!0);U.document.addEventListener("click",t,!1),U.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var i,o;const s=(i=U[n])==null?void 0:i.prototype;(o=s==null?void 0:s.hasOwnProperty)!=null&&o.call(s,"addEventListener")&&(si(s,"addEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=l[c]=l[c]||{refCount:0};if(!f.handler){const p=ql(e);f.handler=p,a.call(this,c,p,d)}f.refCount++}catch{}return a.call(this,c,u,d)}}),si(s,"removeEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},f=l[c];f&&(f.refCount--,f.refCount<=0&&(a.call(this,c,f.handler,d),f.handler=void 0,delete l[c]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,u,d)}}))})}function JT(e){if(e.type!==ma)return!1;try{if(!e.target||e.target._sentryId!==ga)return!1}catch{}return!0}function ZT(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ql(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=QT(n);if(ZT(n.type,r))return;vt(n,"_sentryCaptured",!0),r&&!r._sentryId&&vt(r,"_sentryId",sn());const s=n.type==="keypress"?"input":n.type;JT(n)||(e({event:n,name:s,global:t}),ma=n.type,ga=r?r._sentryId:void 0),clearTimeout(zl),zl=U.setTimeout(()=>{ga=void 0,ma=void 0},XT)}}function QT(e){try{return e.target}catch{return null}}let hs;function Wi(e){const t="history";gc(t,e),_c(t,eI)}function eI(){if(U.addEventListener("popstate",()=>{const t=U.location.href,n=hs;if(hs=t,n===t)return;vr("history",{from:n,to:t})}),!K0())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=hs,i=tI(String(r));if(hs=i,s===i)return t.apply(this,n);vr("history",{from:s,to:i})}return t.apply(this,n)}}si(U.history,"pushState",e),si(U.history,"replaceState",e)}function tI(e){try{return new URL(e,U.location.origin).toString()}catch{return e}}const Bs={};function Nc(e){const t=Bs[e];if(t)return t;let n=U[e];if(J0(n))return Bs[e]=n.bind(U);const r=U.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i!=null&&i[e]&&(n=i[e]),r.head.removeChild(s)}catch(s){qn&&le.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Bs[e]=n.bind(U))}function Gl(e){Bs[e]=void 0}function Qr(...e){return Nc("setTimeout")(...e)}const dt="__sentry_xhr_v3__";function $c(e){const t="xhr";gc(t,e),_c(t,nI)}function nI(){if(!U.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,i=Lt()*1e3,o=$t(r[0])?r[0].toUpperCase():void 0,a=rI(r[1]);if(!o||!a)return t.apply(n,r);n[dt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[dt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:Lt()*1e3,startTimestamp:i,xhr:n,virtualError:s};vr("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[dt];return h&&$t(f)&&$t(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[dt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:Lt()*1e3,xhr:n};return vr("xhr",i),t.apply(n,r)}})}function rI(e){if($t(e))return e;try{return e.toString()}catch{}}function Mh(e){return new URLSearchParams(e).toString()}function hi(e,t=le){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Mh(e)];if(!e)return[void 0]}catch(n){return qn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return qn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Lc(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}const Co=[],Us=new Map,sI=60;function iI(){if(Hi()&&it()){const t=oI();return()=>{t()}}return()=>{}}const Vl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function oI(){return Ih(aI)}const aI=({metric:e})=>{if(e.value==null)return;const t=pe(e.value);if(t>sI)return;const n=e.entries.find(h=>h.duration===e.value&&Vl[h.name]);if(!n)return;const{interactionId:r}=n,s=Vl[n.name],i=pe(it()+n.startTime),o=Sn(),a=o?Ge(o):void 0,u=(r!=null?Us.get(r):void 0)||a,d=u?Ee(u).description:ot().getScopeData().transactionName,l=Wt(n.target),f={[ke]:"auto.http.browser.inp",[dn]:`ui.interaction.${s}`,[Pi]:n.duration},p=Mc({name:l,transaction:d,attributes:f,startTime:i});p&&(p.addEvent("inp",{[Gr]:"millisecond",[Vr]:e.value}),p.end(i+t))};function cI(){const e=({entries:t})=>{const n=Sn(),r=n&&Ge(n);t.forEach(s=>{if(!IT(s)||!r)return;const i=s.interactionId;if(i!=null&&!Us.has(i)){if(Co.length>10){const o=Co.shift();Us.delete(o)}Co.push(i),Us.set(i,r)}})};fn("event",e),fn("first-input",e)}function Nh(e,t=Nc("fetch")){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Gl("fetch"),ei("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Gl("fetch"),n-=o,r--,ei(c)}}return Rb(e,s)}const uI=10,lI=20,dI=30,fI=40,pI=50;function Gn(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?tt:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const hI=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,mI=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gI=/\((\S*)(?::(\d+))(?::(\d+))\)/,_I=/at (.+?) ?\(data:(.+?),/,SI=e=>{const t=e.match(_I);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=hI.exec(e);if(n){const[,s,i,o]=n;return Gn(s,tt,+i,+o)}const r=mI.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=gI.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[i,o]=$h(r[1]||tt,r[2]);return Gn(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},yI=[dI,SI],bI=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,EI=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,vI=e=>{const t=bI.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=EI.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||tt;return[s,r]=$h(s,r),Gn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},TI=[pI,vI],II=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,wI=e=>{const t=II.exec(e);return t?Gn(t[2],t[1]||tt,+t[3],t[4]?+t[4]:void 0):void 0},mN=[fI,wI],kI=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,CI=e=>{const t=kI.exec(e);return t?Gn(t[2],t[3]||tt,+t[1]):void 0},gN=[uI,CI],RI=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,xI=e=>{const t=RI.exec(e);return t?Gn(t[5],t[3]||t[4]||tt,+t[1],+t[2]):void 0},_N=[lI,xI],AI=[yI,TI],MI=Af(...AI),$h=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:tt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function SN(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:gn(r)}},i=NI(e);return qt(s,[i])}function NI(e){return[{type:"user_report"},e]}const V=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ms=1024,$I="Breadcrumbs",LI=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:$I,setup(n){t.console&&oc(FI(n)),t.dom&&Ah(PI(n,t.dom)),t.xhr&&$c(BI(n)),t.fetch&&ac(UI(n)),t.history&&Wi(HI(n)),t.sentry&&n.on("beforeSendEvent",DI(n))}}},OI=LI;function DI(e){return function(n){F()===e&&Ht({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Kt(n)},{event:n})}}function PI(e,t){return function(r){if(F()!==e)return;let s,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>ms&&(V&&S.warn(`\`dom.maxStringLength\` cannot exceed ${ms}, but a value of ${a} was configured. Sentry will use ${ms} instead.`),a=ms),typeof o=="string"&&(o=[o]);try{const u=r.event,d=WI(u)?u.target:u;s=Pf(d,{keyAttrs:o,maxStringLength:a}),i=pS(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),Ht(c,{event:r.event,name:r.name,global:r.global})}}function FI(e){return function(n){if(F()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Lp(n.level),message:Vs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Vs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ht(r,{input:n.args,level:n.level})}}function BI(e){return function(n){if(F()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[dt];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,d={method:o,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Wp(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),Ht(f,l)}}function UI(e){return function(n){if(F()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),Ht(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i==null?void 0:i.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i==null||i.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Wp(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),Ht(c,a)}}}function HI(e){return function(n){if(F()!==e)return;let r=n.from,s=n.to;const i=$n(L.location.href);let o=r?$n(r):void 0;const a=$n(s);o!=null&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ht({category:"navigation",data:{from:r,to:s}})}}function WI(e){return!!e&&!!e.target}const jI=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],zI="BrowserApiErrors",qI=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:zI,setupOnce(){t.setTimeout&&Ze(L,"setTimeout",Yl),t.setInterval&&Ze(L,"setInterval",Yl),t.requestAnimationFrame&&Ze(L,"requestAnimationFrame",VI),t.XMLHttpRequest&&"XMLHttpRequest"in L&&Ze(XMLHttpRequest.prototype,"send",YI);const n=t.eventTarget;n&&(Array.isArray(n)?n:jI).forEach(s=>XI(s,t))}}},GI=qI;function Yl(e){return function(...t){const n=t[0];return t[0]=jn(n,{mechanism:{data:{function:Ft(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function VI(e){return function(t){return e.apply(this,[jn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Ft(e)},handled:!1,type:"instrument"}})])}}function YI(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Ze(n,s,function(i){const o={mechanism:{data:{function:s,handler:Ft(i)},handled:!1,type:"instrument"}},a=Ga(i);return a&&(o.mechanism.data.handler=Ft(a)),jn(i,o)})}),e.apply(this,t)}}function XI(e,t){var s,i;const r=(s=L[e])==null?void 0:s.prototype;(i=r==null?void 0:r.hasOwnProperty)!=null&&i.call(r,"addEventListener")&&(Ze(r,"addEventListener",function(o){return function(a,c,u){try{KI(c)&&(c.handleEvent=jn(c.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ft(c),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&JI(this,a,c),o.apply(this,[a,jn(c,{mechanism:{data:{function:"addEventListener",handler:Ft(c),target:e},handled:!1,type:"instrument"}}),u])}}),Ze(r,"removeEventListener",function(o){return function(a,c,u){try{const d=c.__sentry_wrapped__;d&&o.call(this,a,d,u)}catch{}return o.call(this,a,c,u)}}))}function KI(e){return typeof e.handleEvent=="function"}function JI(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const ZI=()=>({name:"BrowserSession",setupOnce(){if(typeof L.document>"u"){V&&S.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}nl({ignoreDuration:!0}),rl(),Wi(({from:e,to:t})=>{e!==void 0&&e!==t&&(nl({ignoreDuration:!0}),rl())})}}),QI="GlobalHandlers",e1=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:QI,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(n1(n),Xl("onerror")),t.onunhandledrejection&&(r1(n),Xl("onunhandledrejection"))}}},t1=e1;function n1(e){Mf(t=>{const{stackParser:n,attachStacktrace:r}=Lh();if(F()!==e||qp())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=o1(dc(n,c||s,void 0,r,!1),i,o,a);u.level="error",Li(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function r1(e){Nf(t=>{const{stackParser:n,attachStacktrace:r}=Lh();if(F()!==e||qp())return;const s=s1(t),i=Ri(s)?i1(s):dc(n,s,void 0,r,!0);i.level="error",Li(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function s1(e){if(Ri(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function i1(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function o1(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=a1(t)??Br();return c.length===0&&c.push({colno:u,filename:l,function:tt,in_app:!0,lineno:d}),e}function Xl(e){V&&S.log(`Global Handler attached: ${e}`)}function Lh(){const e=F();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function a1(e){if(!(!on(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e.slice(0,1024)}}const c1=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!L.navigator&&!L.location&&!L.document)return;const t=cc(),n={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:n}}}),u1="cause",l1=5,d1="LinkedErrors",f1=(e={})=>{const t=e.limit||l1,n=e.key||u1;return{name:d1,preprocessEvent(r,s,i){const o=i.getOptions();nE(uc,o.stackParser,n,t,r,s)}}},p1=f1;function h1(){return m1()?(V&&hn(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function m1(){var i;if(typeof L.window>"u")return!1;const e=L;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((i=t==null?void 0:t.runtime)!=null&&i.id))return!1;const n=Br(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(L===L.top&&r.some(o=>n.startsWith(`${o}://`)))}function g1(e){return[Yb(),zb(),GI(),OI(),t1(),p1(),dE(),c1(),ZI()]}function yN(e={}){const t=!e.skipBrowserExtensionCheck&&h1(),n={...e,enabled:t?!1:e.enabled,stackParser:rS(e.stackParser||MI),integrations:sb({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?g1():e.defaultIntegrations}),transport:e.transport||Nh};return bb(Dv,n)}function bN(){}function EN(e){e()}function vN(e={}){const t=L.document,n=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!n){V&&S.error("[showReportDialog] Global document not defined");return}const r=Q(),s=F(),i=s==null?void 0:s.getDsn();if(!i){V&&S.error("[showReportDialog] DSN not configured");return}const o={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Jy()},a=L.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=nb(i,o);const{onLoad:c,onClose:u}=o;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{L.removeEventListener("message",d)}};L.addEventListener("message",d)}n.appendChild(a)}const _1=z,S1="ReportingObserver",Kl=new WeakMap,y1=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Kl.has(F()))for(const s of r)Ye(i=>{i.setExtra("url",s.url);const o=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(i.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}na(`${o}: ${a}`)})}return{name:S1,setupOnce(){if(!av())return;new _1.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Kl.set(r,!0)}}},TN=y1,b1="HttpClient",E1=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:b1,setup(n){x1(n,t),A1(n,t)}}},IN=E1;function v1(e,t,n,r,s){if(Dh(e,n.status,n.url)){const i=M1(t,r);let o,a,c,u;Fh()&&([o,c]=Jl("Cookie",i),[a,u]=Jl("Set-Cookie",n));const d=Ph({url:i.url,method:i.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:c,responseCookies:u,error:s});Li(d)}}function Jl(e,t){const n=w1(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=Oh(s))}catch{}return[n,r]}function T1(e,t,n,r,s){if(Dh(e,t.status,t.responseURL)){let i,o,a;if(Fh()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(o=Oh(u))}catch{}try{a=k1(t)}catch{}i=r}const c=Ph({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:o,error:s});Li(c)}}function I1(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Oh(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function w1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function k1(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return s&&i&&(n[s]=i),n},{}):{}}function C1(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function R1(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function x1(e,t){jp()&&ac(n=>{if(F()!==e)return;const{response:r,args:s,error:i,virtualError:o}=n,[a,c]=s;r&&v1(t,a,r,c,i||o)},!1)}function A1(e,t){"XMLHttpRequest"in z&&$c(n=>{if(F()!==e)return;const{error:r,virtualError:s}=n,i=n.xhr,o=i[dt];if(!o)return;const{method:a,request_headers:c}=o;try{T1(t,i,a,c,r||s)}catch(u){V&&S.warn("Error while extracting response event form XHR response",u)}})}function Dh(e,t,n){return R1(e.failedRequestStatusCodes,t)&&C1(e.failedRequestTargets,n)&&!$b(n,F())}function Ph(e){const t=F(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,i={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:I1(e.responseHeaders)}}};return yt(i,{type:"http.client",handled:!1}),i}function M1(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Fh(){const e=F();return e?!!e.getOptions().sendDefaultPii:!1}const Ro=z,N1=7,$1="ContextLines",L1=(e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:N1;return{name:$1,processEvent(n){return O1(n,t)}}},wN=L1;function O1(e,t){var a;const n=Ro.document,r=Ro.location&&Hp(Ro.location.href);if(!n||!r)return e;const s=(a=e.exception)==null?void 0:a.values;if(!(s!=null&&s.length))return e;const i=n.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return s.forEach(c=>{const u=c.stacktrace;u!=null&&u.frames&&(u.frames=u.frames.map(d=>D1(d,o,r,t)))}),e}function D1(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||gS(t,e,r),e}const P1="GraphQLClient",F1=e=>({name:P1,setup(t){B1(t,e),U1(t,e)}});function B1(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const i=J(n).data||{};if(!(i[Bt]==="http.client"))return;const c=i[MS]||i["http.url"],u=i[AS]||i["http.method"];if(!on(c)||!on(u))return;const{endpoints:d}=t,l=pt(c,d),f=Uh(r);if(l&&f){const p=Hh(f);if(p){const h=Bh(p);n.updateName(`${u} ${c} (${h})`),n.setAttribute("graphql.document",f)}}})}function U1(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:i,data:o}=n;if(i==="http"&&(s==="fetch"||s==="xhr")){const d=o==null?void 0:o.url,{endpoints:l}=t,f=pt(d,l),p=Uh(r);if(f&&o&&p){const h=Hh(p);if(!o.graphql&&h){const m=Bh(h);o["graphql.document"]=h.query,o["graphql.operation"]=m}}}})}function Bh(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=H1(t);return r?`${s} ${r}`:`${s}`}function Uh(e){const t="xhr"in e;let n;if(t){const r=e.xhr[dt];n=r&&hi(r.body)[0]}else{const r=Lc(e.input);n=hi(r)[0]}return n}function H1(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Hh(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const kN=F1,Ot=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,xe=globalThis,pr="10.5.0";function ji(){return Oc(xe),xe}function Oc(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||pr,t[pr]=t[pr]||{}}function zi(e,t,n=xe){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[pr]=r[pr]||{};return s[e]||(s[e]=t())}const W1="Sentry Logger ",Zl={};function Dc(e){if(!("console"in xe))return e();const t=xe.console,n={},r=Object.keys(Zl);r.forEach(s=>{const i=Zl[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function j1(){Fc().enabled=!0}function z1(){Fc().enabled=!1}function Wh(){return Fc().enabled}function q1(...e){Pc("log",...e)}function G1(...e){Pc("warn",...e)}function V1(...e){Pc("error",...e)}function Pc(e,...t){Ot&&Wh()&&Dc(()=>{xe.console[e](`${W1}[${e}]:`,...t)})}function Fc(){return Ot?zi("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ht={enable:j1,disable:z1,isEnabled:Wh,log:q1,warn:G1,error:V1},xo="<anonymous>";function Y1(e){try{return!e||typeof e!="function"?xo:e.name||xo}catch{return xo}}const jh=Object.prototype.toString;function X1(e){switch(jh.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return qi(e,Error)}}function Bc(e,t){return jh.call(e)===`[object ${t}]`}function mi(e){return Bc(e,"String")}function zh(e){return Bc(e,"Object")}function K1(e){return typeof Event<"u"&&qi(e,Event)}function J1(e){return typeof Element<"u"&&qi(e,Element)}function Z1(e){return Bc(e,"RegExp")}function Uc(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function Q1(e){return zh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function qi(e,t){try{return e instanceof t}catch{return!1}}function ew(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const qh=xe,tw=80;function Hc(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||tw;for(;n&&i++<r&&(u=nw(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function nw(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(qh.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&mi(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function rw(){try{return qh.document.location.href}catch{return""}}function Gh(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function sw(e,t,n=!1){return mi(e)?Z1(t)?t.test(e):mi(t)?n?e===t:e.includes(t):!1:!1}function iw(e,t=[],n=!1){return t.some(r=>sw(e,r,n))}function ow(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&aw(s,r);try{e[t]=s}catch{Ot&&ht.log(`Failed to replace method "${t}" in object`,e)}}function Vh(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ot&&ht.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function aw(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Vh(e,"__sentry_original__",t)}catch{}}function cw(e){if(X1(e))return{message:e.message,name:e.name,stack:e.stack,...ed(e)};if(K1(e)){const t={type:e.type,target:Ql(e.target),currentTarget:Ql(e.currentTarget),...ed(e)};return typeof CustomEvent<"u"&&qi(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Ql(e){try{return J1(e)?Hc(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ed(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function uw(){const e=xe;return e.crypto||e.msCrypto}function Dt(e=uw()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function lw(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function dw(e,t){const n=lw(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s==null?void 0:s.data,...t.data};n.mechanism.data=i}}const Yh=1e3;function Gi(){return Date.now()/Yh}function fw(){const{performance:e}=xe;if(!(e!=null&&e.now)||!e.timeOrigin)return Gi;const t=e.timeOrigin;return()=>(t+e.now())/Yh}let td;function Xh(){return(td??(td=fw()))()}let Ao;function pw(){var d;const{performance:e}=xe;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=(d=e.timing)==null?void 0:d.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function hw(){return Ao||(Ao=pw()),Ao[0]}function mw(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Xh(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Dt()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Vi(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Vi(r[s],t[s],n-1));return r}function nd(){return Dt()}function gw(){return Dt().substring(16)}const _a="_sentrySpan";function rd(e,t){t?Vh(e,_a,t):delete e[_a]}function Sa(e){return e[_a]}const _w=100;class Tt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:nd(),sampleRand:Math.random()}}clone(){const t=new Tt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,rd(t,Sa(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&mw(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Tt?n.getScopeData():zh(n)?t:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,rd(this,void 0),this._attachments=[],this.setPropagationContext({traceId:nd(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const r=typeof n=="number"?n:_w;if(r<=0)return this;const s={timestamp:Gi(),...t,message:t.message?Gh(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Sa(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Vi(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||Dt();if(!this._client)return Ot&&ht.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=(r==null?void 0:r.event_id)||Dt();if(!this._client)return Ot&&ht.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||Dt();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(Ot&&ht.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Sw(){return zi("defaultCurrentScope",()=>new Tt)}function yw(){return zi("defaultIsolationScope",()=>new Tt)}class bw{constructor(t,n){let r;t?r=t:r=new Tt;let s;n?s=n:s=new Tt,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Uc(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Vn(){const e=ji(),t=Oc(e);return t.stack=t.stack||new bw(Sw(),yw())}function Ew(e){return Vn().withScope(e)}function vw(e,t){const n=Vn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function sd(e){return Vn().withScope(()=>e(Vn().getIsolationScope()))}function Tw(){return{withIsolationScope:sd,withScope:Ew,withSetScope:vw,withSetIsolationScope:(e,t)=>sd(t),getCurrentScope:()=>Vn().getScope(),getIsolationScope:()=>Vn().getIsolationScope()}}function Wc(e){const t=Oc(e);return t.acs?t.acs:Tw()}function es(){const e=ji();return Wc(e).getCurrentScope()}function Yi(){const e=ji();return Wc(e).getIsolationScope()}function Iw(){return zi("globalScope",()=>new Tt)}function Xe(){return es().getClient()}const Kh="sentry.source",ww="sentry.sample_rate",kw="sentry.previous_trace_sample_rate",Cw="sentry.op",Rw="sentry.origin",xw=0,Aw=1,Mw="_sentryScope",Nw="_sentryIsolationScope";function Jh(e){return{scope:e[Mw],isolationScope:e[Nw]}}const $w="sentry-",Lw=/^sentry-/;function Ow(e){const t=Dw(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(Lw)){const o=s.slice($w.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Dw(e){if(!(!e||!mi(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=id(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):id(e)}function id(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const Pw=/^o(\d+)\./;function Fw(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Bw(e){const t=e.match(Pw);return t==null?void 0:t[1]}function Uw(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=Bw(n)),r}function od(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Zh=1;function Hw(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:Ir(e).parent_span_id,i=Jh(e).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||gw():t;return{parent_span_id:s,span_id:o,trace_id:n}}function Ww(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Zh,attributes:i,...s}))}function ad(e){return typeof e=="number"?cd(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?cd(e.getTime()):Xh()}function cd(e){return e>9999999999?e/1e3:e}function Ir(e){var r;if(zw(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(jw(e)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:n,data:s,description:o,parent_span_id:d,start_timestamp:ad(i),timestamp:ad(a)||void 0,status:Gw(c),op:s[Cw],origin:s[Rw],links:Ww(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function jw(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function zw(e){return typeof e.getSpanJSON=="function"}function qw(e){const{traceFlags:t}=e.spanContext();return t===Zh}function Gw(e){if(!(!e||e.code===xw))return e.code===Aw?"ok":e.message||"unknown_error"}const Vw="_sentryRootSpan";function jc(e){return e[Vw]||e}function Qh(){const e=ji(),t=Wc(e);return t.getActiveSpan?t.getActiveSpan():Sa(es())}function Yw(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=(n=Xe())==null?void 0:n.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const em="production",Xw="_frozenDsc";function Kw(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||em,release:n.release,public_key:r,trace_id:e,org_id:Uw(t)};return t.emit("createDsc",s),s}function tm(e){var h;const t=Xe();if(!t)return{};const n=jc(e),r=Ir(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[ww]??s[kw];function a(m){return(typeof o=="number"||typeof o=="string")&&(m.sample_rate=`${o}`),m}const c=n[Xw];if(c)return a(c);const u=i==null?void 0:i.get("sentry.dsc"),d=u&&Ow(u);if(d)return a(d);const l=Kw(e.spanContext().traceId,t),f=s[Kh],p=r.description;return f!=="url"&&p&&(l.transaction=p),Yw()&&(l.sampled=String(qw(n)),l.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((h=Jh(n).scope)==null?void 0:h.getPropagationContext().sampleRand.toString())),a(l),t.emit("createDsc",l,n),l}function lt(e,t=100,n=1/0){try{return ya("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ya(e,t,n=1/0,r=1/0,s=Qw()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Jw(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return ya("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=cw(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=ya(p,h,c-1,r,s),l++}return o(t),d}function Jw(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ew(t))return"[VueViewModel]";if(Q1(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Y1(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Zw(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Zw(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function Qw(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function ek(e,t=[]){return[e,t]}function tk(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function nk(e,t,n,r){var i;const s=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Fw(r)},...s&&{trace:s}}}const Mo=0,ud=1,ld=2;function dd(e){return new wr(t=>{t(e)})}class wr{constructor(t){this._state=Mo,this._handlers=[],this._runExecutor(t)}then(t,n){return new wr((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new wr((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===Mo)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===ud&&n[1](this._value),this._state===ld&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===Mo){if(Uc(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(ud,i)},s=i=>{n(ld,i)};try{t(r,s)}catch(i){s(i)}}}function ba(e,t,n,r=0){return new wr((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);Ot&&o.id&&a===null&&ht.log(`Event processor "${o.id}" dropped event`),Uc(a)?a.then(c=>ba(e,c,n,r+1).then(s)).then(null,i):ba(e,a,n,r+1).then(s).then(null,i)}})}function rk(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;sk(e,t),r&&ak(e,r),ck(e,n),ik(e,s),ok(e,i)}function fd(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:h}=t;gs(e,"extra",n),gs(e,"tags",r),gs(e,"user",s),gs(e,"contexts",i),e.sdkProcessingMetadata=Vi(e.sdkProcessingMetadata,a,2),o&&(e.level=o),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function gs(e,t,n){e[t]=Vi(e[t],n,1)}function sk(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function ik(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ok(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function ak(e,t){e.contexts={trace:Hw(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:tm(t),...e.sdkProcessingMetadata};const n=jc(t),r=Ir(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ck(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let _s,pd,Ss;function uk(e){const t=xe._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Ss&&n.length===pd||(pd=n.length,Ss=n.reduce((r,s)=>{_s||(_s={});const i=_s[s];if(i)r[i[0]]=i[1];else{const o=e(s);for(let a=o.length-1;a>=0;a--){const c=o[a],u=c==null?void 0:c.filename,d=t[s];if(u&&d){r[u]=d,_s[s]=[u,d];break}}}return r},{})),Ss}function lk(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Dt(),timestamp:t.timestamp||Gi()},u=n.integrations||e.integrations.map(g=>g.name);dk(c,e),hk(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&fk(c,e.stackParser);const d=gk(r,n.captureContext);n.mechanism&&dw(c,n.mechanism);const l=s?s.getEventProcessors():[],f=Iw().getScopeData();if(i){const g=i.getScopeData();fd(f,g)}if(d){const g=d.getScopeData();fd(f,g)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),rk(c,f);const h=[...l,...f.eventProcessors];return ba(h,c,n).then(g=>(g&&pk(g),typeof o=="number"&&o>0?mk(g,o,a):g))}function dk(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||n||em,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;o!=null&&o.url&&(o.url=Gh(o.url,i))}function fk(e,t){var r,s;const n=uk(t);(s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function pk(e){var r,s;const t={};if((s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?t[c.abs_path]=c.debug_id:c.filename&&(t[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([i,o])=>{n.push({type:"sourcemap",code_file:i,debug_id:o})})}function hk(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function mk(e,t,n){var s,i;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:lt(o.data,t,n)}}))},...e.user&&{user:lt(e.user,t,n)},...e.contexts&&{contexts:lt(e.contexts,t,n)},...e.extra&&{extra:lt(e.extra,t,n)}};return(s=e.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=lt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:lt(o.data,t,n)}}))),(i=e.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=lt(e.contexts.flags,3,n)),r}function gk(e,t){if(!t)return e;const n=e?e.clone():new Tt;return n.update(t),n}function _k(e,t){return es().captureException(e,void 0)}function Sk(e,t){Yi().setContext(e,t)}function yk(e){Yi().addEventProcessor(e)}const bk=60*1e3;function Ek(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?bk:r-t}function vk(e,t){return e[t]||e.all||0}function Tk(e,t,n=Date.now()){return vk(e,t)>n}function Ik(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+Ek(o,r):t===429&&(s.all=r+60*1e3);return s}function wk(e,t){const n=t==null?void 0:t.getDsn(),r=t==null?void 0:t.getOptions().tunnel;return Ck(e,n)||kk(e,r)}function kk(e,t){return t?hd(e)===hd(t):!1}function Ck(e,t){return t?e.includes(t.host):!1}function hd(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Rk(e,t,n){let r,s,i;const o=n!=null&&n.maxWait?Math.max(n.maxWait,t):0,a=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function d(){return s!==void 0||i!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),o&&i===void 0&&(i=a(c,o)),r}return l.cancel=u,l.flush=d,l}const xk=100;function Ak(e,t){const n=Xe(),r=Yi();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=xk}=n.getOptions();if(i<=0)return;const a={timestamp:Gi(),...e},c=s?Dc(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}function Mk(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function Nk(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function $k(){return!Nk()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function md(){return typeof window<"u"&&(!$k()||Lk())}function Lk(){const e=xe.process;return(e==null?void 0:e.type)==="renderer"}const ae=xe,zc="sentryReplaySession",Ok="replay_event",qc="Unable to send Replay",Dk=3e5,Pk=9e5,Fk=5e3,Bk=5500,Uk=6e4,Hk=5e3,Wk=3,gd=15e4,ys=5e3,jk=3e3,zk=300,Gc=2e7,qk=4999,Gk=15e3,_d=36e5;var Vk=Object.defineProperty,Yk=(e,t,n)=>t in e?Vk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sd=(e,t,n)=>Yk(e,typeof t!="symbol"?t+"":t,n),ye=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(ye||{});function Xk(e){return e.nodeType===e.ELEMENT_NODE}function hr(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function mr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Kk(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Jk(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function gi(e){try{const t=e.rules||e.cssRules;return t?Kk(Array.from(t,nm).join("")):null}catch{return null}}function Zk(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],i=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function nm(e){let t;if(eC(e))try{t=gi(e.styleSheet)||Jk(e)}catch{}else if(tC(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=Zk(e)),r&&(n=Qk(n)),r||s)return n}return t||e.cssText}function Qk(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function eC(e){return"styleSheet"in e}function tC(e){return"selectorText"in e}let rm=class{constructor(){Sd(this,"idNodeMap",new Map),Sd(this,"nodeMetaMap",new WeakMap)}getId(t){var r;return t?((r=this.getMeta(t))==null?void 0:r.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function nC(){return new rm}function Xi({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function kr({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Yn(e){return e.toLowerCase()}function Ea(e){return e.toUpperCase()}const yd="__rrweb_original__";function rC(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=yd in i?i[yd]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Vc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Yn(t):null}function _i(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function sm(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,s=n.pathname.match(r);return(s==null?void 0:s[1])??null}const bd={};function im(e){const t=bd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return bd[e]=r.bind(window)}function va(...e){return im("setTimeout")(...e)}function om(...e){return im("clearTimeout")(...e)}function am(e){try{return e.contentDocument}catch{}}let sC=1;const iC=new RegExp("[^a-z0-9-_:]"),Cr=-2;function Yc(){return sC++}function oC(e){if(e instanceof HTMLFormElement)return"form";const t=Yn(e.tagName);return iC.test(t)?"div":t}function aC(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let vn,Ed;const cC=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,uC=/^(?:[a-z+]+:)?\/\//i,lC=/^www\..*/i,dC=/^(data:)([^,]*),(.*)/i;function Si(e,t){return(e||"").replace(cC,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(uC.test(c)||lC.test(c))return`url(${u}${c}${u})`;if(dC.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${aC(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const fC=/^[^ \t\n\r\u000c]+/,pC=/^[, \t\n\r\u000c]+/;function hC(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(pC),!(n>=t.length);){let i=r(fC);if(i.slice(-1)===",")i=Cn(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=Cn(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}const vd=new WeakMap;function Cn(e,t){return!t||t.trim()===""?t:Ki(e,t)}function mC(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ki(e,t){let n=vd.get(e);if(n||(n=e.createElement("a"),vd.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function cm(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Cn(e,r):n==="srcset"?hC(e,r):n==="style"?Si(r,Ki(e)):t==="object"&&n==="data"?Cn(e,r):typeof i=="function"?i(n,r,s):r)}function um(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function lm(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function gC(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Zt(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Zt(e.parentNode,t,n,r+1)}function Rn(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(gC(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Xn(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Zt(o,Rn(r,s)),c<0)return!0;a=Zt(o,Rn(t,n),c>=0?c:1/0)}else{if(a=Zt(o,Rn(t,n)),a<0)return!1;c=Zt(o,Rn(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function _C(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=va(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{om(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return va(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function SC(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=va(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{om(i),r=!0,t()})}function yC(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:_={},inlineImages:y,recordCanvas:x,keepIframeSrcFn:w,newlyAddedElement:C=!1}=t,b=bC(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:ye.Document,childNodes:[],compatMode:e.compatMode}:{type:ye.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:ye.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:b};case e.ELEMENT_NODE:return vC(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:_,inlineImages:y,recordCanvas:x,keepIframeSrcFn:w,newlyAddedElement:C,rootId:b,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return EC(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:b});case e.CDATA_SECTION_NODE:return{type:ye.CDATA,textContent:"",rootId:b};case e.COMMENT_NODE:return{type:ye.Comment,textContent:e.textContent||"",rootId:b};default:return!1}}function bC(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function EC(e,t){var _;const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||(_=e.parentNode.sheet)!=null&&_.cssRules&&(f=gi(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=Si(f,Ki(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=Xn(e,r,i,s,o,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=Xi({type:null,tagName:l,maskInputOptions:c});f=kr({isMasked:Xn(e,r,i,s,o,y),element:e,value:f,maskInputFn:u})}return{type:ye.Text,textContent:f||"",isStyle:p,rootId:d}}function vC(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:_,maskTextSelector:y,unmaskTextSelector:x}=t,w=lm(e,r,s,i),C=oC(e);let b={};const I=e.attributes.length;for(let E=0;E<I;E++){const T=e.attributes[E];T.name&&!um(C,T.name,T.value)&&(b[T.name]=cm(n,C,Yn(T.name),T.value,e,c))}if(C==="link"&&o){const E=Array.from(n.styleSheets).find(B=>B.href===e.href);let T=null;E&&(T=gi(E)),T&&(b.rel=null,b.href=null,b.crossorigin=null,b._cssText=Si(T,E.href))}if(C==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const E=gi(e.sheet);E&&(b._cssText=Si(E,Ki(n)))}if(C==="input"||C==="textarea"||C==="select"||C==="option"){const E=e,T=Vc(E),B=_i(E,Ea(C),T),v=E.checked;if(T!=="submit"&&T!=="button"&&B){const M=Xn(E,g,y,_,x,Xi({type:T,tagName:Ea(C),maskInputOptions:a}));b.value=kr({isMasked:M,element:E,value:B,maskInputFn:u})}v&&(b.checked=v)}if(C==="option"&&(e.selected&&!a.select?b.selected=!0:delete b.selected),C==="canvas"&&f){if(e.__context==="2d")rC(e)||(b.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const E=e.toDataURL(d.type,d.quality),T=n.createElement("canvas");T.width=e.width,T.height=e.height;const B=T.toDataURL(d.type,d.quality);E!==B&&(b.rr_dataURL=E)}}if(C==="img"&&l){vn||(vn=n.createElement("canvas"),Ed=vn.getContext("2d"));const E=e,T=E.currentSrc||E.getAttribute("src")||"<unknown-src>",B=E.crossOrigin,v=()=>{E.removeEventListener("load",v);try{vn.width=E.naturalWidth,vn.height=E.naturalHeight,Ed.drawImage(E,0,0),b.rr_dataURL=vn.toDataURL(d.type,d.quality)}catch(M){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${T}! Error: ${M}`)}E.crossOrigin==="anonymous"&&(B?b.crossOrigin=B:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v)}if((C==="audio"||C==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),w){const{width:E,height:T}=e.getBoundingClientRect();b={class:b.class,rr_width:`${E}px`,rr_height:`${T}px`}}C==="iframe"&&!p(b.src)&&(!w&&!am(e)&&(b.rr_src=b.src),delete b.src);let A;try{customElements.get(C)&&(A=!0)}catch{}return{type:ye.Element,tagName:C,attributes:b,childNodes:[],isSVG:mC(e)||void 0,needBlock:w,rootId:m,isCustom:A}}function oe(e){return e==null?"":e.toLowerCase()}function TC(e,t){if(t.comment&&e.type===ye.Comment)return!0;if(e.type===ye.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&sm(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||oe(e.attributes.name)==="application-name"||oe(e.attributes.rel)==="icon"||oe(e.attributes.rel)==="apple-touch-icon"||oe(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&oe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(oe(e.attributes.property).match(/^(og|twitter|fb):/)||oe(e.attributes.name).match(/^(og|twitter):/)||oe(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(oe(e.attributes.name)==="robots"||oe(e.attributes.name)==="googlebot"||oe(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(oe(e.attributes.name)==="author"||oe(e.attributes.name)==="generator"||oe(e.attributes.name)==="framework"||oe(e.attributes.name)==="publisher"||oe(e.attributes.name)==="progid"||oe(e.attributes.property).match(/^article:/)||oe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(oe(e.attributes.name)==="google-site-verification"||oe(e.attributes.name)==="yandex-verification"||oe(e.attributes.name)==="csrf-token"||oe(e.attributes.name)==="p:domain_verify"||oe(e.attributes.name)==="verify-v1"||oe(e.attributes.name)==="verification"||oe(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function xn(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:x={},inlineImages:w=!1,recordCanvas:C=!1,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:A=5e3,onStylesheetLoad:E,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:B=()=>!1,newlyAddedElement:v=!1}=t;let{preserveWhiteSpace:M=!0}=t;const j=yC(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,dataURLOptions:x,inlineImages:w,recordCanvas:C,keepIframeSrcFn:B,newlyAddedElement:v});if(!j)return console.warn(e,"not serialized"),null;let $;r.hasNode(e)?$=r.getId(e):TC(j,y)||!M&&j.type===ye.Text&&!j.isStyle&&!j.textContent.replace(/^\s+|\s+$/gm,"").length?$=Cr:$=Yc();const R=Object.assign(j,{id:$});if(r.add(e,R),$===Cr)return null;b&&b(e);let O=!f;if(R.type===ye.Element){O=O&&!R.needBlock,delete R.needBlock;const N=e.shadowRoot;N&&mr(N)&&(R.isShadowHost=!0)}if((R.type===ye.Document||R.type===ye.Element)&&O){y.headWhitespace&&R.type===ye.Element&&R.tagName==="head"&&(M=!1);const N={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:x,inlineImages:w,recordCanvas:C,preserveWhiteSpace:M,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:B};for(const W of Array.from(e.childNodes)){const Y=xn(W,N);Y&&R.childNodes.push(Y)}if(Xk(e)&&e.shadowRoot)for(const W of Array.from(e.shadowRoot.childNodes)){const Y=xn(W,N);Y&&(mr(e.shadowRoot)&&(Y.isShadow=!0),R.childNodes.push(Y))}}return e.parentNode&&hr(e.parentNode)&&mr(e.parentNode)&&(R.isShadow=!0),R.type===ye.Element&&R.tagName==="iframe"&&!lm(e,s,i,o)&&_C(e,()=>{const N=am(e);if(N&&I){const W=xn(N,{doc:N,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:x,inlineImages:w,recordCanvas:C,preserveWhiteSpace:M,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:B});W&&I(e,W)}},A),R.type===ye.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&sm(R.attributes.href)==="css")&&SC(e,()=>{if(E){const N=xn(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:x,inlineImages:w,recordCanvas:C,preserveWhiteSpace:M,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:A,onStylesheetLoad:E,stylesheetLoadTimeout:T,keepIframeSrcFn:B});N&&E(e,N)}},T),R}function IC(e,t){const{mirror:n=new rm,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOM:y=!1,dataURLOptions:x,preserveWhiteSpace:w,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:E,keepIframeSrcFn:T=()=>!1}=t||{};return xn(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:y==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:y===!1?{}:y,dataURLOptions:x,inlineImages:f,recordCanvas:p,preserveWhiteSpace:w,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:I,onStylesheetLoad:A,stylesheetLoadTimeout:E,keepIframeSrcFn:T,newlyAddedElement:!1})}function we(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Tn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Td={map:{},getId(){return console.error(Tn),-1},getNode(){return console.error(Tn),null},removeNodeFromMap(){console.error(Tn)},has(){return console.error(Tn),!1},reset(){console.error(Tn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Td=new Proxy(Td,{get(e,t,n){return t==="map"&&console.error(Tn),Reflect.get(e,t,n)}}));function Rr(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(MC(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Ji(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function dm(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){Ji(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>dm(e,t,i||{},!0)}function Xc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let yi=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(yi=()=>new Date().getTime());function fm(e){var n,r,s,i,o,a;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((r=(n=t==null?void 0:t.body)==null?void 0:n.parentElement)==null?void 0:r.scrollLeft)||((s=t==null?void 0:t.body)==null?void 0:s.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((o=(i=t==null?void 0:t.body)==null?void 0:i.parentElement)==null?void 0:o.scrollTop)||((a=t==null?void 0:t.body)==null?void 0:a.scrollTop)||0}}function pm(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function hm(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function mm(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Me(e,t,n,r,s){if(!e)return!1;const i=mm(e);if(!i)return!1;const o=Rn(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=Zt(i,o);let c=-1;return a<0?!1:(r&&(c=Zt(i,Rn(null,r))),a>-1&&c<0?!0:a<c)}function wC(e,t){return t.getId(e)!==-1}function No(e,t){return t.getId(e)===Cr}function gm(e,t){if(hr(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?gm(e.parentNode,t):!0:!0}function Ta(e){return!!e.changedTouches}function kC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function _m(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Sm(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Ia(e){return!!(e!=null&&e.shadowRoot)}class CC{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ym(e){var n,r;let t=null;return((r=(n=e.getRootNode)==null?void 0:n.call(e))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function RC(e){let t=e,n;for(;n=ym(t);)t=n;return t}function xC(e){const t=e.ownerDocument;if(!t)return!1;const n=RC(e);return t.contains(n)}function bm(e){const t=e.ownerDocument;return t?t.contains(e)||xC(e):!1}const Id={};function Kc(e){const t=Id[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return Id[e]=r.bind(window)}function AC(...e){return Kc("requestAnimationFrame")(...e)}function Ji(...e){return Kc("setTimeout")(...e)}function MC(...e){return Kc("clearTimeout")(...e)}var q=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(q||{}),H=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(H||{}),Ie=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ie||{}),ut=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ut||{}),In=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(In||{});function Jc(e){try{return e.contentDocument}catch{}}function NC(e){try{return e.contentWindow}catch{}}function wd(e){return"__ln"in e}class $C{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&wd(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&wd(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const kd=(e,t)=>`${e}@${t}`;class LC{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new $C,s=c=>{let u=c,d=Cr;for(;d===Cr;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!bm(c))return;const u=hr(c.parentNode)?this.mirror.getId(ym(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=xn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{_m(f,this.mirror)&&!Me(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Sm(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Ia(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Me(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Cd(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Rd(this.droppedSet,c)&&!Cd(this.removes,c,this.mirror)||Rd(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),d=s(o.value);u!==-1&&d!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!No(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Me(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Xn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,mm(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const o=Vc(n),a=n.tagName;s=_i(n,a,o);const c=Xi({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),u=Xn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=kr({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(Me(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Jc(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!um(n.tagName,r)&&(i.attributes[r]=cm(this.doc,Yn(n.tagName),Yn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Me(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=hr(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Me(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||No(n,this.mirror)||!wC(n,this.mirror)||(this.addedSet.has(n)?(wa(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||gm(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[kd(r,s)]?wa(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:hr(t.target)&&mr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(No(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[kd(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Me(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Ia(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function wa(e,t){e.delete(t),t.childNodes.forEach(n=>wa(e,n))}function Cd(e,t,n){return e.length===0?!1:OC(e,t,n)}function OC(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(i=>i.id===s))return!0;r=r.parentNode}return!1}function Rd(e,t){return e.size===0?!1:Em(e,t)}function Em(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Em(e,n):!1}let gr;function DC(e){gr=e}function PC(){gr=void 0}const K=e=>gr?(...n)=>{try{return e(...n)}catch(r){if(gr&&gr(r)===!0)return()=>{};throw r}}:e,An=[];function ts(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function vm(e,t){var o,a;const n=new LC;An.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=(a=(o=window==null?void 0:window.Zone)==null?void 0:o.__symbol__)==null?void 0:a.call(o,"MutationObserver");s&&window[s]&&(r=window[s]);const i=new r(K(c=>{e.onMutation&&e.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function FC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Rr(K(l=>{const f=Date.now()-a;e(o.map(p=>(p.timeOffset-=f,p)),l),o=[],a=null}),i),u=K(Rr(K(l=>{const f=ts(l),{clientX:p,clientY:h}=Ta(l)?l.changedTouches[0]:l;a||(a=yi()),o.push({x:p,y:h,id:r.getId(f),timeOffset:yi()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?H.Drag:l instanceof MouseEvent?H.MouseMove:H.TouchMove)}),s,{trailing:!1})),d=[we("mousemove",u,n),we("touchmove",u,n),we("drag",u,n)];return K(()=>{d.forEach(l=>l())})}function BC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=ts(f);if(Me(p,r,s,i,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=ut.Mouse;break;case"touch":h=ut.Touch;break;case"pen":h=ut.Pen;break}h===ut.Touch?Ie[l]===Ie.MouseDown?m="TouchStart":Ie[l]===Ie.MouseUp&&(m="TouchEnd"):ut.Pen}else Ta(f)&&(h=ut.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===ut.Touch||m.startsWith("Mouse")&&h===ut.Mouse)&&(h=null)):Ie[l]===Ie.Click&&(h=u,u=null);const g=Ta(f)?f.changedTouches[0]:f;if(!g)return;const _=n.getId(p),{clientX:y,clientY:x}=g;K(e)({type:Ie[m],id:_,x:y,y:x,...h!==null&&{pointerType:h}})};return Object.keys(Ie).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Yn(l);const p=d(l);if(window.PointerEvent)switch(Ie[l]){case Ie.MouseDown:case Ie.MouseUp:f=f.replace("mouse","pointer");break;case Ie.TouchStart:case Ie.TouchEnd:return}c.push(we(f,p,t))}),K(()=>{c.forEach(l=>l())})}function Tm({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=K(Rr(K(c=>{const u=ts(c);if(!u||Me(u,r,s,i,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=fm(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return we("scroll",a,t)}function UC({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=K(Rr(K(()=>{const i=pm(),o=hm();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return we("resize",s,t)}const HC=["INPUT","TEXTAREA","SELECT"],xd=new WeakMap;function WC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(I){let A=ts(I);const E=I.isTrusted,T=A&&Ea(A.tagName);if(T==="OPTION"&&(A=A.parentElement),!A||!T||HC.indexOf(T)<0||Me(A,r,s,i,!0))return;const B=A;if(B.classList.contains(o)||a&&B.matches(a))return;const v=Vc(A);let M=_i(B,T,v),j=!1;const $=Xi({maskInputOptions:c,tagName:T,type:v}),R=Xn(A,f,h,p,m,$);(v==="radio"||v==="checkbox")&&(j=A.checked),M=kr({isMasked:R,element:A,value:M,maskInputFn:u}),_(A,l?{text:M,isChecked:j,userTriggered:E}:{text:M,isChecked:j});const O=A.name;v==="radio"&&O&&j&&t.querySelectorAll(`input[type="radio"][name="${O}"]`).forEach(N=>{if(N!==A){const W=kr({isMasked:R,element:N,value:_i(N,T,v),maskInputFn:u});_(N,l?{text:W,isChecked:!j,userTriggered:!1}:{text:W,isChecked:!j})}})}function _(I,A){const E=xd.get(I);if(!E||E.text!==A.text||E.isChecked!==A.isChecked){xd.set(I,A);const T=n.getId(I);K(e)({...A,id:T})}}const x=(d.input==="last"?["change"]:["input","change"]).map(I=>we(I,K(g),t)),w=t.defaultView;if(!w)return()=>{x.forEach(I=>I())};const C=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),b=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return C&&C.set&&x.push(...b.map(I=>dm(I[0],I[1],{set(){K(g)({target:this,isTrusted:!1})}},!1,w))),K(()=>{x.forEach(I=>I())})}function bi(e){const t=[];function n(r,s){if(bs("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||bs("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||bs("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||bs("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function Rt(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function jC({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:K((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=Rt(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:K((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Rt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:K((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Rt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:K((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Rt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};Es("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Es("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Es("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Es("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:K((f,p,h)=>{const[m,g]=h,{id:_,styleId:y}=Rt(p.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&e({id:_,styleId:y,adds:[{rule:m,index:[...bi(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:K((f,p,h)=>{const[m]=h,{id:g,styleId:_}=Rt(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||_&&_!==-1)&&e({id:g,styleId:_,removes:[{index:[...bi(p),m]}]}),f.apply(p,h)})})}),K(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Im({mirror:e,stylesheetManager:t},n){var o,a,c;let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?(o=n.defaultView)==null?void 0:o.Document:(c=(a=n.ownerDocument)==null?void 0:a.defaultView)==null?void 0:c.ShadowRoot,i=s!=null&&s.prototype?Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var u;return(u=i.get)==null?void 0:u.call(this)},set(u){var l;const d=(l=i.set)==null?void 0:l.call(this,u);if(r!==null&&r!==-1)try{t.adoptStyleSheets(u,r)}catch{}return d}}),K(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function zC({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:K((a,c,u)=>{var m;const[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);const{id:p,styleId:h}=Rt((m=c.parentRule)==null?void 0:m.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:bi(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:K((a,c,u)=>{var p;const[d]=u;if(n.has(d))return o.apply(c,[d]);const{id:l,styleId:f}=Rt((p=c.parentRule)==null?void 0:p.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:bi(c.parentRule)}),a.apply(c,u)})}),K(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function qC({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=K(u=>Rr(K(d=>{const l=ts(d);if(!l||Me(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),i.media||500)),c=[we("play",a(In.Play),o),we("pause",a(In.Pause),o),we("seeked",a(In.Seeked),o),we("volumechange",a(In.VolumeChange),o),we("ratechange",a(In.RateChange),o)];return K(()=>{c.forEach(u=>u())})}function GC({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){const l=new i(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const o=Xc(t.fonts,"add",function(a){return function(c){return Ji(K(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),K(()=>{r.forEach(a=>a())})}function VC(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=K(()=>{const u=t.getSelection();if(!u||a&&(u!=null&&u.isCollapsed))return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:_}=p;Me(h,r,s,i,!0)||Me(g,r,s,i,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:_})}o({ranges:d})});return c(),we("selectionchange",c)}function YC({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Xc(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function XC(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=vm(e,e.doc));const s=FC(e),i=BC(e),o=Tm(e),a=UC(e,{win:n}),c=WC(e),u=qC(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=jC(e,{win:n}),l=Im(e,e.doc),f=zC(e,{win:n}),e.collectFonts&&(p=GC(e)));const h=VC(e),m=YC(e),g=[];for(const _ of e.plugins)g.push(_.observer(_.callback,n,_.options));return K(()=>{An.forEach(_=>_.reset()),r==null||r.disconnect(),s(),i(),o(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(_=>_())})}function bs(e){return typeof window[e]<"u"}function Es(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ka{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class KC{constructor(){this.crossOriginIframeMirror=new ka(Yc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class JC{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ka(Yc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ka(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var s,i;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((s=t.contentWindow)==null||s.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,t);const r=Jc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case q.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:q.IncrementalSnapshot,data:{source:H.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case q.Meta:case q.Load:case q.DomContentLoaded:return!1;case q.Plugin:return n;case q.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case q.IncrementalSnapshot:switch(n.data.source){case H.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(s.node,i)}),n.data.removes.forEach(s=>{this.replaceIds(s,t,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,t,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case H.Drag:case H.TouchMove:case H.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case H.ViewportResize:return!1;case H.MediaInteraction:case H.MouseInteraction:case H.Scroll:case H.CanvasMutation:case H.Input:return this.replaceIds(n.data,t,["id"]),n;case H.StyleSheetRule:case H.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case H.Font:return n;case H.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,t,["start","end"])}),n;case H.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)==null||r.forEach(s=>{this.replaceStyleIds(s,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==ye.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class ZC{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class QC{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!mr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=vm({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Tm({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ji(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Im({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Jc(t),r=NC(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Xc(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&bm(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vs=0;vs<Ad.length;vs++)eR[Ad.charCodeAt(vs)]=vs;class Md{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class tR{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new CC,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:nm(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class nR{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,AC(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let de,Ei;var af;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((af=e.contentWindow)==null?void 0:af.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const We=nC();function mt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:_,maskAttributeFn:y,maskInputFn:x,maskTextFn:w,maxCanvasSize:C=null,packFn:b,sampling:I={},dataURLOptions:A={},mousemoveWait:E,recordDOM:T=!0,recordCanvas:B=!1,recordCrossOriginIframes:v=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:j=!1,collectFonts:$=!1,inlineImages:R=!1,plugins:O,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:Y,onMutation:ce,getCanvasManager:Le}=e;DC(Y);const _e=v?window.parent===window:!0;let me=!1;if(!_e)try{window.parent.document&&(me=!1)}catch{me=!0}if(_e&&!t)throw new Error("emit function is required");if(!_e&&!me)return()=>{};E!==void 0&&I.mousemove===void 0&&(I.mousemove=E),We.reset();const Ae=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},at=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};kC();let yn,bn=0;const sr=Z=>{for(const He of O||[])He.eventProcessor&&(Z=He.eventProcessor(Z));return b&&!me&&(Z=b(Z)),Z};de=(Z,He)=>{var De;const X=Z;if(X.timestamp=yi(),(De=An[0])!=null&&De.isFrozen()&&X.type!==q.FullSnapshot&&!(X.type===q.IncrementalSnapshot&&X.data.source===H.Mutation)&&An.forEach(Ke=>Ke.unfreeze()),_e)t==null||t(sr(X),He);else if(me){const Ke={type:"rrweb",event:sr(X),origin:window.location.origin,isCheckout:He};window.parent.postMessage(Ke,"*")}if(X.type===q.FullSnapshot)yn=X,bn=0;else if(X.type===q.IncrementalSnapshot){if(X.data.source===H.Mutation&&X.data.isAttachIframe)return;bn++;const Ke=r&&bn>=r,ne=n&&yn&&X.timestamp-yn.timestamp>n;(Ke||ne)&&to(!0)}};const wt=Z=>{de({type:q.IncrementalSnapshot,data:{source:H.Mutation,...Z}})},ee=Z=>de({type:q.IncrementalSnapshot,data:{source:H.Scroll,...Z}}),Se=Z=>de({type:q.IncrementalSnapshot,data:{source:H.CanvasMutation,...Z}}),Oe=Z=>de({type:q.IncrementalSnapshot,data:{source:H.AdoptedStyleSheet,...Z}}),he=new tR({mutationCb:wt,adoptedStyleSheetCb:Oe}),te=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new KC:new JC({mirror:We,mutationCb:wt,stylesheetManager:he,recordCrossOriginIframes:v,wrappedEmit:de});for(const Z of O||[])Z.getMirror&&Z.getMirror({nodeMirror:We,crossOriginIframeMirror:te.crossOriginIframeMirror,crossOriginIframeStyleMirror:te.crossOriginIframeStyleMirror});const ve=new nR,Vt=sR(Le,{mirror:We,win:window,mutationCb:Z=>de({type:q.IncrementalSnapshot,data:{source:H.CanvasMutation,...Z}}),recordCanvas:B,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:C,sampling:I.canvas,dataURLOptions:A,errorHandler:Y}),ct=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ZC:new QC({mutationCb:wt,scrollCb:ee,bypassOptions:{onMutation:ce,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Ae,dataURLOptions:A,maskAttributeFn:y,maskTextFn:w,maskInputFn:x,recordCanvas:B,inlineImages:R,sampling:I,slimDOMOptions:at,iframeManager:te,stylesheetManager:he,canvasManager:Vt,keepIframeSrcFn:N,processedNodeManager:ve},mirror:We}),to=(Z=!1)=>{if(!T)return;de({type:q.Meta,data:{href:window.location.href,width:hm(),height:pm()}},Z),he.reset(),ct.init(),An.forEach(X=>X.lock());const He=IC(document,{mirror:We,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Ae,maskAttributeFn:y,maskInputFn:x,maskTextFn:w,slimDOM:at,dataURLOptions:A,recordCanvas:B,inlineImages:R,onSerialize:X=>{_m(X,We)&&te.addIframe(X),Sm(X,We)&&he.trackLinkElement(X),Ia(X)&&ct.addShadowRoot(X.shadowRoot,document)},onIframeLoad:(X,De)=>{te.attachIframe(X,De),X.contentWindow&&Vt.addWindow(X.contentWindow),ct.observeAttachShadow(X)},onStylesheetLoad:(X,De)=>{he.attachLinkElement(X,De)},keepIframeSrcFn:N});if(!He)return console.warn("Failed to snapshot the document");de({type:q.FullSnapshot,data:{node:He,initialOffset:fm(window)}}),An.forEach(X=>X.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&he.adoptStyleSheets(document.adoptedStyleSheets,We.getId(document))};Ei=to;try{const Z=[],He=De=>{var Ke;return K(XC)({onMutation:ce,mutationCb:wt,mousemoveCb:(ne,no)=>de({type:q.IncrementalSnapshot,data:{source:no,positions:ne}}),mouseInteractionCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.MouseInteraction,...ne}}),scrollCb:ee,viewportResizeCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.ViewportResize,...ne}}),inputCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.Input,...ne}}),mediaInteractionCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.MediaInteraction,...ne}}),styleSheetRuleCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.StyleSheetRule,...ne}}),styleDeclarationCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.StyleDeclaration,...ne}}),canvasMutationCb:Se,fontCb:ne=>de({type:q.IncrementalSnapshot,data:{source:H.Font,...ne}}),selectionCb:ne=>{de({type:q.IncrementalSnapshot,data:{source:H.Selection,...ne}})},customElementCb:ne=>{de({type:q.IncrementalSnapshot,data:{source:H.CustomElement,...ne}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Ae,inlineStylesheet:h,sampling:I,recordDOM:T,recordCanvas:B,inlineImages:R,userTriggeredOnInput:j,collectFonts:$,doc:De,maskAttributeFn:y,maskInputFn:x,maskTextFn:w,keepIframeSrcFn:N,blockSelector:i,unblockSelector:o,slimDOMOptions:at,dataURLOptions:A,mirror:We,iframeManager:te,stylesheetManager:he,shadowDomManager:ct,processedNodeManager:ve,canvasManager:Vt,ignoreCSSAttributes:W,plugins:((Ke=O==null?void 0:O.filter(ne=>ne.observer))==null?void 0:Ke.map(ne=>({observer:ne.observer,options:ne.options,callback:no=>de({type:q.Plugin,data:{plugin:ne.name,payload:no}})})))||[]},{})};te.addLoadListener(De=>{try{Z.push(He(De.contentDocument))}catch(Ke){console.warn(Ke)}});const X=()=>{to(),Z.push(He(document))};return document.readyState==="interactive"||document.readyState==="complete"?X():(Z.push(we("DOMContentLoaded",()=>{de({type:q.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&X()})),Z.push(we("load",()=>{de({type:q.Load,data:{}}),M==="load"&&X()},window))),()=>{Z.forEach(De=>De()),ve.destroy(),Ei=void 0,PC()}}catch(Z){console.warn(Z)}}function rR(e){if(!Ei)throw new Error("please take full snapshot after start recording");Ei(e)}mt.mirror=We;mt.takeFullSnapshot=rR;function sR(e,t){try{return e?e(t):new Md}catch{return console.warn("Unable to initialize CanvasManager"),new Md}}var Nd;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Nd||(Nd={}));const iR=3,oR=5;function Zc(e){return e>9999999999?e:e*1e3}function $o(e){return e>9999999999?e/1e3:e}function ns(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:q.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:lt(t,10,1e3)}}),t.category==="console")))}const aR="button,a";function wm(e){return e.closest(aR)||e}function km(e){const t=Cm(e);return!t||!(t instanceof Element)?t:wm(t)}function Cm(e){return cR(e)?e.target:e}function cR(e){return typeof e=="object"&&!!e&&"target"in e}let xt;function uR(e){return xt||(xt=[],lR()),xt.push(e),()=>{const t=xt?xt.indexOf(e):-1;t>-1&&xt.splice(t,1)}}function lR(){ow(ae,"open",function(e){return function(...t){if(xt)try{xt.forEach(n=>n())}catch{}return e.apply(ae,t)}})}const dR=new Set([H.Mutation,H.StyleSheetRule,H.StyleDeclaration,H.AdoptedStyleSheet,H.CanvasMutation,H.Selection,H.MediaInteraction]);function fR(e,t,n){e.handleClick(t,n)}class pR{constructor(t,n,r=ns){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=uR(()=>{this._lastMutation=$d()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(mR(n,this._ignoreSelector)||!gR(t))return;const r={timestamp:$o(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=$o(t)}registerScroll(t=Date.now()){this._lastScroll=$o(t)}registerClick(t){const n=wm(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=$d();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:ae.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,d);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:ae.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Qr(()=>this._checkClicks(),1e3)}}const hR=["A","BUTTON","INPUT"];function mR(e,t){return!!(!hR.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function gR(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function $d(){return Date.now()/1e3}function _R(e,t){try{if(!SR(t))return;const{source:n}=t.data;if(dR.has(n)&&e.registerMutation(t.timestamp),n===H.Scroll&&e.registerScroll(t.timestamp),yR(t)){const{type:r,id:s}=t.data,i=mt.mirror.getNode(s);i instanceof HTMLElement&&r===Ie.Click&&e.registerClick(i)}}catch{}}function SR(e){return e.type===iR}function yR(e){return e.data.source===H.MouseInteraction}function et(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Qc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Qc||{});const bR=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function ER(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(bR.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const vR=e=>t=>{if(!e.isEnabled())return;const n=TR(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&(s!=null&&s.target)&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&fR(e.clickDetector,n,km(t.event)),ns(e,n)};function Rm(e,t){const n=mt.mirror.getId(e),r=n&&mt.mirror.getNode(n),s=r&&mt.mirror.getMeta(r),i=s&&wR(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===Qc.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:ER(i.attributes)}}:{}}}function TR(e){const{target:t,message:n}=IR(e);return et({category:`ui.${e.name}`,...Rm(t,n)})}function IR(e){const t=e.name==="click";let n,r=null;try{r=t?km(e.event):Cm(e.event),n=Hc(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function wR(e){return e.type===Qc.Element}function kR(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=CR(t);n&&ns(e,n)}function CR(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||RR(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=Hc(o,{maxStringLength:200})||"<unknown>",d=Rm(o,u);return et({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function RR(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const xR={resource:LR,paint:NR,navigation:$R};function Lo(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function AR(e){return e.map(MR).filter(Boolean)}function MR(e){const t=xR[e.entryType];return t?t(e):null}function Kn(e){return((hw()||ae.performance.timeOrigin)+e)/1e3}function NR(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=Kn(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function $R(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Kn(p),end:Kn(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function LR(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Kn(i),end:Kn(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function OR(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.element?[t.element]:void 0;return eu(e,"largest-contentful-paint",n)}function DR(e){return e.sources!==void 0}function PR(e){const t=[],n=[];for(const r of e.entries)if(DR(r)){const s=[];for(const i of r.sources)if(i.node){n.push(i.node);const o=mt.mirror.getId(i.node);o&&s.push(o)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return eu(e,"cumulative-layout-shift",n,t)}function FR(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.target?[t.target]:void 0;return eu(e,"interaction-to-next-paint",n)}function eu(e,t,n,r){const s=e.value,i=e.rating,o=Kn(s);return{type:"web-vital",name:t,start:o,end:o,data:{value:s,size:s,rating:i,nodeIds:n?n.map(a=>mt.mirror.getId(a)):void 0,attributions:r}}}function BR(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(fn(s,n))}),r.push(Ac(Lo(OR,e)),xc(Lo(PR,e)),Ih(Lo(FR,e))),()=>{r.forEach(s=>s())}}const D=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,UR='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function HR(){const e=new Blob([UR]);return URL.createObjectURL(e)}const Ld=["log","warn","error"],Hs="[Replay] ";function Oo(e,t="info"){Ak({category:"console",data:{logger:"replay"},level:t,message:`${Hs}${e}`},{level:t})}function WR(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return D?(Ld.forEach(r=>{n[r]=(...s)=>{ht[r](Hs,...s),t&&Oo(s.join(""),Mk(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),ht.error(Hs,r),e?_k(r):t&&Oo(r,"error")},n.infoTick=(...r)=>{ht.log(Hs,...r),t&&setTimeout(()=>Oo(r[0]),0)}):Ld.forEach(r=>{n[r]=()=>{}}),n}const P=WR();class tu extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Gc}.`)}}class xm{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Gc)throw new tu;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Zc(t):null}}class jR{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){D&&P.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){D&&P.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class zR{constructor(t){this._worker=new jR(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Zc(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Gc?Promise.reject(new tu):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{D&&P.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class qR{constructor(t){this._fallback=new xm,this._compression=new zR(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){D&&P.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const i of t)s.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(i){D&&P.exception(i,"Failed to add events when switching buffers.")}}}function GR({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=VR(t);if(n)return n}return D&&P.log("Using simple buffer"),new xm}function VR(e){try{const t=e||YR();if(!t)return;D&&P.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new qR(n)}catch(t){D&&P.exception(t,"Failed to create compression worker")}}function YR(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?HR():""}function nu(){try{return"sessionStorage"in ae&&!!ae.sessionStorage}catch{return!1}}function XR(e){KR(),e.session=void 0}function KR(){if(nu())try{ae.sessionStorage.removeItem(zc)}catch{}}function Am(e){return e===void 0?!1:Math.random()<e}function ru(e){if(nu())try{ae.sessionStorage.setItem(zc,JSON.stringify(e))}catch{}}function Mm(e){const t=Date.now(),n=e.id||Dt(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function JR(e,t){return Am(e)?"session":t?"buffer":!1}function Od({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=JR(e,t),i=Mm({sampled:s,previousSessionId:r});return n&&ru(i),i}function ZR(){if(!nu())return null;try{const e=ae.sessionStorage.getItem(zc);if(!e)return null;const t=JSON.parse(e);return D&&P.infoTick("Loading existing session"),Mm(t)}catch{return null}}function Ca(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Nm(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Ca(e.started,t,r)||Ca(e.lastActivity,n,r)}function $m(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Nm(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Do({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&ZR();return s?$m(s,{sessionIdleExpire:e,maxReplayDuration:t})?(D&&P.infoTick("Session in sessionStorage is expired, creating new one..."),Od(r,{previousSessionId:s.id})):s:(D&&P.infoTick("Creating new session"),Od(r,{previousSessionId:n}))}function QR(e){return e.type===q.Custom}function su(e,t,n){return Om(e,t)?(Lm(e,t,n),!0):!1}function ex(e,t,n){return Om(e,t)?Lm(e,t,n):Promise.resolve(null)}async function Lm(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=e.getOptions(),o=tx(t,i.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(i){const o=i&&i instanceof tu,a=o?"addEventSizeExceeded":"addEvent";if(o&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a});const c=Xe();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function Om(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Zc(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(D&&P.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function tx(e,t){try{if(typeof t=="function"&&QR(e))return t(e)}catch(n){return D&&P.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function iu(e){return!e.type}function Ra(e){return e.type==="transaction"}function nx(e){return e.type==="replay_event"}function Dd(e){return e.type==="feedback"}function rx(e){return(t,n)=>{if(!e.isEnabled()||!iu(t)&&!Ra(t))return;const r=n==null?void 0:n.statusCode;if(!(!r||r<200||r>=300)){if(Ra(t)){sx(e,t);return}ix(e,t)}}}function sx(e,t){var r,s;const n=e.getContext();(s=(r=t.contexts)==null?void 0:r.trace)!=null&&s.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function ix(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Qr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function ox(e){return t=>{!e.isEnabled()||!iu(t)||ax(e,t)}}function ax(e,t){var r,s,i;const n=(i=(s=(r=t.exception)==null?void 0:r.values)==null?void 0:s[0])==null?void 0:i.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const o=et({category:"replay.hydrate-error",data:{url:rw()}});ns(e,o)}}function cx(e){const t=Xe();t&&t.on("beforeAddBreadcrumb",n=>ux(e,n))}function ux(e,t){if(!e.isEnabled()||!Dm(t))return;const n=lx(t);n&&ns(e,n)}function lx(e){return!Dm(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?dx(e):et(e)}function dx(e){var s;const t=(s=e.data)==null?void 0:s.arguments;if(!Array.isArray(t)||t.length===0)return et(e);let n=!1;const r=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>ys?(n=!0,`${i.slice(0,ys)}`):i;if(typeof i=="object")try{const o=lt(i,7);return JSON.stringify(o).length>ys?(n=!0,`${JSON.stringify(o,null,2).slice(0,ys)}`):o}catch{}return i});return et({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Dm(e){return!!e.category}function fx(e,t){var n,r,s;return e.type||!((r=(n=e.exception)==null?void 0:n.values)!=null&&r.length)?!1:!!((s=t.originalException)!=null&&s.__rrweb__)}function Pm(){const e=es().getPropagationContext().dsc;e&&delete e.replay_id;const t=Qh();if(t){const n=tm(t);delete n.replay_id}}function px(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:q.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function hx(e,t){return e.recordingMode!=="buffer"||t.message===qc||!t.exception||t.type?!1:Am(e.getOptions().errorSampleRate)}function mx(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:nx(t)?(delete t.breadcrumbs,t):!iu(t)&&!Ra(t)&&!Dd(t)?t:e.checkAndHandleExpiredSession()?Dd(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),px(e,t),t):fx(t,n)&&!e.getOptions()._experiments.captureExceptions?(D&&P.log("Ignoring error from rrweb internals",t),null):((hx(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(Pm(),t),{id:"Replay"})}function Zi(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:q.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function gx(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function _x(e){return t=>{if(!e.isEnabled())return;const n=gx(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Zi(e,[n]),!1)))}}function Sx(e,t){return D&&e.getOptions()._experiments.traceInternals?!1:wk(t,Xe())}function Fm(e,t){e.isEnabled()&&t!==null&&(Sx(e,t.name)||e.addUpdate(()=>(Zi(e,[t]),!0)))}function Qi(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Mh(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Bm(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function vi(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Um(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:i,statusCode:o,request:a,response:c}}}function xr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Pt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=yx(n);return r.body=s,i!=null&&i.length&&(r._meta={warnings:i}),r}function xa(e,t){return Object.entries(e).reduce((n,[r,s])=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=s),n},{})}function yx(e){if(!e||typeof e!="string")return{body:e};const t=e.length>gd,n=bx(e);if(t){const r=e.slice(0,gd);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function bx(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Ti(e,t){const n=Ex(e);return iw(n,t)}function Ex(e,t=ae.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ae.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function vx(e,t,n){try{const r=await Ix(e,t,n),s=Um("resource.fetch",r);Fm(n.replay,s)}catch(r){D&&P.exception(r,"Failed to capture fetch breadcrumb")}}function Tx(e,t){const{input:n,response:r}=t,s=n?Lc(n):void 0,i=Qi(s),o=r?Bm(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function Ix(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Ti(o,n.networkDetailAllowUrls)&&!Ti(o,n.networkDetailDenyUrls),f=l?wx(n,t.input,u):xr(u),p=await kx(l,n,t.response,d);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:p}}function wx({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?xx(n,t):{};if(!e)return Pt(s,r,void 0);const i=Lc(n),[o,a]=hi(i,P),c=Pt(s,r,o);return a?vi(c,a):c}async function kx(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return xr(s);const i=r?Hm(r.headers,n):{};if(!r||!t&&s!==void 0)return Pt(i,s,void 0);const[o,a]=await Rx(r),c=Cx(o,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:i});return a?vi(c,a):c}function Cx(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const i=e!=null&&e.length&&n===void 0?Qi(e):n;return r?t?Pt(s,i,e):Pt(s,i,void 0):xr(i)}catch(i){return D&&P.exception(i,"Failed to serialize response body"),Pt(s,n,void 0)}}async function Rx(e){const t=Ax(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await Mx(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(D&&P.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(D&&P.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Hm(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function xx(e,t){return e.length===1&&typeof e[0]!="string"?Pd(e[0],t):e.length===2?Pd(e[1],t):{}}function Pd(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Hm(n,t):Array.isArray(n)?{}:xa(n,t):{}}function Ax(e){try{return e.clone()}catch(t){D&&P.exception(t,"Failed to clone response body")}}function Mx(e){return new Promise((t,n)=>{const r=Qr(()=>n(new Error("Timeout while trying to read response body")),500);Nx(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function Nx(e){return await e.text()}async function $x(e,t,n){try{const r=Ox(e,t,n),s=Um("resource.xhr",r);Fm(n.replay,s)}catch(r){D&&P.exception(r,"Failed to capture xhr breadcrumb")}}function Lx(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=Qi(r),i=n.getResponseHeader("content-length")?Bm(n.getResponseHeader("content-length")):Bx(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),i!==void 0&&(e.data.response_body_size=i)}function Ox(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Ti(c,n.networkDetailAllowUrls)||Ti(c,n.networkDetailDenyUrls)){const b=xr(l),I=xr(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:b,response:I}}const p=a[dt],h=p?xa(p.request_headers,n.networkRequestHeaders):{},m=xa(Dx(a),n.networkResponseHeaders),[g,_]=n.networkCaptureBodies?hi(o,P):[void 0],[y,x]=n.networkCaptureBodies?Px(a):[void 0],w=Pt(h,l,g),C=Pt(m,f,y);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:_?vi(w,_):w,response:x?vi(C,x):C}}function Dx(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return i&&(n[s.toLowerCase()]=i),n},{}):{}}function Px(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Fx(e.response,e.responseType)}catch(n){t.push(n)}return D&&P.warn("Failed to get xhr response body",...t),[void 0]}function Fx(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return D&&P.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return D&&P.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Bx(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Qi(n)}catch{return}}function Ux(e){const t=Xe();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(c,u)=>Hx(a,c,u))}catch{}}function Hx(e,t,n){if(t.data)try{Wx(t)&&zx(n)&&(Lx(t,n),$x(t,n,e)),jx(t)&&qx(n)&&(Tx(t,n),vx(t,n,e))}catch(r){D&&P.exception(r,"Error when enriching network breadcrumb")}}function Wx(e){return e.category==="xhr"}function jx(e){return e.category==="fetch"}function zx(e){return e==null?void 0:e.xhr}function qx(e){return e==null?void 0:e.response}function Gx(e){const t=Xe();Ah(vR(e)),Wi(_x(e)),cx(e),Ux(e);const n=mx(e);yk(n),t&&(t.on("beforeSendEvent",ox(e)),t.on("afterSendEvent",rx(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{var o;const i=e.getSessionId();s!=null&&s.includeReplay&&e.isEnabled()&&i&&((o=r.contexts)!=null&&o.feedback)&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Vx(e){try{return Promise.all(Zi(e,[Yx(ae.performance.memory)]))}catch{return[]}}function Yx(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Xx(e,t,n){return Rk(e,t,{...n,setTimeoutImpl:Qr})}const Pe=xe.navigator;function Kx(){return/iPhone|iPad|iPod/i.test((Pe==null?void 0:Pe.userAgent)??"")||/Macintosh/i.test((Pe==null?void 0:Pe.userAgent)??"")&&(Pe!=null&&Pe.maxTouchPoints)&&(Pe==null?void 0:Pe.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function Jx(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){D&&P.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&_R(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!su(e,n,s))return!0;if(!s)return!1;const i=e.session;if(Qx(e,s),e.recordingMode==="buffer"&&i&&e.eventBuffer){const o=e.eventBuffer.getEarliestTimestamp();o&&(D&&P.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&ru(i))}return i!=null&&i.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Zx(e){const t=e.getOptions();return{type:q.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Qx(e,t){!t||!e.session||e.session.segmentId!==0||su(e,Zx(e),!1)}function eA(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function tA(e,t,n,r){return ek(nk(e,tk(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function nA({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function rA({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit("preprocessEvent",r,i);const o=await lk(e.getOptions(),r,i,t,e,Yi());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=(a==null?void 0:a.sdk)||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},o}async function sA({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=nA({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=Xe(),f=es(),p=l==null?void 0:l.getTransport(),h=l==null?void 0:l.getDsn();if(!l||!p||!h||!i.sampled)return dd({});const m={type:Ok,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await rA({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),D&&P.log("An event processor returned `null`, will not send event."),dd({});delete g.sdkProcessingMetadata;const _=tA(g,o,h,l.getOptions().tunnel);let y;try{y=await p.send(_)}catch(w){const C=new Error(qc);try{C.cause=w}catch{}throw C}if(typeof y.statusCode=="number"&&(y.statusCode<200||y.statusCode>=300))throw new Wm(y.statusCode);const x=Ik({},y);if(Tk(x,"replay"))throw new ou(x);return y}class Wm extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class ou extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function jm(e,t={count:0,interval:Hk}){const{recordingData:n,onError:r}=e;if(n.length)try{return await sA(e),!0}catch(s){if(s instanceof Wm||s instanceof ou)throw s;if(Sk("Replays",{_retryCount:t.count}),r&&r(s),t.count>=Wk){const i=new Error(`${qc} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{Qr(async()=>{try{await jm(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const zm="__THROTTLED",iA="__SKIPPED";function oA(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const d=o;return o=!0,d?iA:zm}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class aA{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Dk,sessionIdleExpire:Pk},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Xx(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=oA((o,a)=>ex(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(jk,r),timeout:r,scrollTimeout:zk,ignoreSelector:s?s.join(","):""}:void 0;if(i&&(this.clickDetector=new pR(this,i)),D){const o=t._experiments;P.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{ae.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=et({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=et({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{kR(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){D&&P.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){D&&P.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",D&&P.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){D&&P.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){D&&P.log("Buffering is in progress, call `flush()` to save the replay");return}D&&P.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Do({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){D&&P.log("Buffering is in progress, call `flush()` to save the replay");return}D&&P.infoTick("Starting replay in buffer mode");const t=Do({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=mt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:Uk}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Jx(this),...Kx(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){var r;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{D&&P.log(`Stopping Replay${n?` triggered by ${n}`:""}`),Pm(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(r=this.eventBuffer)==null||r.destroy(),this.eventBuffer=null,XR(this)}catch(s){this.handleException(s)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),D&&P.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),D&&P.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();D&&P.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){var t;return(t=this.session)==null?void 0:t.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Ca(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${ae.location.pathname}${ae.location.hash}${ae.location.search}`,n=`${ae.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===zm){const s=et({category:"replay.throttled"});this.addUpdate(()=>!su(this,{type:oR,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||Qh(),n=t&&jc(t),s=(n&&Ir(n).data||{})[Kh];if(!(!n||!s||!["route","custom"].includes(s)))return Ir(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=GR({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Do({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return $m(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{ae.document.addEventListener("visibilitychange",this._handleVisibilityChange),ae.addEventListener("blur",this._handleWindowBlur),ae.addEventListener("focus",this._handleWindowFocus),ae.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Gx(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=BR(this)}_removeListeners(){try{ae.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ae.removeEventListener("blur",this._handleWindowBlur),ae.removeEventListener("focus",this._handleWindowFocus),ae.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||Nm(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){D&&P.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:q.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=AR(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Zi(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var n;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){D&&P.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await Vx(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const s=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await jm({replayId:t,recordingData:o,segmentId:i,eventContext:s,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const s=Xe();if(s){const i=r instanceof ou?"ratelimit_backoff":"send_error";s.recordDroppedEvent(i,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){D&&P.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){D&&P.log(`Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&D&&P.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&ru(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&t.some(a=>{const c=eA(a.target),u=n.join(",");return c==null?void 0:c.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=s&&r>s;if(r>i||o){const a=et({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(a)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function ir(e,t){return[...e,...t].join(",")}function cA({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const i=["base","iframe[srcdoc]:not([src])"],o=ir(e,[".sentry-mask","[data-sentry-mask]"]),a=ir(t,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:ir(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:ir(r,[]),ignoreSelector:ir(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function uA({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Fd='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',lA=["content-length","content-type","accept"];let Bd=!1;const RN=e=>new dA(e);class dA{constructor({flushMinDelay:t=Fk,flushMaxDelay:n=Bk,minReplayDuration:r=qk,maxReplayDuration:s=_d,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:_=[],networkCaptureBodies:y=!0,networkRequestHeaders:x=[],networkResponseHeaders:w=[],mask:C=[],maskAttributes:b=["title","placeholder","aria-label"],unmask:I=[],block:A=[],unblock:E=[],ignore:T=[],maskFn:B,beforeAddRecordingEvent:v,beforeErrorSampling:M,onError:j}={}){this.name="Replay";const $=cA({mask:C,unmask:I,block:A,unblock:E,ignore:T});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:B,maskInputFn:B,maskAttributeFn:(R,O,N)=>uA({maskAttributes:b,maskAllText:u,privacyOptions:$,key:R,value:O,el:N}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:R=>{try{R.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Gk),maxReplayDuration:Math.min(s,_d),stickySession:i,useCompression:o,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:_,networkCaptureBodies:y,networkRequestHeaders:Ud(x),networkResponseHeaders:Ud(w),beforeAddRecordingEvent:v,beforeErrorSampling:M,onError:j,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Fd}`:Fd),this._isInitialized&&md())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Bd}set _isInitialized(t){Bd=t}afterAllSetup(t){!md()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.getSessionId()}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=fA(this._initialOptions,t);this._replay=new aA({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function fA(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=od(n.replaysSessionSampleRate),i=od(n.replaysOnErrorSampleRate);return s==null&&i==null&&Dc(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),i!=null&&(r.errorSampleRate=i),r}function Ud(e){return[...lA,...e.map(t=>t.toLowerCase())]}function xN(){const e=Xe();return e==null?void 0:e.getIntegrationByName("Replay")}var pA=Object.defineProperty,hA=(e,t,n)=>t in e?pA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hd=(e,t,n)=>hA(e,typeof t!="symbol"?t+"":t,n);class mA{constructor(){Hd(this,"idNodeMap",new Map),Hd(this,"nodeMetaMap",new WeakMap)}getId(t){var r;return t?((r=this.getMeta(t))==null?void 0:r.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function gA(){return new mA}function _A(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Aa(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Aa(e.parentNode,t,n,r+1)}function Wd(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(_A(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const wn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let jd={map:{},getId(){return console.error(wn),-1},getNode(){return console.error(wn),null},removeNodeFromMap(){console.error(wn)},has(){return console.error(wn),!1},reset(){console.error(wn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(jd=new Proxy(jd,{get(e,t,n){return t==="map"&&console.error(wn),Reflect.get(e,t,n)}}));function au(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){Gm(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>au(e,t,i||{},!0)}function cu(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function SA(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function eo(e,t,n,r,s){if(!e)return!1;const i=SA(e);if(!i)return!1;const o=Wd(t,n),a=Aa(i,o);let c=-1;return a<0?!1:(r&&(c=Aa(i,Wd(null,r))),a>-1&&c<0?!0:a<c)}const zd={};function qm(e){const t=zd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return zd[e]=r.bind(window)}function Yt(...e){return qm("requestAnimationFrame")(...e)}function Gm(...e){return qm("setTimeout")(...e)}var Jn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Jn||{});let Ws;function yA(e){Ws=e}const Po=e=>Ws?(...n)=>{try{return e(...n)}catch(r){if(Ws&&Ws(r)===!0)return()=>{};throw r}}:e;var Mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ts=0;Ts<Mn.length;Ts++)bA[Mn.charCodeAt(Ts)]=Ts;var EA=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=Mn[t[n]>>2],s+=Mn[(t[n]&3)<<4|t[n+1]>>4],s+=Mn[(t[n+1]&15)<<2|t[n+2]>>6],s+=Mn[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const qd=new Map;function vA(e,t){let n=qd.get(e);return n||(n=new Map,qd.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Vm=(e,t,n)=>{if(!e||!(Xm(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=vA(n,r);let i=s.indexOf(e);return i===-1&&(i=s.length,s.push(e)),i};function js(e,t,n){if(e instanceof Array)return e.map(r=>js(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=EA(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[js(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[js(e.data,t,n),e.width,e.height]};if(Xm(e,t)||typeof e=="object"){const r=e.constructor.name,s=Vm(e,t,n);return{rr_type:r,index:s}}}}return e}const Ym=(e,t,n)=>e.map(r=>js(r,t,n)),Xm=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function TA(e,t,n,r,s){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of o)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=cu(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return eo(this.canvas,n,r,s,!0)||Gm(()=>{const l=Ym(d,t,this);e(this.canvas,{type:Jn["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{const c=au(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Jn["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function IA(e){return e==="experimental-webgl"?"webgl":e}function Gd(e,t,n,r,s){const i=[];try{const o=cu(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!eo(this,t,n,r,!0)){const d=IA(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function Vd(e,t,n,r,s,i,o,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=cu(e,d,function(f){return function(...p){const h=f.apply(this,p);if(Vm(h,a,this),"tagName"in this.canvas&&!eo(this.canvas,r,s,i,!0)){const m=Ym(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch{const l=au(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function wA(e,t,n,r,s,i){const o=[];return o.push(...Vd(t.WebGLRenderingContext.prototype,Jn.WebGL,e,n,r,s,i,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...Vd(t.WebGL2RenderingContext.prototype,Jn.WebGL2,e,n,r,s,i,t)),()=>{o.forEach(a=>a())}}const kA='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function CA(){const e=new Blob([kA]);return URL.createObjectURL(e)}class RA{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(l,f)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(f)};const{sampling:n="all",win:r,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:a,recordCanvas:c,dataURLOptions:u,errorHandler:d}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,d&&yA(d),(c&&typeof n=="number"||t.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(r),!t.enableManualSnapshot&&Po(()=>{c&&n==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),c&&typeof n=="number"&&this.initCanvasFPSObserver(n,s,i,o,a,{dataURLOptions:u})})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:i,recordCanvas:o,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Po(()=>{if(o&&n==="all"&&this.initCanvasMutationObserver(t,r,s,i),o&&typeof n=="number"){const c=Gd(t,r,s,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const t=new Worker(CA());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:i,type:o,width:a,height:c}=r;this.mutationCb({id:s,type:Jn["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:o}]},0,0,a,c]}]})},t}initCanvasFPSObserver(t,n,r,s,i,o){const a=this.takeSnapshot(!1,t,n,r,s,i,o.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(a)})}initCanvasMutationObserver(t,n,r,s){const i=Gd(t,n,r,s,!1),o=TA(this.processMutation.bind(this),t,n,r,s),a=wA(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{i(),o(),a()})}snapshot(t){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.blockClass,n.blockSelector,n.unblockSelector,n.maxCanvasSize,n.dataURLOptions,t);this.restoreHandlers.push(()=>{cancelAnimationFrame(r)})}takeSnapshot(t,n,r,s,i,o,a,c){const u=1e3/n;let d;const l=p=>{if(p)return[p];const h=[],m=g=>{g.querySelectorAll("canvas").forEach(_=>{eo(_,r,s,i)||h.push(_)})};for(const g of this.windows){const _=g.deref();let y;try{y=_&&_.document}catch{}y&&m(y)}for(const g of this.shadowDoms){const _=g.deref();_&&m(_)}return h},f=p=>{if(this.windows.length){if(this.lastSnapshotTime&&p-this.lastSnapshotTime<u){d=Yt(f);return}this.lastSnapshotTime=p,l(c).forEach(h=>{var g;if(!this.mirror.hasNode(h))return;const m=this.mirror.getId(h);if(!this.snapshotInProgressMap.get(m)&&!(!h.width||!h.height)){if(this.snapshotInProgressMap.set(m,!0),!t&&["webgl","webgl2"].includes(h.__context)){const _=h.getContext(h.__context);((g=_==null?void 0:_.getContextAttributes())==null?void 0:g.preserveDrawingBuffer)===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(h).then(_=>{var y;(y=this.worker)==null||y.postMessage({id:m,bitmap:_,width:h.width,height:h.height,dataURLOptions:a,maxCanvasSize:o},[_])}).catch(_=>{Po(()=>{throw _})()})}}),t||(d=Yt(f))}};return d=Yt(f),d}startPendingCanvasMutationFlusher(){Yt(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,Yt(t)};Yt(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Yt(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(o=>{const{type:a,...c}=o;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(t)}}var cf;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((cf=e.contentWindow)==null?void 0:cf.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}gA();var Yd;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Yd||(Yd={}));const Xd={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},xA="ReplayCanvas",Is=1280,AA=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Is):Is,n?Math.min(n,Is):Is]};let s;const i=new Promise(o=>s=o);return{name:xA,getOptions(){const{quality:o,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const d=new RA({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return s(d),d},...Xd[o]||Xd.medium}},async snapshot(o){(await i).snapshot(o)}}},AN=AA;function Je(e=0){return((Ai()||performance.timeOrigin)+e)/1e3}function MA(e){const t=[];if(e.nextHopProtocol!=null){const{name:n,version:r}=Ch(e.nextHopProtocol);t.push(["network.protocol.version",r],["network.protocol.name",n])}return Ai()?[...t,["http.request.redirect_start",Je(e.redirectStart)],["http.request.fetch_start",Je(e.fetchStart)],["http.request.domain_lookup_start",Je(e.domainLookupStart)],["http.request.domain_lookup_end",Je(e.domainLookupEnd)],["http.request.connect_start",Je(e.connectStart)],["http.request.secure_connection_start",Je(e.secureConnectionStart)],["http.request.connection_end",Je(e.connectEnd)],["http.request.request_start",Je(e.requestStart)],["http.request.response_start",Je(e.responseStart)],["http.request.response_end",Je(e.responseEnd)]]:t}const Kd=new WeakMap,Fo=new Map,Km={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function NA(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c}={...Km,...t},u=typeof i=="function"?i:f=>!0,d=f=>LA(f,a),l={};n&&(e.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(p=>{if(p.op==="http.client"){const h=Fo.get(p.span_id);h&&(p.timestamp=h/1e3,Fo.delete(p.span_id))}}),f)),s&&cv(f=>{if(f.response){const p=Kd.get(f.response);p&&f.endTimestamp&&Fo.set(p,f.endTimestamp)}}),ac(f=>{const p=JE(f,u,d,l);if(f.response&&f.fetchData.__span&&Kd.set(f.response,f.fetchData.__span),p){const h=Jm(f.fetchData.url),m=h?$n(h).host:void 0;p.setAttributes({"http.url":h,"server.address":m}),o&&Jd(p),c==null||c(p,{headers:f.headers})}})),r&&$c(f=>{var h;const p=OA(f,u,d,l);if(p){o&&Jd(p);let m;try{m=new Headers((h=f.xhr.__sentry_xhr_v3__)==null?void 0:h.request_headers)}catch{}c==null||c(p,{headers:m})}})}function $A(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Jd(e){const{url:t}=J(e).data;if(!t||typeof t!="string")return;const n=fn("resource",({entries:r})=>{r.forEach(s=>{$A(s)&&s.name.endsWith(t)&&(MA(s).forEach(o=>e.setAttribute(...o)),setTimeout(n))})})}function LA(e,t){const n=Br();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return t?pt(r.toString(),t)||i&&pt(r.pathname,t):i}else{const r=!!e.match(/^\/(?!\/)/);return t?pt(e,t):r}}function OA(e,t,n,r){const s=e.xhr,i=s==null?void 0:s[dt];if(!s||s.__sentry_own_request__||!i)return;const{url:o,method:a}=i,c=Ut()&&t(o);if(e.endTimestamp&&c){const m=s.__sentry_xhr_span_id__;if(!m)return;const g=r[m];g&&i.status_code!==void 0&&(Xs(g,i.status_code),g.end(),delete r[m]);return}const u=Jm(o),d=$n(u||o),l=Hp(o),f=!!st(),p=c&&f?$i({name:`${a} ${l}`,attributes:{url:o,type:"xhr","http.method":a,"http.url":u,"server.address":d==null?void 0:d.host,[nt]:"auto.http.browser",[Bt]:"http.client",...(d==null?void 0:d.search)&&{"http.query":d==null?void 0:d.search},...(d==null?void 0:d.hash)&&{"http.fragment":d==null?void 0:d.hash}}}):new Et;s.__sentry_xhr_span_id__=p.spanContext().spanId,r[s.__sentry_xhr_span_id__]=p,n(o)&&DA(s,Ut()&&f?p:void 0);const h=F();return h&&h.emit("beforeOutgoingRequestSpan",p,e),p}function DA(e,t){const{"sentry-trace":n,baggage:r}=Ap({span:t});n&&PA(e,n,r)}function PA(e,t,n){var s;const r=(s=e.__sentry_xhr_v3__)==null?void 0:s.request_headers;if(!(r!=null&&r["sentry-trace"]))try{if(e.setRequestHeader("sentry-trace",t),n){const i=r==null?void 0:r.baggage;(!i||!FA(i))&&e.setRequestHeader("baggage",n)}}catch{}}function FA(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Jm(e){try{return new URL(e,L.location.origin).href}catch{return}}function BA(){L.document?L.document.addEventListener("visibilitychange",()=>{const e=st();if(!e)return;const t=Re(e);if(L.document.hidden&&t){const n="cancelled",{op:r,status:s}=J(t);V&&S.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:fe,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):V&&S.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const UA=3600,Zm="sentry_previous_trace",HA="sentry.previous_trace";function WA(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?qA():void 0;e.on("spanStart",o=>{if(Re(o)!==o)return;const a=Q().getPropagationContext();s=jA(s,o,a),r&&zA(s)});let i=!0;n&&e.on("beforeSampling",o=>{if(!s)return;const a=Q(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(Ma(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=Ma(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[zf]:s.sampleRate}})}function jA(e,t,n){const r=J(t);function s(){var a,c;try{return Number((a=n.dsc)==null?void 0:a.sample_rate)??Number((c=r.data)==null?void 0:c[Va])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=UA&&(V&&S.log(`Adding previous_trace ${o} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:o,attributes:{[NS]:"previous_trace"}}),t.setAttribute(HA,`${o.traceId}-${o.spanId}-${Ma(o)?1:0}`)),i)}function zA(e){try{L.sessionStorage.setItem(Zm,JSON.stringify(e))}catch(t){V&&S.warn("Could not store previous trace in sessionStorage",t)}}function qA(){var e;try{const t=(e=L.sessionStorage)==null?void 0:e.getItem(Zm);return JSON.parse(t)}catch{return}}function Ma(e){return e.traceFlags===1}const GA="BrowserTracing",VA={...Ls,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...Km},MN=(e={})=>{const t={name:void 0,source:void 0},n=L.document,{enableInp:r,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:_,shouldCreateSpanForRequest:y,enableHTTPTimings:x,ignoreResourceSpans:w,ignorePerformanceApiSpans:C,instrumentPageLoad:b,instrumentNavigation:I,detectRedirects:A,linkPreviousTrace:E,consistentTraceSampling:T,onRequestSpanStart:B}={...VA,...e};let v,M;function j($,R,O=!0){const N=R.op==="pageload",W=d?d(R):R,Y=W.attributes||{};if(R.name!==W.name&&(Y[Qe]="custom",W.attributes=Y),!O){const _e=mn();$i({...W,startTime:_e}).end(_e);return}t.name=W.name,t.source=Y[Qe];const ce=mp(W,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:N,beforeSpanEnd:_e=>{v==null||v(),PT(_e,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:w,ignorePerformanceApiSpans:C}),Qd($,void 0);const me=Q(),Ae=me.getPropagationContext();me.setPropagationContext({...Ae,traceId:ce.spanContext().traceId,sampled:_n(ce),dsc:rt(_e)})}});Qd($,ce);function Le(){n&&["interactive","complete"].includes(n.readyState)&&$.emit("idleSpanEnableAutoFinish",ce)}N&&n&&(n.addEventListener("readystatechange",()=>{Le()}),Le())}return{name:GA,setup($){if(QS(),v=AT({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:$}),r&&iI(),s&&VT(),o&&z.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?NT():i&&MT(),a&&$T(),A&&n){const O=()=>{M=be()};addEventListener("click",O,{capture:!0}),addEventListener("keydown",O,{capture:!0,passive:!0})}function R(){const O=Ar($);O&&!J(O).timestamp&&(V&&S.log(`[Tracing] Finishing current active span with op: ${J(O).op}`),O.setAttribute(Ys,"cancelled"),O.end())}$.on("startNavigationSpan",(O,N)=>{if(F()!==$)return;if(N!=null&&N.isRedirect){V&&S.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),j($,{op:"navigation.redirect",...O},!1);return}M=void 0,R(),Te().setPropagationContext({traceId:bt(),sampleRand:Math.random()});const W=Q();W.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),W.setSDKProcessingMetadata({normalizedRequest:void 0}),j($,{op:"navigation",...O})}),$.on("startPageLoadSpan",(O,N={})=>{if(F()!==$)return;R();const W=N.sentryTrace||Zd("sentry-trace"),Y=N.baggage||Zd("baggage"),ce=tp(W,Y),Le=Q();Le.setPropagationContext(ce),Le.setSDKProcessingMetadata({normalizedRequest:cc()}),j($,{op:"pageload",...O})})},afterAllSetup($){let R=Br();if(E!=="off"&&WA($,{linkPreviousTrace:E,consistentTraceSampling:T}),L.location){if(b){const O=Ai();YA($,{name:L.location.pathname,startTime:O?O/1e3:void 0,attributes:{[Qe]:"url",[nt]:"auto.pageload.browser"}})}I&&Wi(({to:O,from:N})=>{if(N===void 0&&(R==null?void 0:R.indexOf(O))!==-1){R=void 0;return}R=void 0;const W=Up(O),Y=Ar($),ce=Y&&A&&JA(Y,M);XA($,{name:(W==null?void 0:W.pathname)||L.location.pathname,attributes:{[Qe]:"url",[nt]:"auto.navigation.browser"}},{url:O,isRedirect:ce})})}h&&BA(),a&&KA($,l,f,p,t),r&&cI(),NA($,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:_,tracePropagationTargets:$.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:y,enableHTTPTimings:x,onRequestSpanStart:B})}}};function YA(e,t,n){e.emit("startPageLoadSpan",t,n),Q().setTransactionName(t.name);const r=Ar(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function XA(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const i=Q();return i.setTransactionName(t.name),r&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...cc(),url:r}}),Ar(e)}function Zd(e){const t=L.document,n=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function KA(e,t,n,r,s){const i=L.document;let o;const a=()=>{const c="ui.action.click",u=Ar(e);if(u){const d=J(u).op;if(["navigation","pageload"].includes(d)){V&&S.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Ys,"interactionInterrupted"),o.end(),o=void 0),!s.name){V&&S.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=mp({name:s.name,op:c,attributes:{[Qe]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}const Qm="_sentry_idleSpan";function Ar(e){return e[Qm]}function Qd(e,t){Be(e,Qm,t)}const ef=1.5;function JA(e,t){const n=J(e),r=mn(),s=n.start_timestamp;return!(r-s>ef||t&&r-t<=ef)}function Zn(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function ZA(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Zn(n);return s=>r.then(i=>s(i.transaction(t,"readwrite").objectStore(t)))}function uu(e){return Zn(e.getAllKeys())}function QA(e,t,n){return e(r=>uu(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),Zn(r.transaction)}))}function eM(e,t,n){return e(r=>uu(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),Zn(r.transaction)}))}function tM(e){return e(t=>uu(t).then(n=>{const r=n[0];if(r!=null)return Zn(t.get(r)).then(s=>(t.delete(r),Zn(t.transaction).then(()=>s)))}))}function nM(e){let t;function n(){return t==null&&(t=ZA(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Zs(r);await QA(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Zs(r);await eM(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await tM(n());if(r)return cy(r)}catch{}}}}function rM(e){return t=>{const n=e({...t,createStore:nM});return L.addEventListener("online",async r=>{await n.flush()}),n}}function NN(e=Nh){return rM(Ab(e))}const tf=1e6,zs=String(0),sM="main",Fe=L.navigator;let eg="",tg="",ng="",Na=(Fe==null?void 0:Fe.userAgent)||"",rg="";var uf;const iM=(Fe==null?void 0:Fe.language)||((uf=Fe==null?void 0:Fe.languages)==null?void 0:uf[0])||"";function oM(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const nf=Fe==null?void 0:Fe.userAgentData;oM(nf)&&nf.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(eg=e.platform||"",ng=e.architecture||"",rg=e.model||"",tg=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const n=e.fullVersionList[e.fullVersionList.length-1];Na=`${n.brand} ${n.version}`}}).catch(e=>{});function aM(e){return!("thread_metadata"in e)}function cM(e){return aM(e)?dM(e):e}function uM(e){var n,r;const t=(r=(n=e.contexts)==null?void 0:n.trace)==null?void 0:r.trace_id;return typeof t=="string"&&t.length!==32&&V&&S.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function lM(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=uM(r),i=cM(n),o=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:be()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:be()*1e3;return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Mi,runtime:{name:"javascript",version:L.navigator.userAgent},os:{name:eg,version:tg,build_number:Na},device:{locale:iM,model:rg,manufacturer:Na,architecture:ng,is_emulator:!1},debug_meta:{images:hM(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||$e(),trace_id:s,active_thread_id:zs,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function sg(e){return J(e).op==="pageload"}function dM(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[zs]:{name:sM}}},s=e.samples[0];if(!s)return r;const i=s.timestamp,o=Ai(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:o||0,c=a-(o||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*tf).toFixed(0),stack_id:t,thread_id:zs};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-i)*tf).toFixed(0),stack_id:n,thread_id:zs};r.stacks[n]=f,r.samples[d]=p,n++}),r}function fM(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function pM(e){const t=[];return un(e,(n,r)=>{var s,i;if(r==="transaction")for(let o=1;o<n.length;o++){const a=n[o];(i=(s=a==null?void 0:a.contexts)==null?void 0:s.profile)!=null&&i.profile_id&&t.push(n[o])}}),t}function hM(e){const t=F(),n=t==null?void 0:t.getOptions(),r=n==null?void 0:n.stackParser;return r?By(r,e):[]}function mM(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(V&&S.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(V&&S.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function gM(e){return e.samples.length<2?(V&&S.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(V&&S.log("[Profiling] Discarding profile because it contains no frames"),!1)}let ig=!1;const og=3e4;function _M(e){return typeof e=="function"}function SM(){const e=L.Profiler;if(!_M(e)){V&&S.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(og/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{V&&(S.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),S.log("[Profiling] Disabling profiling for current user session.")),ig=!0}}function rf(e){if(ig)return V&&S.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return V&&S.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=F(),n=t==null?void 0:t.getOptions();if(!n)return V&&S.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return mM(r)?r?(r===!0?!0:Math.random()<r)?!0:(V&&S.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(V&&S.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(V&&S.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function yM(e,t,n,r){return gM(n)?lM(e,t,n,r):null}const Qt=new Map;function bM(){return Qt.size}function EM(e){const t=Qt.get(e);return t&&Qt.delete(e),t}function vM(e,t){if(Qt.set(e,t),Qt.size>30){const n=Qt.keys().next().value;Qt.delete(n)}}function sf(e){let t;sg(e)&&(t=be()*1e3);const n=SM();if(!n)return;V&&S.log(`[Profiling] started profiling span: ${J(e).description}`);const r=$e();Q().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n)return n.stop().then(c=>{if(i&&(L.clearTimeout(i),i=void 0),V&&S.log(`[Profiling] stopped profiling of span: ${J(e).description}`),!c){V&&S.log(`[Profiling] profiler returned null profile for: ${J(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}vM(r,c)}).catch(c=>{V&&S.log("[Profiling] error while stopping profiler:",c)})}let i=L.setTimeout(()=>{V&&S.log("[Profiling] max profile duration elapsed, stopping profiling for:",J(e).description),s()},og);const o=e.end.bind(e);function a(){return e?(s().then(()=>{o()},()=>{o()}),e):o()}e.end=a}const TM="BrowserProfiling",IM=()=>({name:TM,setup(e){const t=st(),n=t&&Re(t);n&&sg(n)&&rf(n)&&sf(n),e.on("spanStart",r=>{r===Re(r)&&rf(r)&&sf(r)}),e.on("beforeEnvelope",r=>{var o,a;if(!bM())return;const s=pM(r);if(!s.length)return;const i=[];for(const c of s){const u=c==null?void 0:c.contexts,d=(o=u==null?void 0:u.profile)==null?void 0:o.profile_id,l=(a=u==null?void 0:u.profile)==null?void 0:a.start_timestamp;if(typeof d!="string"){V&&S.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){V&&S.log("[Profiling] cannot find profile for a span without a profile context");continue}u!=null&&u.profile&&delete u.profile;const f=EM(d);if(!f){V&&S.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}const p=yM(d,l,f,c);p&&i.push(p)}fM(r,i)})}}),$N=IM,wM="SpotlightBrowser",kM=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:wM,setup:()=>{V&&S.log("Using Sidecar URL",t)},processEvent:n=>RM(n)?null:n,afterAllSetup:n=>{CM(n,t)}}};function CM(e,t){const n=Nc("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){S.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Zs(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,S.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}const LN=kM;function RM(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:n})=>n==null?void 0:n.includes("#sentry-spotlight")))}const ON=()=>({name:"LaunchDarkly",processEvent(e,t,n){return zr(e)}});function DN(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Hn(e,t.value),Wn(e,t.value)}}}const PN=()=>({name:"OpenFeature",processEvent(e,t,n){return zr(e)}});class FN{after(t,n){Hn(n.flagKey,n.value),Wn(n.flagKey,n.value)}error(t,n,r){Hn(t.flagKey,t.defaultValue),Wn(t.flagKey,t.defaultValue)}}const BN=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Ze(t,"isEnabled",xM)},processEvent(t,n,r){return zr(t)}});function xM(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(Hn(n,r),Wn(n,r)):V&&S.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const UN=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{Hn(n.gate.name,n.gate.value),Wn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return zr(t)}});async function HN(){const e=F();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await wy(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const AM="WebWorker",WN=({worker:e})=>({name:AM,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>of(t))},addWorker:t=>of(t)});function of(e){e.addEventListener("message",t=>{MM(t.data)&&(t.stopImmediatePropagation(),V&&S.log("Sentry debugId web worker message received",t.data),L._sentryDebugIds={...t.data._sentryDebugIds,...L._sentryDebugIds})})}function jN({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0})}function MM(e){return _t(e)&&e._sentryMessage===!0&&"_sentryDebugIds"in e&&(_t(e._sentryDebugIds)||e._sentryDebugIds===void 0)}export{Dv as BrowserClient,FN as OpenFeatureIntegrationHook,Mt as SDK_VERSION,Bt as SEMANTIC_ATTRIBUTE_SENTRY_OP,nt as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,Va as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Qe as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,cn as Scope,L as WINDOW,Ht as addBreadcrumb,ZM as addEventProcessor,QM as addIntegration,OI as breadcrumbsIntegration,GI as browserApiErrorsIntegration,$N as browserProfilingIntegration,ZI as browserSessionIntegration,MN as browserTracingIntegration,DN as buildLaunchDarklyFlagUsedHandler,nN as captureConsoleIntegration,Li as captureEvent,Er as captureException,uN as captureFeedback,na as captureMessage,rl as captureSession,yI as chromeStackLineParser,KM as close,lN as consoleLoggingIntegration,wN as contextLinesIntegration,WM as continueTrace,Rb as createTransport,SN as createUserFeedbackEnvelope,dE as dedupeIntegration,Km as defaultRequestInstrumentationOptions,AI as defaultStackLineParsers,MI as defaultStackParser,HN as diagnoseSdkConnectivity,_p as endSession,Vb as eventFiltersIntegration,Av as eventFromException,Mv as eventFromMessage,uc as exceptionFromError,rN as extraErrorDataIntegration,cN as featureFlagsIntegration,dN as feedbackAsyncIntegration,fN as feedbackIntegration,fN as feedbackSyncIntegration,XM as flush,bN as forceLoad,zb as functionToStringIntegration,TI as geckoStackLineParser,st as getActiveSpan,F as getClient,Q as getCurrentScope,g1 as getDefaultIntegrations,$M as getFeedback,Wf as getGlobalScope,Te as getIsolationScope,xN as getReplay,Re as getRootSpan,Ns as getSpanDescendants,LS as getSpanStatusFromHttpCode,Ap as getTraceData,t1 as globalHandlersIntegration,kN as graphqlClientIntegration,IN as httpClientIntegration,c1 as httpContextIntegration,Yb as inboundFiltersIntegration,yN as init,NA as instrumentOutgoingRequests,LE as instrumentSupabaseClient,Zy as isEnabled,JM as isInitialized,Jy as lastEventId,ON as launchDarklyIntegration,gv as lazyLoadIntegration,p1 as linkedErrorsIntegration,pN as logger,NN as makeBrowserOfflineTransport,Nh as makeFetchTransport,eN as makeMultiplexedTransport,tN as moduleMetadataIntegration,EN as onLoad,PN as openFeatureIntegration,gN as opera10StackLineParser,_N as opera11StackLineParser,Db as parameterize,QS as registerSpanErrorInstrumentation,jN as registerWebWorker,AN as replayCanvasIntegration,RN as replayIntegration,TN as reportingObserverIntegration,sN as rewriteFramesIntegration,r_ as sendFeedback,jM as setContext,Eb as setCurrentClient,qM as setExtra,zM as setExtras,Xs as setHttpStatus,BM as setMeasurement,VM as setTag,GM as setTags,YM as setUser,vN as showReportDialog,PM as spanToBaggageHeader,J as spanToJSON,XS as spanToTraceHeader,LN as spotlightBrowserIntegration,XA as startBrowserTracingNavigationSpan,YA as startBrowserTracingPageLoadSpan,$i as startInactiveSpan,ky as startNewTrace,nl as startSession,pp as startSpan,HM as startSpanManual,UN as statsigIntegration,iN as supabaseIntegration,wy as suppressTracing,aN as thirdPartyErrorFilterIntegration,BN as unleashIntegration,DM as updateSpanName,WN as webWorkerIntegration,mN as winjsStackLineParser,tc as withActiveSpan,OM as withIsolationScope,Ye as withScope,oN as zodErrorsIntegration};
